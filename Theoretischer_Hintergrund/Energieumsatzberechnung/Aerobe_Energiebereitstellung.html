<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Aerobe Energiekomponente (WAerob) – Wirkungsgrad auf dem Radergometer im Sitzen und Stehen</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/Anaerobe_laktazide_Energiebereitstellung.html" rel="next">
<link href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/index_Energieumsatzberechnung.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-203cb2a5c35e5c5009fb1e53f0887423.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-7c126face602f4b12fa45de52a007bdc.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<meta name="shinylive:serviceworker_dir" content="../..">
<script src="../../site_libs/quarto-contrib/shinylive-0.9.1/shinylive/load-shinylive-sw.js" type="module"></script>
<script src="../../site_libs/quarto-contrib/shinylive-0.9.1/shinylive/run-python-blocks.js" type="module"></script>
<link href="../../site_libs/quarto-contrib/shinylive-0.9.1/shinylive/shinylive.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/shinylive-quarto-css/shinylive-quarto.css" rel="stylesheet">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.33/datatables.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../Theoretischer_Hintergrund/index_Theoretischer_Hintergrund.html">Theoretischer Hintergrund</a></li><li class="breadcrumb-item"><a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/index_Energieumsatzberechnung.html">Energieumsatzberechnung</a></li><li class="breadcrumb-item"><a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/Aerobe_Energiebereitstellung.html">Aerobe Energiekomponente (W<sub>Aerob</sub>)</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/Logo_η_3.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Dunkelmodus umschalten"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../Theoretischer_Hintergrund/index_Theoretischer_Hintergrund.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Theoretischer Hintergrund</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Theoretischer_Hintergrund/Wirkungsgrad_Theorie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wirkungsgrad</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/index_Energieumsatzberechnung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Energieumsatzberechnung</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/Aerobe_Energiebereitstellung.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Aerobe Energiekomponente (W<sub>Aerob</sub>)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/Anaerobe_laktazide_Energiebereitstellung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anaerobe- laktazide Energiekomponente (W<sub>BLC</sub>)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/Anaerobe_alaktazide_Energiebereitstellung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anaerobe- alaktazide Energiekomponente (W<sub>PCr</sub>)</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Theoretischer_Hintergrund/Mechanische_Arbeit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mechanische Arbeit</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Theoretischer_Hintergrund/Innere_Arbeit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Innere Arbeit</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Theoretischer_Hintergrund/Sitzen_Stehen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Radfahren im Sitzen und Stehen</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Forschungsfragen_Hypothesen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Forschungsfragen &amp; Hypothesen</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../Methodik/index_Methodik.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Methodik</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Methodik/Stichprobe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stichprobe</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Methodik/Messmethoden.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Messmethoden</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Methodik/Studiendesign.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Studiendesign</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../Ergebnisse/index_Ergebnisse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ergebnisse &amp; Statistik</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Ergebnisse/Drehzahl_Stufentests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Eingangsuntersuchungen</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Ergebnisse/VO2_Daten.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Phyisologische Belastungsparameter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Ergebnisse/EPOC_Daten.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Phyisologische Nachbelastungsparameter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Ergebnisse/Ergometer_Daten.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ergometrische Leistungsparameter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Ergebnisse/Wirkungsgrad_Statistik.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wirkungsgrad- und Stoffwechselparameter</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Abkuerzungsverzeichnis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abkürzungsverzeichnis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../Quellen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quellenverzeichnis</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="3">
    <h2 id="toc-title">Inhalt auf dieser Seite</h2>
   
  <ul>
  <li><a href="#bestimmung-des-ruheumsatzes" id="toc-bestimmung-des-ruheumsatzes" class="nav-link active" data-scroll-target="#bestimmung-des-ruheumsatzes">Bestimmung des Ruheumsatzes</a></li>
  <li><a href="#berechnung-der-aeroben-energiekomponente-waerob" id="toc-berechnung-der-aeroben-energiekomponente-waerob" class="nav-link" data-scroll-target="#berechnung-der-aeroben-energiekomponente-waerob">Berechnung der aeroben Energiekomponente W<sub>Aerob</sub></a></li>
  <li><a href="#sauerstoffvolumenstrom-kinetik" id="toc-sauerstoffvolumenstrom-kinetik" class="nav-link" data-scroll-target="#sauerstoffvolumenstrom-kinetik">Sauerstoffvolumenstrom-Kinetik</a></li>
  <li><a href="#quellenverzeichnis" id="toc-quellenverzeichnis" class="nav-link" data-scroll-target="#quellenverzeichnis">Quellenverzeichnis</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../Theoretischer_Hintergrund/index_Theoretischer_Hintergrund.html">Theoretischer Hintergrund</a></li><li class="breadcrumb-item"><a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/index_Energieumsatzberechnung.html">Energieumsatzberechnung</a></li><li class="breadcrumb-item"><a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/Aerobe_Energiebereitstellung.html">Aerobe Energiekomponente (W<sub>Aerob</sub>)</a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Aerobe Energiekomponente (W<sub>Aerob</sub>)</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<style type="text/css">
p {
  text-align: justify
}
caption, .figure-caption {
  text-align: left;
}
figure.quarto-float-tbl figcaption {
  text-align: left !important;
}
figure figcaption {
  text-align: justify;
}
</style>
</div>
<p>Um den aeroben Energieanteil am physiologischen Gesamtenergieumsatz (W<sub>Aerob</sub>) zu bestimmen, muss zu jedem Zeitpunkt t der Sauerstoffvolumenstrom über den Belastungszeitraum (<span class="math inline">\(\dot{V}O_{2,Belastung}(t)\)</span>) sowie der Ruheumsatz bekannt sein, welcher dem Sauerstoffvolumenstrom in Ruhe (<span class="math inline">\(\dot{V}O_{2, Ruhe}(t)\)</span>) entspricht.</p>
<section id="bestimmung-des-ruheumsatzes" class="level2">
<h2 class="anchored" data-anchor-id="bestimmung-des-ruheumsatzes">Bestimmung des Ruheumsatzes</h2>
<p>Der Ruheumsatz bezeichnet die Energiemenge für die Aufrechterhaltung der physiologischen Grundfunktionen wie Atmung, Kreislauf, Verdauung und unwillkürlichem Muskeltonus in einem normalen Ruhezustand. Im Gegensatz zum Grundumsatz, der unter streng standardisierten Bedingungen (morgens, nüchtern, liegend) gemessen wird, beschreibt der Ruheumsatz den Energieumsatz in einem alltäglichen Ruhezustand. Die Höhe des Ruheumsatzes wird maßgeblich von individuellen Faktoren wie Körpermasse, Geschlecht, Alter und besonders dem Anteil der stoffwechselaktiven Muskulatur beeinflusst. Für präzise Berechnungen des Energieumsatzes während körperlicher Aktivität dient der Ruheumsatz als Bezugsgröße <span class="citation" data-cites="Ciba-Geigy1977">(<a href="#ref-Ciba-Geigy1977" role="doc-biblioref">Ciba-Geigy, 1977, S. 225</a>)</span>.</p>
<p>Für die praktische Bestimmung des Grundumsatzes stehen zwei verschiedene Methoden zur Verfügung: Der Sauerstoffvolumenstrom in Ruhe <span class="math inline">\(\dot{V}O_{2, Ruhe}(t)\)</span> lässt sich entweder durch direkte Messung mittels Spirometrie oder durch Berechnung mittels etablierter Formeln bestimmen. In dieser Arbeit wurden dafür <a href="#eq-H" class="quarto-xref">Gleichung&nbsp;1</a> und <a href="#eq-RMR" class="quarto-xref">Gleichung&nbsp;2</a> verwendet. <a href="#eq-H" class="quarto-xref">Gleichung&nbsp;1</a> ermöglicht die Berechnung des täglichen Grundumsatzes (h) in kcal in Abhängigkeit von Geschlecht, Körpermasse, Körperlänge und Alter <span class="citation" data-cites="Harris1918">(<a href="#ref-Harris1918" role="doc-biblioref">Harris &amp; Benedict, 1918</a>)</span>:</p>
<p><span id="eq-H"><span class="math display">\[
h_{f, m}\,[kcal] =
\begin{cases}
h_{f} = 655.1 + (9.563 \cdot \text{Körpermasse [kg]}) + (1.850 \cdot \text{Körperlänge [cm]}) - (4.676 \cdot \text{Alter [Jahre]}) \rightarrow \text{Frauen}\\    
h_{m} = 66.5\; + (13.75 \cdot \text{Körpermasse [kg]}) + (5.003 \cdot \text{Körperlänge [cm]}) - (6.775 \cdot \text{Alter [Jahre]}) \rightarrow \text{Männer}
\end{cases}
\tag{1}\]</span></span></p>
<p>Nach der Berechnung des Grundumsatzes erfolgte die Bestimmung des kalorischen Äquivalents (kÄ) anhand des individuell gemessenen RQ (t) und <a href="#tbl-stegemann" class="quarto-xref">Tabelle&nbsp;1</a>, woraus sich der Ruheumsatz (RMR, Englisch für “resting metabolic rate”) im Liegen in Liter pro Minute berechnen ließ. Um vom Ruheumsatz im Liegen auf den Ruheumsatz im Stehen zu kommen, wurde der berechnete Ruheumsatz mit dem Faktor <span class="math inline">\(\frac{1.39}{1.08} = 1.287\)</span> für Männer und <span class="math inline">\(\frac{1.15}{0.90} = 1.278\)</span> für Frauen, basierend auf <a href="#fig-CIBA_GEIGY" class="quarto-xref">Abbildung&nbsp;1</a>, multipliziert <span class="citation" data-cites="Ciba-Geigy1977">(<a href="#ref-Ciba-Geigy1977" role="doc-biblioref">Ciba-Geigy, 1977, S. 225</a>)</span>. Der mit folgender Gleichung berechnete RMR entspricht <span class="math inline">\(\dot{V}O_{2, Ruhe}\)</span>:</p>
<p><span id="eq-RMR"><span class="math display">\[
RMR_{f, m}\,[l \cdot min^{-1}] =
\begin{cases}
RMR_{f} = \;\left( \frac{h_{f}}{24\, \cdot\, 60\, \cdot\, kÄ} \right) \cdot 4.1868 \cdot 1.278 \rightarrow \text{Frauen} \\
RMR_{m} = \left( \frac{h_{m}}{24\, \cdot\, 60\, \cdot\, kÄ} \right) \cdot 4.1868 \cdot 1.287 \rightarrow \text{Männer}
\end{cases}
\tag{2}\]</span></span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Abbildung 1: Energieumsatz bei verschiedenen Tätigkeiten (Ciba Geigy, 1977, S.225)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="columns">
<div class="column" style="width:85%;">
<div id="fig-CIBA_GEIGY" class="caption quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-CIBA_GEIGY-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/Ciba_Geigy_Ruheumsatz.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Abbildung&nbsp;1: Energieumsatz bei verschiedenen Tätigkeiten (Ciba Geigy, 1977, S.225)."><img src="images/Ciba_Geigy_Ruheumsatz.png" class="caption img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-CIBA_GEIGY-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;1: Energieumsatz bei verschiedenen Tätigkeiten (Ciba Geigy, 1977, S.225).
</figcaption>
</figure>
</div>
</div>
</div>
<div class="column" style="width:15%;">

</div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:66.0%;">
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
RMR-Beispielrechnung
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Parameter:</strong></p>
<ul>
<li>Körpermasse = 75 kg</li>
<li>Körperlänge = 180 cm</li>
<li>Alter = 25 Jahre</li>
<li>RQ = 0.77 entspricht kÄ von 19.946 [kJ • l<sup>-1</sup>] (siehe <a href="#tbl-stegemann" class="quarto-xref">Tabelle&nbsp;1</a>)</li>
</ul>
<p><span class="math inline">\(h_{m} = 66.5 + (13.75 \cdot \text{75}) + (5.003 \cdot \text{180}) - (6.775 \cdot \text{25}) = 1828.9\, [\text{kcal}]\)</span><br><br> <span class="math inline">\(RMR_{m} = \left( \frac{1828.9}{24 \cdot 60 \cdot 19.946} \right) \cdot 4.1868 \cdot 1.287 = 0.344\, [l \cdot min^{-1}]\)</span></p>
</div>
</div>
<p>In der vorliegenden Studie wurde der durchschnittliche <span class="math inline">\(\dot{V}O_{2, Ruhe}\)</span> über einen mehrminütigen Messzeitraum etwa 10 Minuten vor Beginn der ersten Belastung auf dem Fahrradergometer in sitzender Position ermittelt. Zusätzlich erfolgte eine Bestimmung durch die oben beschriebene Berechnungsmethode.<br> Da aufgrund verschiedener Faktoren, wie beispielsweise Stress, Nahrungsaufnahme oder unterschiedliche Umgebungsbedingungen, die Werte der gemessenen durchschnittlichen <span class="math inline">\(\dot{V}O_{2, Ruhe}\)</span> im Vergleich zu den Normwerten unnatürlich hoch sein können, wurde der gemessene <span class="math inline">\(\dot{V}O_{2,Ruhe}\)</span>-Durchschnittswert nur verwendet, wenn er maximal 20% größer war als der berechnete. Andernfalls wurde der berechnete Wert verwendet.</p>
</div><div class="column" style="width:2.0%;">

</div><div class="column" style="width:32.0%;">
<div class="cell" data-tbl-cap-location="bottom">
<div id="tbl-stegemann" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-cap-location="bottom">
<figure class="quarto-float quarto-float-tbl figure">
<div aria-describedby="tbl-stegemann-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-88d4c80de53dc32ebf17" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-88d4c80de53dc32ebf17">{"x":{"filter":"none","vertical":false,"data":[[0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.8100000000000001,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.9399999999999999,0.95,0.96,0.97,0.98,0.99,1],[19.619,19.636,19.686,19.737,19.791,19.841,19.887,19.946,20.009,20.046,20.101,20.151,20.201,20.256,20.306,20.356,20.411,20.461,20.515,20.561,20.616,20.666,20.716,20.771,20.821,20.871,20.926,20.976,21.026,21.081,21.131],[4.686,4.69,4.702,4.714,4.727,4.739,4.75,4.764,4.779,4.788,4.801,4.813,4.825,4.838,4.85,4.862,4.875,4.887,4.9,4.911,4.924,4.936,4.948,4.961,4.973,4.985,4.998,5.01,5.022,5.035,5.047]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>RQ<\/th>\n      <th>kÄ_O2_kJ_lO2<\/th>\n      <th>kÄ_O2_kcal_lO2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"tp","pageLength":8,"autoWidth":true,"columnDefs":[{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"targets":0,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"title":"RQ","targets":0},{"title":"kÄ<sub>Bel<\/sub> [kcal &middot; l<sup>-1<\/sup>]","targets":2},{"title":"kÄ<sub>Bel<\/sub> [kJ &middot; l<sup>-1<\/sup>]","targets":1},{"className":"dt-right","targets":[0,1,2]},{"name":"RQ","targets":0},{"name":"kÄ_O2_kJ_lO2","targets":1},{"name":"kÄ_O2_kcal_lO2","targets":2}],"order":[],"orderClasses":false,"lengthMenu":[8,10,25,50,100]}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render"],"jsHooks":[]}</script>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-tbl" id="tbl-stegemann-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;1: Zusammenhang zwischen dem respiratorischem Koeffizienten und dem kalorischen Äquivalent in [kcal · l<sup>-1</sup>] und [kJ · l<sup>-1</sup>] (Zuntz, 1901, S.260; Stegemann, 1991, S.59)
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="berechnung-der-aeroben-energiekomponente-waerob" class="level2">
<h2 class="anchored" data-anchor-id="berechnung-der-aeroben-energiekomponente-waerob">Berechnung der aeroben Energiekomponente W<sub>Aerob</sub></h2>
<p>Zur Bestimmung des aeroben Arbeitsumsatzes (W<sub>Aerob</sub>) während eines Belastungszeitraums wurde zunächst der Netto-Sauerstoffvolumenstrom <span class="math inline">\(\dot{V}O_{2,Netto}(t)\)</span> nach <a href="#eq-VO2_NET" class="quarto-xref">Gleichung&nbsp;3</a> berechnet:</p>
<p><span id="eq-VO2_NET"><span class="math display">\[
\dot{V}O_{2,Netto}(t)\;[l \cdot min^{-1}] = \dot{V}O_{2,Belastung}(t) - \dot{V}O_{2,Ruhe} (t)
\tag{3}\]</span></span></p>
<p>Der aerobe Anteil am physiologischen Gesamtenergieumsatz (W<sub>Aerob</sub>) konnte durch Multiplikation des mittleren Netto-Sauerstoffvolumenstroms (<span class="math inline">\(\overline{\dot{V}O_{2,Netto}}\)</span>) mit der Belastungsdauer t und dem mittleren kalorischen Äquivalent (<span class="math inline">\(\overline{kÄ}_{Bel}\)</span>) aus <a href="#tbl-stegemann" class="quarto-xref">Tabelle&nbsp;1</a> bestimmt werden <span class="citation" data-cites="Stegemann1991">(<a href="#ref-Stegemann1991" role="doc-biblioref">Stegemann, 1991, S. 59</a>)</span>:</p>
<p><span id="eq-WAER"><span class="math display">\[
W_{Aerob}\;[kJ] = \overline{\dot{V}O_{2,Netto}} \cdot \overline{kÄ}_{Bel} \cdot  t
\tag{4}\]</span></span></p>
<p>Die mittlere aerobe Leistung (<span class="math inline">\(\overline{P}_{Aerob}\)</span>) wurde durch Division der W<sub>Aerob</sub> in kJ durch die Belastungsdauer in Sekunden berechnet:</p>
<p><span id="eq-PAER"><span class="math display">\[
\overline{P}_{Aerob}\;[W] = \frac{W_{Aerob}}{t} \cdot 1000
\tag{5}\]</span></span></p>
</section>
<section id="sauerstoffvolumenstrom-kinetik" class="level2">
<h2 class="anchored" data-anchor-id="sauerstoffvolumenstrom-kinetik">Sauerstoffvolumenstrom-Kinetik</h2>
<p>Während die in <a href="#eq-WAER" class="quarto-xref">Gleichung&nbsp;4</a> beschriebenen Berechnungen der W<sub>Aerob</sub> auf Durchschnittswerten des <span class="math inline">\(\dot{V}O_{2,Belastung}(t)\)</span> basieren, ermöglicht die Analyse der Kinetik des Sauerstoffvolumenstroms zu Belastungsbeginn und während der Belastung weitere Einblicke in die Charakteristik der aeroben Energiebereitstellung. Von besonderem Interesse sind dabei die Geschwindigkeit der initialen Anpassung sowie das Erreichen oder Ausbleiben eines Fließgleichgewichts und dessen absolute Höhe. Diese Aspekte lassen sich durch die mathematische Modellierung des Sauerstoffvolumenstroms quantifizieren.</p>
<p>Der Anstieg des Sauerstoffvolumenstroms <span class="math inline">\(\dot{V}O_{2,Belastung}(t)\)</span> zu Beginn einer leichten bis moderaten körperlichen Belastung auf dem Fahrradergometer unterhalb der Laktatschwelle (LT<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>) wurde traditionell in der Literatur als monoexponentiell beschrieben, mit einer Amplitude von ungefähr 9–10 ml O<sub>2</sub>·W<sup>-1</sup>·min<sup>-1</sup> <span class="citation" data-cites="Barstow1991 Bearden2000">(<a href="#ref-Barstow1991" role="doc-biblioref">Barstow &amp; Mole, 1991</a>; <a href="#ref-Bearden2000" role="doc-biblioref">Bearden &amp; Moffatt, 2000</a>)</span>. Die Zeitkonstante <span class="math inline">\(\tau_{\text{Start}}\)</span> beschreibt die Geschwindigkeit, mit der der Sauerstoffvolumenstrom den Gleichgewichtszustand <span class="math inline">\(\dot{V}O_{2,\text{Brutto, SS}}\)</span> erreicht. Dieser Gleichgewichtszustand, auch Steady-State genannt, zeichnet sich durch ein Gleichgewicht zwischen Energiebedarf und aerober Energiebereitstellung aus, was sich in einem Plateauwert der <span class="math inline">\(\dot{V}O_{2,Belastung}(t)\)</span> widerspiegelt. Dies lässt sich mit der folgenden Formel darstellen <span class="citation" data-cites="Hill1924 Henry1956 Margaria1965 Whipp1971 Oezyener2001 Francescato2003 Clark2014">(<a href="#ref-Clark2014" role="doc-biblioref">Clark, 2014</a>; <a href="#ref-Francescato2003" role="doc-biblioref">Francescato et al., 2003</a>; <a href="#ref-Henry1956" role="doc-biblioref">Henry &amp; DeMoor, 1956</a>; <a href="#ref-Hill1924" role="doc-biblioref">Hill et al., 1924</a>; <a href="#ref-Margaria1965" role="doc-biblioref">Margaria et al., 1965</a>; <a href="#ref-Oezyener2001" role="doc-biblioref">Özyener et al., 2001</a>; <a href="#ref-Whipp1971" role="doc-biblioref">Whipp, 1971</a>)</span>:</p>
<p><span id="eq-VO2_Start"><span class="math display">\[
\dot{V}O_{2,\text{Belastung}}\,(t) = \dot{V}O_{2,\text{Amplitude}} \cdot \left(1 - e^{-\frac{t - TD}{\tau_{\text{Start}}}}\right) + \dot{V}O_{2,\text{Start}}
\tag{6}\]</span></span></p>
<p>Dabei beschreibt <span class="math inline">\(\dot{V}O_{2,\text{Start}}\)</span> den Sauerstoffvolumenstrom zu Beginn der Belastung und <span class="math inline">\(\dot{V}O_{2,\text{Amplitude}}\)</span> die Differenz zwischen Start- und Brutto-Steady-State-Wert. Der Brutto-Steady-State-Wert <span class="math inline">\(\dot{V}O_{2,\text{Brutto, SS}}\)</span> ergibt sich aus der Summe von <span class="math inline">\(\dot{V}O_{2,\text{Amplitude}}\)</span> und <span class="math inline">\(\dot{V}O_{2,\text{Start}}\)</span> und wurde in der vorliegenden Untersuchung zum Zeitpunkt 4<span class="math inline">\(\tau\)</span> bestimmt. Durch Subtraktion des Ruhe-Sauerstoffvolumenstroms <span class="math inline">\(\dot{V}O_{2, \text{Ruhe}}\)</span> von diesem Brutto-Steady-State-Wert wurde der Netto-Sauerstoffvolumenstrom <span class="math inline">\(\dot{V}O_{2,\text{Netto, SS}}\)</span> berechnet. Die Wahl des Zeitpunkts 4<span class="math inline">\(\tau\)</span> basiert darauf, dass zu diesem Zeitpunkt bereits 98% des Gesamtanstiegs des Sauerstoffvolumenstroms stattgefunden haben. Das genaue methodische Vorgehen zur Bestimmung der <span class="math inline">\(\dot{V}O_{2,\text{Brutto, SS}}\)</span>- und <span class="math inline">\(\dot{V}O_{2,\text{Netto, SS}}\)</span>-Werte wird am Ende dieses Kapitels detailliert beschrieben. <br> In der folgenden Shiny-App wird ein Beispiel der in <a href="#eq-VO2_Start" class="quarto-xref">Gleichung&nbsp;6</a> beschriebenen Modellfunktion gezeigt. Eigene <span class="math inline">\(\dot{V}O_{2}\)</span>-Daten können hochgeladen und mittels nichtlinearer Regression an die Beispieldaten angepasst werden.</p>
<section id="shiny-app-monoexponentielle-dotvo_2-modellfunktion" class="level4 unnumbered unlisted">
<h4 class="unnumbered unlisted anchored" data-anchor-id="shiny-app-monoexponentielle-dotvo_2-modellfunktion">Shiny-App: Monoexponentielle <span class="math inline">\(\dot{V}O_{2}\)</span>-Modellfunktion</h4>
<pre class="shinylive-r" data-engine="r"><code>#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| viewerHeight: 900
library(shiny)
library(plotly)
library(minpack.lm)

# Beispieldaten
t_data &lt;- c(0, 2.8, 5.3, 8.6, 10.4, 15.2, 19.7, 22.5, 24.5, 26.2, 28.2, 31.6, 33.5, 35.3, 37, 38.5, 40.3, 41.9, 43.5, 45.2, 46.8, 48.4, 50, 51.5, 53.3, 54.8, 56.5, 57.9, 59.5, 61.1, 62.9, 64.3, 65.8, 67.7, 69.1, 70.7, 72.4, 73.9, 75.7, 77.2, 78.9, 80.5, 82.7, 84.1, 85.5, 87, 88.6, 90.2, 91.5, 92.9, 94.3, 95.8, 97.6, 99.1, 100.5, 102.1, 103.5, 105.3, 106.6, 108.1, 109.6, 111.4, 112.8, 114.3, 115.8, 117.7, 119.1, 120.8, 122.3, 124.2, 125.7, 127.2, 128.8, 131.1, 132.5, 133.9, 135.4, 136.9, 138.4, 140, 141.3, 143, 144.5, 146.1, 147.6, 149, 150.5, 152.3, 153.9, 155.6, 156.9, 158.6, 160.1, 162.4, 163.7, 165.1)
VO2_data &lt;- c(0.465, 0.34, 0.466, 0.503, 0.452, 0.687, 0.846, 0.963, 0.936, 1.125, 1.238, 1.541, 1.395, 1.685, 1.689, 1.622, 1.917, 1.732, 1.835, 1.801, 1.664, 1.744, 1.891, 1.85, 1.858, 1.89, 2.108, 1.962, 1.992, 1.972, 2.026, 1.868, 1.949, 2.033, 1.887, 1.856, 2.112, 2.117, 2.129, 1.994, 2.03, 1.925, 1.916, 1.949, 1.956, 2.119, 1.894, 2.034, 1.766, 1.994, 1.985, 2.068, 1.796, 2.172, 2.09, 2.017, 2.152, 2.238, 2.027, 2.214, 2.159, 2.098, 1.963, 2.063, 2.292, 2.21, 1.84, 2.102, 2.1, 2.086, 2.008, 2.048, 1.978, 1.87, 2.16, 1.977, 2.335, 2.053, 2.084, 2.056, 2.005, 2.161, 2.088, 2.161, 2.078, 2.038, 2.117, 2.148, 2.043, 2.342, 2.142, 2.306, 2.043, 1.881, 1.918, 2.252)

# UI
ui &lt;- fluidPage(
  titlePanel("V̇O2-Modellfunktion"),
  fluidRow(
    column(3,
           style = "height: 90vh; overflow-y: auto;",
           
           tags$h4(tags$strong("Modellparameter:")),
           sliderInput("VO2", "V̇O2 Amplitude", min = 0.0, max = 7.0, value = 1.7, step = 0.001),
           sliderInput("Tau", "Tau", min = 5, max = 360, value = 23, step = 1.0),
           sliderInput("VO2_Start", "V̇O2 Start", min = 0.0, max = 4.0, value = 0.4, step = 0.001),
           sliderInput("VO2_Ruhe", "V̇O2 Ruhe", min = 0, max = 1, value = 0.3, step = 0.001),
           sliderInput("time_delay", "Zeitverzögerung", min = 0, max = 300, value = 11, step = 1),
           conditionalPanel(
             condition = "output.showFitSlider",
             sliderInput("nlsLM_end", "nlsLM Ende", min = 10, max = max(t_data), value = max(t_data), step = 1)
           ),
           actionButton("toggle_data", "Beispieldaten einfügen"),
           br(), br(),
           fileInput("file_upload", "CSV-Datei hochladen", accept = ".csv"),
           tags$h4(tags$strong("Modelanpassung:")),
           actionButton("optimize", "nlsLM - Fit"),
           br(), br(),
           tags$h4(tags$strong("Berechnung - Ruhesauerstoffaufnahme:")),
           radioButtons("geschlecht", "Geschlecht:", choices = c("Männlich", "Weiblich")),
           sliderInput("koerpermasse", "Körpermasse [kg]:", min = 40, max = 150, value = 55),
           sliderInput("koerperlaenge", "Körperlänge [cm]:", min = 140, max = 220, value = 160),
           sliderInput("alter", "Alter [Jahre]:", min = 18, max = 100, value = 24),
           sliderInput("rq", "RQ:", min = 0.7, max = 1.0, value = 0.77, step = 0.01),
           actionButton("berechne_vo2_ruhe", "VO2 Ruhe berechnen")
    ),
    mainPanel(
      width = 9,
      plotlyOutput("plot"),
      uiOutput("instructions")
    )
  )
)

# Server
server &lt;- function(input, output, session) {
  show_data &lt;- reactiveVal(FALSE)
  uploaded_data &lt;- reactiveVal(NULL)
  
  observeEvent(input$toggle_data, {
    show_data(!show_data())
    max_t &lt;- max(t_data)
    updateSliderInput(session, "nlsLM_end", min = input$time_delay, max = max_t, value = max_t)
  })
  
  observeEvent(input$file_upload, {
    req(input$file_upload)
    df &lt;- read.csv(input$file_upload$datapath)
    if ("t_s" %in% names(df) &amp;&amp; "VO2_t" %in% names(df)) {
      uploaded_data(df)
      show_data(TRUE)
      max_t &lt;- max(df$t_s)
      updateSliderInput(session, "nlsLM_end", min = input$time_delay, max = max_t, value = max_t)
    } else {
      showModal(modalDialog(
        title = "Invalid CSV",
        "Die csv-Datei muss 't_s' und 'VO2_t' als Spaltennamen beinhalten.",
        easyClose = TRUE,
        footer = NULL
      ))
    }
  })
  
  # Neue Funktionen zur Berechnung des Grundumsatzes und RMR
  berechne_grundumsatz &lt;- function(geschlecht, masse, laenge, alter) {
    if (geschlecht == "Männlich") {
      return(66.5 + (13.75 * masse) + (5.003 * laenge) - (6.775 * alter))
    } else {
      return(655.1 + (9.563 * masse) + (1.850 * laenge) - (4.676 * alter))
    }
  }
  
  berechne_rmr &lt;- function(grundumsatz, rq, geschlecht) {
    ka &lt;- 19.946  # Annahme für RQ = 0.77, passen Sie dies an, wenn nötig
    faktor &lt;- if(geschlecht == "Männlich") 1.287 else 1.278
    return((grundumsatz / (24 * 60 * ka)) * 4.1868 * faktor)
  }
  
  # Reaktion auf den Klick des "VO2 Ruhe berechnen" Buttons
  observeEvent(input$berechne_vo2_ruhe, {
    grundumsatz &lt;- berechne_grundumsatz(
      input$geschlecht,
      input$koerpermasse,
      input$koerperlaenge,
      input$alter
    )
    
    rmr &lt;- berechne_rmr(grundumsatz, input$rq, input$geschlecht)
    
    # Aktualisieren Sie den VO2_Ruhe Slider mit dem berechneten Wert
    updateSliderInput(session, "VO2_Ruhe", value = round(rmr, 3))
    
    # Zeigen Sie eine Benachrichtigung mit dem berechneten Wert an
    showNotification(paste("Berechnete Ruhesauerstoffaufnahme:", round(rmr, 3), "l/min"), type = "message")
  })
  
  
  
  observe({
    if (input$VO2_Start &lt; input$VO2_Ruhe) {
      updateSliderInput(session, "VO2_Start", value = input$VO2_Ruhe)
    }
  })
  
  output$showFitSlider &lt;- reactive({
    show_data()
  })
  outputOptions(output, "showFitSlider", suspendWhenHidden = FALSE)
  
  observeEvent(input$optimize, {
    if (show_data()) {
      Beispieldaten &lt;- if (is.null(uploaded_data())) {
        data.frame(t_s = t_data, VO2_t = VO2_data)
      } else {
        uploaded_data()
      }
      
      t_delay &lt;- isolate(input$time_delay)
      nlsLM_end &lt;- isolate(input$nlsLM_end)
      
      # Finde den nächstgelegenen Zeitpunkt zu t_delay
      closest_index &lt;- which.min(abs(Beispieldaten$t_s - t_delay))
      
      # Setze VO2_Start auf den gerundeten Wert des nächsten Punktes
      VO2_Start &lt;- round(Beispieldaten$VO2_t[closest_index], 3)
      
      updateSliderInput(session, "VO2_Start", value = VO2_Start)
      
      data_subset &lt;- Beispieldaten[Beispieldaten$t_s &gt;= t_delay &amp; Beispieldaten$t_s &lt;= nlsLM_end, ]
      
      start_values &lt;- list(VO2 = isolate(input$VO2), Tau = isolate(input$Tau))
      
      fit &lt;- try(nlsLM(VO2_t ~ VO2 * (1 - exp(-(t_s - t_delay) / Tau)) + VO2_Start,
                       data = data_subset,
                       start = start_values,
                       lower = c(VO2 = 0.5, Tau = 5),
                       upper = c(VO2 = 7.0, Tau = 360),
                       control = nls.control(maxiter = 1024)), silent = TRUE)
      
      if (!inherits(fit, "try-error")) {
        params &lt;- as.list(coef(fit))
        updateSliderInput(session, "VO2", value = params$VO2)
        updateSliderInput(session, "Tau", value = params$Tau)
      } else {
        showModal(modalDialog(
          title = "nlsLM fehlgeschlagen",
          "Die nicht-lineare Regression mittels Levenberg-Marquardt-Algorithmus konnte nicht erfolgreich durchgeführt werden.",
          easyClose = TRUE,
          footer = NULL
        ))
      }
    }
  })
  
  output$plot &lt;- renderPlotly({
    VO2 &lt;- input$VO2
    Tau &lt;- input$Tau
    VO2_Start &lt;- input$VO2_Start
    t_delay &lt;- input$time_delay
    VO2_Ruhe &lt;- input$VO2_Ruhe
    nlsLM_end &lt;- input$nlsLM_end
    
    model_function &lt;- function(t_s, VO2, Tau, VO2_Start, t_delay) {
      VO2 * (1 - exp(-(t_s - t_delay) / Tau)) + VO2_Start
    }
    
    Beispieldaten &lt;- if (show_data() &amp;&amp; !is.null(uploaded_data())) {
      uploaded_data()
    } else {
      data.frame(t_s = t_data, VO2_t = VO2_data)
    }
    
    tau4 &lt;- 4 * Tau
    max_t &lt;- max(Beispieldaten$t_s, na.rm = TRUE)
    max_x &lt;- max(1.05 * tau4 + t_delay, max_t * 1.05)
    t_s &lt;- seq(0, max_x * 1.20, by = 1)
    model_values &lt;- ifelse(t_s &gt;= t_delay, model_function(t_s, VO2, Tau, VO2_Start, t_delay), NA)
    VO2_SS_gross &lt;- model_function(tau4 + t_delay, VO2, Tau, VO2_Start, t_delay)
    VO2_SS_net &lt;- VO2_SS_gross - VO2_Ruhe
    max_y &lt;- max(1.05 * VO2_SS_gross, max(Beispieldaten$VO2_t, na.rm = TRUE) * 1.05)
    
    eq_text &lt;- sprintf("V̇O₂ (t) = %.3f * (1 - e&lt;sup&gt;-(t - %.2f) / %.2f&lt;/sup&gt;) + %.3f",
                       VO2, t_delay, Tau, VO2_Start)
    VO2_SS_gross_text &lt;- sprintf("V̇O₂ &lt;sub&gt;SS,Brutto&lt;/sub&gt;: %.3f", VO2_SS_gross)
    VO2_SS_net_text &lt;- sprintf("V̇O₂ &lt;sub&gt;SS,Netto&lt;/sub&gt;: %.3f", VO2_SS_net)
    t_halb &lt;- Tau * log(2)
    
    shapes &lt;- list(
      list(
        type = "line", x0 = t_delay, x1 = t_delay, y0 = 0, y1 = max_y * 1.5,
        line = list(color = "gray", width = 1, dash = "dash")
      ),
      list(
        type = "line", x0 = Tau + t_delay, x1 = Tau + t_delay, y0 = 0, y1 = max_y * 1.5,
        line = list(color = "gray", width = 1, dash = "dash")
      ),
      list(
        type = "line", x0 = tau4 + t_delay, x1 = tau4 + t_delay, y0 = 0, y1 = max_y * 1.5,
        line = list(color = "gray", width = 1, dash = "dash")
      ),
      if (show_data()) {
        list(
          type = "line", x0 = nlsLM_end, x1 = nlsLM_end, y0 = 0, y1 = max_y * 1.5,
          line = list(color = "gray", width = 1, dash = "dash")
        )
      },
      list(
        type = "line", x0 = 0, x1 = max_x, y0 = VO2_Ruhe, y1 = VO2_Ruhe,
        line = list(color = '#1CADE4', width = 1, dash = "solid")
      )
    )
    
    p &lt;- plot_ly() %&gt;%
      add_trace(x = ~t_s, y = ~model_values, type = 'scatter', mode = 'lines',
                name = 'Modellfunktion', line = list(color = '#EF6F6A')) %&gt;%
      layout(
        title = "V̇O&lt;sub&gt;2&lt;/sub&gt;-Modellfunktion",
        margin = list(t = 40),
        xaxis = list(title = "t [s]", range = c(0, max_x)),
        yaxis = list(title = "V̇O&lt;sub&gt;2&lt;/sub&gt;(t) [l·min&lt;sup&gt;-1&lt;/sup&gt;]", tickformat = ".3f"),
        legend = list(
          x = 0.80,
          y = 0.99,
          xanchor = "left",
          yanchor = "top",
          bgcolor = "rgba(255, 255, 255, 0.3)",
          bordercolor = "rgba(0,0,0,0)",
          borderwidth = 0
        ),
        shapes = shapes,
        annotations = list(
          list(
            x = max_x * 0.60,
            y = max_y * 0.6,
            text = eq_text,
            showarrow = FALSE,
            xanchor = 'left',
            yanchor = 'bottom',
            font = list(
              family = "Arial, sans-serif",
              size = 12,
              color = "black"
            )
          ),
          list(
            x = max_x * 0.60,
            y = max_y * 0.5,
            text = VO2_SS_gross_text,
            showarrow = FALSE,
            xanchor = 'left',
            yanchor = 'bottom',
            font = list(
              family = "Arial, sans-serif",
              size = 12,
              color = "black"
            )
          ),
          list(
            x = max_x * 0.60,
            y = max_y * 0.4,
            text = VO2_SS_net_text,
            showarrow = FALSE,
            xanchor = 'left',
            yanchor = 'bottom',
            font = list(
              family = "Arial, sans-serif",
              size = 12,
              color = "black"
            )
          ),
          list(
            x = max_x * 0.60,
            y = max_y * 0.3,
            text = paste("T&lt;sub&gt;1/2&lt;/sub&gt;:", round(t_halb, 1)," s"),
            showarrow = FALSE,
            xanchor = 'left',
            yanchor = 'bottom',
            font = list(
              family = "Arial, sans-serif",
              size = 12,
              color = "black"
            )
          ),
          list(
            x = t_delay, y = max_y * 0.9, text = sprintf("t&lt;sub&gt;delay&lt;/sub&gt;: %.1f s", t_delay), 
            showarrow = FALSE, xanchor = "left", yanchor = "bottom",
            textangle = -90, font = list(size = 11)
          ),
          list(
            x = Tau + t_delay, y = max_y * 0.9, text = sprintf("tau: %.1f s", Tau), 
            showarrow = FALSE, xanchor = "left", yanchor = "bottom",
            textangle = -90, font = list(size = 11)
          ),
          list(
            x = tau4 + t_delay, y = max_y * 0.9, text = sprintf("4tau: %.1f s", tau4), 
            showarrow = FALSE, xanchor = "left", yanchor = "bottom",
            textangle = -90, font = list(size = 11)
          ),
          if (show_data()) {
            list(
              x = nlsLM_end, y = max_y * 0.9, text = sprintf("nlsLM Ende: %.1f s", nlsLM_end), 
              showarrow = FALSE, xanchor = "left", yanchor = "bottom",
              textangle = -90, font = list(size = 11)
            )
          }
        )) %&gt;%
      add_trace(x = ~t_s, y = ~rep(VO2_Ruhe, length(t_s)), type = 'scatter', mode = 'lines',
                name = 'V̇O&lt;sub&gt;2, Ruhe&lt;/sub&gt;', line = list(color = '#1CADE4'))
    
    if (show_data()) {
      model_values_at_data &lt;- model_function(Beispieldaten$t_s, VO2, Tau, VO2_Start, t_delay)
      
      data_subset &lt;- Beispieldaten[Beispieldaten$t_s &gt;= t_delay &amp; Beispieldaten$t_s &lt;= input$nlsLM_end, ]
      
      ss_res &lt;- sum((data_subset$VO2_t - model_values_at_data[Beispieldaten$t_s &gt;= t_delay &amp; Beispieldaten$t_s &lt;= input$nlsLM_end])^2, na.rm = TRUE)
      ss_tot &lt;- sum((data_subset$VO2_t - mean(data_subset$VO2_t, na.rm = TRUE))^2, na.rm = TRUE)
      r_squared &lt;- 1 - (ss_res / ss_tot)
      
      p &lt;- p %&gt;%
        add_trace(data = Beispieldaten, x = ~t_s, y = ~VO2_t, type = 'scatter', mode = 'markers+lines',
                  name = 'V̇O&lt;sub&gt;2&lt;/sub&gt;', 
                  marker = list(color = 'rgba(38, 131, 198, 0.9)', size = 5.0),
                  line = list(color = 'rgba(38, 131, 198, 1.0)', width = 0.65, dash = '4 4')) %&gt;%
        layout(annotations = list(
          list(
            x = max_x * 0.60,
            y = max_y * 0.2,
            text = sprintf("R²: %.3f", r_squared),
            showarrow = FALSE,
            xanchor = 'left',
            yanchor = 'bottom',
            font = list(
              family = "Arial, sans-serif",
              size = 12,
              color = "black"
            )
          )
        ))
    }
    
    p
  })
  output$instructions &lt;- renderUI({
    HTML(
      "&lt;div style='margin-top: 20px; padding: 10px; background-color: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; width: fit-content;'&gt;
        &lt;h4 style='color: #333;'&gt;&lt;strong&gt;Anleitung - Modellanpassung:&lt;/strong&gt;&lt;/h4&gt;
        &lt;ol style='color: #555; list-style-position: outside; padding-left: 20px;'&gt;
          &lt;li&gt;Beispiel VO2-Daten oder eigene VO2-Daten als CSV-Datei einfügen.&lt;/li&gt;
          &lt;li&gt;Die Zeitverzögerung festlegen, um den Startpunkt der Modellanpassung zu bestimmen, und bei Bedarf das Ende der Anpassung anpassen.&lt;/li&gt;
          &lt;li&gt;Modellanpassung 'Fit: nlsLM' durchführen.&lt;/li&gt;
          &lt;li&gt;Alternativ: Manuelle Modellanpassung der Modellparameter mit den Schiebereglern.&lt;/li&gt;
        &lt;/ol&gt;
        &lt;div style='margin-top: 20px;'&gt;&lt;/div&gt;
        &lt;pre style='background-color: #f8f8f8; padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: fit-content;'&gt;
VO2-Daten können als CSV-Datei im folgenden Format hochgeladen werden:
t_s,VO2_t
0.0,0.479
1.0,0.459
2.3,0.488
…
        &lt;/pre&gt;
      &lt;/div&gt;"
    )
  })
}

# App ausführen
shinyApp(ui = ui, server = server)</code></pre>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Modellanpassung - Details:</strong>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>nlsLM - Fit:</strong></p>
<ul>
<li>Verwendete Funktion: nlsLM</li>
<li>Parameter: V̇O2 (Amplitude), Tau</li>
<li>Modell: V̇O2_t ~ V̇O2 · (1 - exp(-(t_s - t_delay) / Tau)) + V̇O2_Start</li>
<li>Grenzen:
<ul>
<li>V̇O2: <em>0.5 bis 7.0 l/min</em></li>
<li>Tau: <em>5 bis 360 s</em></li>
</ul></li>
<li>Prozess:
<ol type="a">
<li>Bestimmung des V̇O2_Start-Wertes:
<ul>
<li>Finden des nächstgelegenen Zeitpunkts zu t_delay in den Daten</li>
<li>Setzen von V̇O2_Start auf den gerundeten V̇O2-Wert dieses Punktes</li>
</ul></li>
<li>Datenauswahl:
<ul>
<li>Verwendung der Daten zwischen <em>t_delay</em> und <em>nlsLM_end</em></li>
</ul></li>
<li>Startwertebestimmung:
<ul>
<li>Verwendung der aktuellen Slider-Werte für V̇O2 und Tau</li>
</ul></li>
<li>Durchführung der nicht-linearen Regression:
<ul>
<li>Verwendung des Levenberg-Marquardt-Algorithmus</li>
<li>Maximale Iterationen: <em>1024</em></li>
</ul></li>
</ol></li>
<li>Optimierung: Minimierung der Residuenquadratsumme (RSS)</li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="drei-phasen-modell" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="drei-phasen-modell">Drei-Phasen-Modell</h2>
<p>Die Analyse der <span class="math inline">\(\dot{V}O_{2}(t)\)</span>-Kinetik kann durch die Berücksichtigung von Zeitverzögerungen und/oder Exponentialfunktionen zweiter Ordnung verfeinert werden. Dazu kann die Anpassungsreaktion des <span class="math inline">\(\dot{V}O_{2}\,(t)\)</span> nach Beginn der sportlichen Betätigung in drei Phasen unterteilt werden, wie in <a href="#fig-3_Phasen" class="quarto-xref">Abbildung&nbsp;2</a> zu sehen <span class="citation" data-cites="Whipp1982">(<a href="#ref-Whipp1982" role="doc-biblioref">Whipp et al., 1982</a>)</span>. Dies ermöglicht es, die erhöhte Komplexität der <span class="math inline">\(\dot{V}O_{2}\)</span>-Kinetik oberhalb der LT besser darzustellen und eine präzisere Analyse der physiologischen Anpassungen bei körperlicher Belastung durchzuführen, da oberhalb der LT der <span class="math inline">\(\dot{V}O_2\)</span>-Umsatz über 10 ml O<sub>2</sub>·W<sup>-1</sup>·min<sup>-1</sup> steigt <span class="citation" data-cites="Barstow1994 Bearden2000 Sietsema2020">(<a href="#ref-Barstow1994" role="doc-biblioref">Barstow, 1994</a>; <a href="#ref-Bearden2000" role="doc-biblioref">Bearden &amp; Moffatt, 2000</a>; <a href="#ref-Sietsema2020" role="doc-biblioref">Sietsema et al., 2020</a>)</span>. Die 3 Phasen lassen sich wie folgt beschreiben:</p>
<div class="columns">
<div class="column" style="width:72%;">
<div id="fig-3_Phasen" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3_Phasen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/McNulty2017_VO2_3_Phase.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Abbildung&nbsp;2: Beispiel der Drei-Phasen der VO2-Kinetik bis zum Erreichen eines SS nach Beginn der Belastung (McNulty &amp; Robergs, 2017)"><img src="images/McNulty2017_VO2_3_Phase.png" height="500" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3_Phasen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2: Beispiel der Drei-Phasen der VO2-Kinetik bis zum Erreichen eines SS nach Beginn der Belastung (McNulty &amp; Robergs, 2017)
</figcaption>
</figure>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:25%;">

</div>
</div>
<div class="columns">
<div class="column" style="width:60%;">
<p><strong>Phase 1:</strong><br> Phase I, häufig als kardiodynamische Phase bezeichnet, umfasst ungefähr die ersten 10 bis 25 Sekunden nach Beginn der Belastung. Aufgrund des schnellen Anstiegs des Herzzeitvolumens und des Lungenblutflusses zu Beginn der Belastung steigt <span class="math inline">\(\dot{V}O_2\,(t)\)</span> abrupt an. In dieser Phase bleibt die Zusammensetzung des gemischtvenösen Blutes sowie der respiratorische Quotient <span class="math inline">\(RQ\,(t) = \frac{\dot{V}CO_{2}\,(t)}{\dot{V}O_{2}\,(t)}\)</span> im Vergleich zum Ruhezustand unverändert. Somit ist der Anstieg des <span class="math inline">\(\dot{V}O_2\,(t)\)</span> ausschließlich auf das erhöhte Herzminutenvolumen zurückzuführen, da sich die Sauerstoffkonzentration im arteriellen und venösen Blut (C<sub>a</sub> und C<sub>v</sub>) noch nicht verändert haben. Dies lässt sich mit Hilfe der Fick’schen Gleichung <a href="#eq-FICK" class="quarto-xref">Gleichung&nbsp;7</a> verdeutlichen <span class="citation" data-cites="Fick1855 Whipp1982 Stirling2005 Clark2014 Sietsema2020">(<a href="#ref-Clark2014" role="doc-biblioref">Clark, 2014</a>; <a href="#ref-Fick1855" role="doc-biblioref">Fick, 1855</a>; <a href="#ref-Sietsema2020" role="doc-biblioref">Sietsema et al., 2020</a>; <a href="#ref-Stirling2005" role="doc-biblioref">Stirling et al., 2005</a>; <a href="#ref-Whipp1982" role="doc-biblioref">Whipp et al., 1982</a>)</span>.</p>
<p><span id="eq-FICK"><span class="math display">\[
\dot{V}O_2 = \dot{Q} \cdot (C_a - C_v)
\tag{7}\]</span></span></p>
<p>Da die anfängliche „kardiodynamische“ Phase der <span class="math inline">\(\dot{V}O_2\)</span>-Reaktion nicht direkt den Sauerstoffumsatz der aktiven Muskulatur repräsentiert, werden in der Regel die ersten 20 bis 25 Sekunden von Phase I bei Modellierungen der <span class="math inline">\(\dot{V}O_2\)</span>-Kinetik aus der Modellanpassung ausgeschlossen <span class="citation" data-cites="Bearden2000 Oezyener2001">(<a href="#ref-Bearden2000" role="doc-biblioref">Bearden &amp; Moffatt, 2000</a>; <a href="#ref-Oezyener2001" role="doc-biblioref">Özyener et al., 2001</a>)</span>.</p>
<p><strong>Phase 2:</strong><br> Phase 2 folgt auf Phase 1 und ist durch einen schnellen, monoexponentiellen Anstieg des <span class="math inline">\(\dot{V}O_2\)</span> gekennzeichnet. Die Zeitkonstante beträgt im Durchschnitt etwa 30 <span class="citation" data-cites="Sietsema2020">(<a href="#ref-Sietsema2020" role="doc-biblioref">Sietsema et al., 2020</a>)</span> bis 33 Sekunden <span class="citation" data-cites="Oezyener2001">(<a href="#ref-Oezyener2001" role="doc-biblioref">Özyener et al., 2001</a>)</span>. Anschließend wird entweder ein SS erreicht oder der <span class="math inline">\(\dot{V}O_2\)</span> steigt weiter an, was dann in dem Modell als Phase 3 bezeichnet wird <span class="citation" data-cites="Stirling2005">(<a href="#ref-Stirling2005" role="doc-biblioref">Stirling et al., 2005</a>)</span>.</p>
<p><strong>Phase 3:</strong><br> In Phase 3 des <span class="math inline">\(\dot{V}O_2\)</span>-Modells wird bei leichten bis moderaten Belastungen unterhalb der Laktatschwelle (LT) nach etwa 3 Minuten ein stabiler Zustand (SS) erreicht. Dieses Verhalten beschreibt, wie der <span class="math inline">\(\dot{V}O_2\)</span> sich im 3-Phasen-Modell für Belastungen unterhalb der LT verhält. Bei Belastungen oberhalb der LT erreicht der <span class="math inline">\(\dot{V}O_2\)</span> nach der primären Anpassungsreaktion keinen SS mehr, sondern steigt weiter an (siehe <a href="#fig-Verlauf_ON" class="quarto-xref">Abbildung&nbsp;3</a>). Diese zusätzliche Komponente, meist als “slow component” bezeichnet und überlagert die anfängliche monoexponentielle Funktion aus Phase 2.</p>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:38%;">
<div id="fig-Verlauf_ON" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-Verlauf_ON-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/Ozyener_ON.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Abbildung&nbsp;3: Beispiele der VO2-Anstiegskinetik eines Probanden für verschiedene Belastungsintensitäten: sehr intensiv, schwer, mittelschwer und moderat (von oben nach unten). Unterhalb der VO2-Daten ist der entsprechende Residuenplot zu sehen. In Spalte A wird eine Modellfunktion mit mono-exponentieller Kurvenanpassung gezeigt, in Spalte B eine mit bi-exponentieller Anpassung (Özyener, 2001)."><img src="images/Ozyener_ON.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-Verlauf_ON-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;3: Beispiele der VO<sub>2</sub>-Anstiegskinetik eines Probanden für verschiedene Belastungsintensitäten: sehr intensiv, schwer, mittelschwer und moderat (von oben nach unten). Unterhalb der VO<sub>2</sub>-Daten ist der entsprechende Residuenplot zu sehen. In Spalte A wird eine Modellfunktion mit mono-exponentieller Kurvenanpassung gezeigt, in Spalte B eine mit bi-exponentieller Anpassung (Özyener, 2001).
</figcaption>
</figure>
</div>
</div>
</div>
<p>Mathematische Modellierungen haben gezeigt, dass die langsame Komponente etwa 90 bis 200 Sekunden nach Beginn des Übergangs einsetzt <span class="citation" data-cites="Whipp1972 Barstow1991 Bearden2000 Sietsema2020">(<a href="#ref-Barstow1991" role="doc-biblioref">Barstow &amp; Mole, 1991</a>; <a href="#ref-Bearden2000" role="doc-biblioref">Bearden &amp; Moffatt, 2000</a>; <a href="#ref-Sietsema2020" role="doc-biblioref">Sietsema et al., 2020</a>; <a href="#ref-Whipp1972" role="doc-biblioref">Whipp &amp; Wasserman, 1972</a>)</span>. Die Komponente der Anpassungsreaktion bis zum Beginn der slow component wird in der Literatur oft als “primary component” oder “fundamental component” bezeichnet <span class="citation" data-cites="Barstow1994 Oezyener2001">(<a href="#ref-Barstow1994" role="doc-biblioref">Barstow, 1994</a>; <a href="#ref-Oezyener2001" role="doc-biblioref">Özyener et al., 2001</a>)</span>. Im Folgenden wird diese Hauptkomponente mit dem Index “fast” gekennzeichnet.</p>
<section id="biexponentielle-dotvo_2-modellfunktion" class="level3 unnumbered unlisted">
<h3 class="unnumbered unlisted anchored" data-anchor-id="biexponentielle-dotvo_2-modellfunktion">Biexponentielle <span class="math inline">\(\dot{V}O_{2}\)</span>-Modellfunktion</h3>
<p>Phase 2 und 3 des 3-Phasen-Modells lassen sich mit Hilfe der <a href="#eq-VO2_Start" class="quarto-xref">Gleichung&nbsp;6</a> modellieren:</p>
<p><span class="math display">\[
\dot{V}O_2\,(t) = \dot{V}O_{2,\text{fast}} \cdot \left(1 - e^{-\frac{t_s - t_\text{delay, fast}}{\tau_\text{fast}}}\right) +
\dot{V}O_{2,\text{slow}} \cdot \left(1 - e^{-\frac{t_s - t_\text{delay,slow}}{\tau_\text{slow}}}\right) +
\dot{V}O_{2,\text{Start}}
\]</span></p>
<p><span class="math inline">\(\dot{V}O_{2,\text{fast}}\)</span> repräsentiert die Amplitude der Hauptkomponente, während <span class="math inline">\(\dot{V}O_{2,\text{slow}}\)</span> die Amplitude der slow component beschreibt. Die Zeitkonstanten <span class="math inline">\(\tau_\text{fast}\)</span> und <span class="math inline">\(\tau_\text{slow}\)</span> steuern die Geschwindigkeit der jeweiligen Reaktionsprozesse, wobei die Zeitverzögerungen <span class="math inline">\(t_\text{delay, fast}\)</span> und <span class="math inline">\(t_\text{delay, slow}\)</span> den Beginn dieser Prozesse bestimmen. <span class="math inline">\(\dot{V}O_{2,\text{Start}}\)</span> beschreibt den Sauerstoffvolumenstrom zu Beginn der Belastung.</p>
<p>In der folgenden Shiny-App wird die Modellanpassung der Gleichung <a href="#eq-VO2_Start" class="quarto-xref">Gleichung&nbsp;6</a> an Beispieldaten demonstriert. Eigene <span class="math inline">\(\dot{V}O_{2}(t)\)</span>-Daten können hochgeladen und mittels nichtlinearer Regression an die Modellparameter angepasst werden.</p>
<section id="biexponentielle-dotvo_2-shiny-app" class="level4 unnumbered unlisted">
<h4 class="unnumbered unlisted anchored" data-anchor-id="biexponentielle-dotvo_2-shiny-app">Biexponentielle <span class="math inline">\(\dot{V}O_{2}\)</span>-Shiny-App</h4>
<pre class="shinylive-r" data-engine="r"><code>#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| viewerHeight: 900
library(shiny)
library(plotly)
library(minpack.lm)
library(dplyr)
library(shinyjs)

# Beispieldaten
t_data &lt;- c(0.0, 2.7, 5.3, 8.3, 11.5, 13.6, 15.4, 17.1, 19.8, 21.1, 22.3, 23.5, 24.9, 27.5, 30.9, 32.4, 35.0, 38.3, 39.7, 41.6, 43.7, 45.3, 46.8, 49.8, 52.0, 53.6, 55.5, 57.5, 59.0, 60.7, 62.4, 64.4, 66.6, 68.1, 69.8, 71.4, 73.3, 75.0, 76.7, 78.4, 80.0, 82.2, 83.9, 85.4, 87.3, 88.8, 90.6, 92.0, 93.6, 94.8, 96.3, 97.9, 99.5, 101.1, 102.7, 104.3, 106.0, 107.7, 109.3, 110.9, 112.5, 114.8, 116.4, 118.1, 119.7, 121.3, 122.8, 124.3, 125.9, 127.4, 128.9, 130.6, 132.1, 133.6, 135.6, 137.1, 138.6, 140.1, 141.6, 143.1, 144.4, 145.8, 147.2, 148.4, 149.9, 151.6, 153.1, 154.7, 156.1, 157.4, 158.7, 160.5, 161.9, 163.3, 164.7, 166.2, 167.6, 169.1, 172.6, 173.9, 175.4, 176.7, 178.1, 179.6, 181.0, 182.4, 183.8, 185.3, 186.7, 188.2, 189.6, 191.0, 192.4, 193.8, 195.2, 196.6, 198.0, 199.3, 200.7, 202.0, 203.3, 204.7, 206.1, 207.5, 208.8, 210.2, 211.6, 213.0, 214.3, 215.7, 217.1, 218.4, 219.8, 221.1, 222.4, 223.7, 225.0, 226.3, 227.7, 229.0, 230.5, 231.9, 233.1, 234.4)
VO2_data &lt;- c(0.823, 0.898, 0.966, 1.122, 1.281, 1.313, 1.463, 1.537, 1.602, 1.595, 1.598, 1.674, 1.923, 2.168, 2.439, 2.670, 2.797, 2.712, 2.688, 2.968, 3.228, 3.371, 3.673, 3.938, 4.076, 3.959, 3.886, 3.880, 3.928, 3.962, 4.173, 4.381, 4.268, 4.208, 4.234, 4.132, 4.109, 4.192, 4.304, 4.493, 4.352, 4.349, 4.332, 4.346, 4.345, 4.373, 4.320, 4.286, 4.353, 4.346, 4.287, 4.322, 4.250, 4.332, 4.257, 4.161, 4.120, 4.144, 4.115, 4.158, 4.186, 4.206, 4.220, 4.259, 4.291, 4.279, 4.295, 4.339, 4.371, 4.425, 4.448, 4.474, 4.517, 4.536, 4.544, 4.528, 4.432, 4.371, 4.367, 4.430, 4.492, 4.535, 4.510, 4.433, 4.399, 4.305, 4.308, 4.304, 4.366, 4.434, 4.501, 4.535, 4.512, 4.463, 4.509, 4.529, 4.586, 4.624, 4.740, 4.769, 4.788, 4.794, 4.824, 4.830, 4.888, 4.887, 4.915, 4.924, 4.955, 4.965, 4.982, 4.992, 5.016, 5.024, 5.033, 5.066, 5.081, 5.053, 5.035, 4.997, 5.018, 5.038, 5.035, 5.039, 4.970, 4.970, 4.973, 4.964, 4.945, 4.953, 4.974, 4.984, 4.997, 4.995, 4.946, 4.997, 5.014, 5.092, 5.072, 5.111, 5.088, 5.065, 5.061, 5.038)

# UI
ui &lt;- fluidPage(
  useShinyjs(),
  titlePanel("Bi-exponentielle V̇O2-Modellfunktion"),
  fluidRow(
    column(3,
           style = "height: 90vh; overflow-y: auto;",
           
           tags$h4(tags$strong("Modellparameter:")),
           sliderInput("VO2", "V̇O2_fast", min = 0.0, max = 7.0, value = 3.7, step = 0.01),
           sliderInput("tau_fast", "Tau_fast", min = 10, max = 120, value = 45, step = 0.1),
           sliderInput("VO2_Start", "V̇O2_Start", min = 0.0, max = 4.0, value = 0.8, step = 0.01),
           sliderInput("VO2_Ruhe", "V̇O2_Ruhe", min = 0, max = 1, value = 0.4, step = 0.1),
           sliderInput("time_delay", "Zeitverzögerung_fast", min = 0, max = 600, value = 0, step = 1),
           sliderInput("VO2_slow", "V̇O2_slow", min = 0.0, max = 1.0, value = 0.3, step = 0.01),
           sliderInput("tau_slow", "Tau_slow", min = 90, max = 600, value = 110, step = 0.1),
           sliderInput("time_delay_slow", "Zeitverzögerung_slow", min = 0, max = 1200, value = 160, step = 1),
           conditionalPanel(
             condition = "output.showFitSlider",
             sliderInput("nlsLM_end", "nlsLM Ende", min = 10, max = 300, value = 300, step = 1)
           ),
           actionButton("toggle_data", "Beispieldaten einfügen"),
           br(), br(),
           fileInput("file_upload", "CSV-Datei hochladen", accept = ".csv"),
           tags$h4(tags$strong("Modellanpassung:")),
           actionButton("fit_fast", "1. Fit: Schnelle Komponente"),br(),
           actionButton("fit_slow", "2. Fit: Langsame Komponente &amp; Verfeinerung"),br(),
           actionButton("fit_optimize", "3. Fit: Optimierung")
    ),
    mainPanel(
      width = 9,
      plotlyOutput("plot"),
      uiOutput("instructions")
    )
  )
)

# Server
server &lt;- function(input, output, session) {
  show_data &lt;- reactiveVal(FALSE)
  uploaded_data &lt;- reactiveVal(NULL)
  current_data &lt;- reactiveVal(NULL)
  current_r_squared &lt;- reactiveVal(NA)
  
  calculate_r_squared &lt;- function(observed, predicted) {
    ss_res &lt;- sum((observed - predicted)^2, na.rm = TRUE)
    ss_tot &lt;- sum((observed - mean(observed, na.rm = TRUE))^2, na.rm = TRUE)
    return(1 - (ss_res / ss_tot))
  }
  
  observeEvent(input$toggle_data, {
    show_data(!show_data())
    if (show_data()) {
      current_data(data.frame(t_s = t_data, VO2_t = VO2_data))
    } else {
      current_data(NULL)
    }
  })
  
  observeEvent(input$file_upload, {
    req(input$file_upload)
    df &lt;- read.csv(input$file_upload$datapath)
    if ("t_s" %in% names(df) &amp;&amp; "VO2_t" %in% names(df)) {
      uploaded_data(df)
      current_data(df)
      show_data(TRUE)
    } else {
      showModal(modalDialog(
        title = "Invalid CSV",
        "Die csv-Datei muss 't_s' und 'VO2_t' als Spaltennamen beinhalten.",
        easyClose = TRUE,
        footer = NULL
      ))
    }
  })
  
  observe({
    req(input$VO2_Start, input$VO2_Ruhe)
    if (input$VO2_Start &lt; input$VO2_Ruhe) {
      updateSliderInput(session, "VO2_Start", value = input$VO2_Ruhe)
    }
  })
  
  # Hilfsfunktion zur Bestimmung des nächstgelegenen VO2-Wertes
  find_nearest_VO2 &lt;- function(data, t_delay) {
    req(data, t_delay)
    if (nrow(data) == 0) return(NA)
    
    index &lt;- which.min(abs(data$t_s - t_delay))
    return(data$VO2_t[index])
  }
  
  
  observeEvent(input$fit_fast, {
    req(current_data())
    Beispieldaten &lt;- current_data()
    
    t_delay &lt;- isolate(input$time_delay)
    
    # Bestimme den nächstgelegenen VO2-Wert als VO2_Start
    VO2_Start &lt;- find_nearest_VO2(Beispieldaten, t_delay)
    
    # Aktualisiere den VO2_Start Slider
    updateSliderInput(session, "VO2_Start", value = VO2_Start)
    
    data_subset &lt;- Beispieldaten[Beispieldaten$t_s &gt;= t_delay, ]
    
    best_fit &lt;- NULL
    best_rss &lt;- Inf
    
    withProgress(message = 'Fitting in progress', value = 0, {
      for (i in 1:100) {
        # Randomisierte Startwerte innerhalb der Slider-Grenzen
        VO2_start &lt;- runif(1, 0.5, 7.0)
        tau_fast_start &lt;- runif(1, 10, 120)
        
        start_values &lt;- list(
          VO2 = VO2_start,
          tau_fast = tau_fast_start
        )
        
        fit &lt;- try(nlsLM(VO2_t ~ VO2 * (1 - exp(-(t_s - t_delay) / tau_fast)) + VO2_Start,
                         data = data_subset,
                         start = start_values,
                         lower = c(VO2 = 0.5, tau_fast = 10),
                         upper = c(VO2 = 7.0, tau_fast = 120),
                         control = nls.control(maxiter = 1024)), silent = TRUE)
        
        if (!inherits(fit, "try-error")) {
          rss &lt;- sum(residuals(fit)^2)
          if (rss &lt; best_rss) {
            best_rss &lt;- rss
            best_fit &lt;- fit
          }
        }
        
        incProgress(1/100, detail = paste("Iteration", i))
      }
    })
    
    if (!is.null(best_fit)) {
      params &lt;- as.list(coef(best_fit))
      updateSliderInput(session, "VO2", value = params$VO2)
      updateSliderInput(session, "tau_fast", value = params$tau_fast)
      updateSliderInput(session, "VO2_slow", value = 0)
      updateSliderInput(session, "tau_slow", value = 0)
      
      predicted &lt;- VO2_Start + params$VO2 * (1 - exp(-(data_subset$t_s - t_delay) / params$tau_fast))
      r_squared &lt;- calculate_r_squared(data_subset$VO2_t, predicted)
      current_r_squared(r_squared)
      
      showNotification(sprintf("Schritt 1 erfolgreich. R²: %.3f", r_squared), type = "message")
    } else {
      showModal(modalDialog(
        title = "nlsLM fehlgeschlagen",
        "Die nicht-lineare Regression mittels Levenberg-Marquardt-Algorithmus konnte nicht erfolgreich durchgeführt werden.",
        easyClose = TRUE,
        footer = NULL
      ))
    }
  })
  
  observeEvent(input$fit_slow, {
    req(current_data())
    Beispieldaten &lt;- current_data()
    
    req(input$time_delay, input$VO2_Start, input$VO2, input$tau_fast)
    
    t_delay &lt;- input$time_delay
    VO2_Start &lt;- input$VO2_Start
    VO2 &lt;- input$VO2
    tau_fast &lt;- input$tau_fast
    
    # Setze VO2_slow und tau_slow auf die initialen Werte
    VO2_slow &lt;- 0.4
    tau_slow &lt;- 160
    
    data_subset &lt;- Beispieldaten[Beispieldaten$t_s &gt;= t_delay, ]
    
    # Berechne die obere Grenze für t_delay_slow
    t_delay_slow_upper &lt;- max(Beispieldaten$t_s)
    
    best_fit &lt;- NULL
    best_rss &lt;- Inf
    best_t_delay_slow &lt;- NULL
    best_VO2_fast &lt;- VO2
    best_tau_fast &lt;- tau_fast
    best_VO2_slow &lt;- VO2_slow
    best_tau_slow &lt;- tau_slow
    
    # Berechne die Anzahl der Iterationen für t_delay_slow
    num_iterations &lt;- floor(t_delay_slow_upper - (tau_fast + t_delay)) + 1
    
    withProgress(message = 'Fitting in progress', value = 0, {
      for (i in 1:num_iterations) {
        t_delay_slow &lt;- tau_fast + t_delay + i - 1
        
        # Fit VO2_fast und tau_fast nach unten
        current_VO2_fast &lt;- best_VO2_fast
        current_tau_fast &lt;- best_tau_fast
        current_VO2_slow &lt;- best_VO2_slow
        current_tau_slow &lt;- best_tau_slow
        
        model &lt;- function(VO2_fast, tau_fast, VO2_slow, tau_slow, t_delay_slow) {
          VO2_fast * (1 - exp(-(data_subset$t_s - t_delay) / tau_fast)) + 
            VO2_slow * (1 - exp(-(pmax(data_subset$t_s - t_delay_slow, 0)) / tau_slow)) + 
            VO2_Start
        }
        
        current_rss &lt;- sum((data_subset$VO2_t - model(current_VO2_fast, current_tau_fast, current_VO2_slow, current_tau_slow, t_delay_slow))^2)
        
        # Optimiere VO2_fast und tau_fast
        while (TRUE) {
          improved &lt;- FALSE
          
          # Versuche VO2_fast zu reduzieren
          if (current_VO2_fast &gt; 0.1) {
            new_VO2_fast &lt;- max(0.1, current_VO2_fast - 0.01)
            new_rss &lt;- sum((data_subset$VO2_t - model(new_VO2_fast, current_tau_fast, current_VO2_slow, current_tau_slow, t_delay_slow))^2)
            if (new_rss &lt; current_rss) {
              current_VO2_fast &lt;- new_VO2_fast
              current_rss &lt;- new_rss
              improved &lt;- TRUE
            }
          }
          
          # Versuche tau_fast zu reduzieren
          if (current_tau_fast &gt; 10) {
            new_tau_fast &lt;- max(10, current_tau_fast - 0.1)
            new_rss &lt;- sum((data_subset$VO2_t - model(current_VO2_fast, new_tau_fast, current_VO2_slow, current_tau_slow, t_delay_slow))^2)
            if (new_rss &lt; current_rss) {
              current_tau_fast &lt;- new_tau_fast
              current_rss &lt;- new_rss
              improved &lt;- TRUE
            }
          }
          
          if (!improved) break
        }
        
        # Optimiere VO2_slow und tau_slow
        # Zuerst nach unten
        while (TRUE) {
          improved &lt;- FALSE
          
          # Versuche VO2_slow zu reduzieren
          if (current_VO2_slow &gt; 0.05) {
            new_VO2_slow &lt;- max(0.05, current_VO2_slow - 0.01)
            new_rss &lt;- sum((data_subset$VO2_t - model(current_VO2_fast, current_tau_fast, new_VO2_slow, current_tau_slow, t_delay_slow))^2)
            if (new_rss &lt; current_rss) {
              current_VO2_slow &lt;- new_VO2_slow
              current_rss &lt;- new_rss
              improved &lt;- TRUE
            }
          }
          
          # Versuche tau_slow zu reduzieren
          if (current_tau_slow &gt; 90) {
            new_tau_slow &lt;- max(90, current_tau_slow - 0.1)
            new_rss &lt;- sum((data_subset$VO2_t - model(current_VO2_fast, current_tau_fast, current_VO2_slow, new_tau_slow, t_delay_slow))^2)
            if (new_rss &lt; current_rss) {
              current_tau_slow &lt;- new_tau_slow
              current_rss &lt;- new_rss
              improved &lt;- TRUE
            }
          }
          
          if (!improved) break
        }
        
        # Dann nach oben
        while (TRUE) {
          improved &lt;- FALSE
          
          # Versuche VO2_slow zu erhöhen
          if (current_VO2_slow &lt; 1.0) {  # Angenommen, 1.0 ist die obere Grenze für VO2_slow
            new_VO2_slow &lt;- min(1.0, current_VO2_slow + 0.01)
            new_rss &lt;- sum((data_subset$VO2_t - model(current_VO2_fast, current_tau_fast, new_VO2_slow, current_tau_slow, t_delay_slow))^2)
            if (new_rss &lt; current_rss) {
              current_VO2_slow &lt;- new_VO2_slow
              current_rss &lt;- new_rss
              improved &lt;- TRUE
            }
          }
          
          # Versuche tau_slow zu erhöhen
          new_tau_slow &lt;- current_tau_slow + 0.1
          new_rss &lt;- sum((data_subset$VO2_t - model(current_VO2_fast, current_tau_fast, current_VO2_slow, new_tau_slow, t_delay_slow))^2)
          if (new_rss &lt; current_rss) {
            current_tau_slow &lt;- new_tau_slow
            current_rss &lt;- new_rss
            improved &lt;- TRUE
          }
          
          if (!improved) break
        }
        
        if (current_rss &lt; best_rss) {
          best_rss &lt;- current_rss
          best_t_delay_slow &lt;- t_delay_slow
          best_VO2_fast &lt;- current_VO2_fast
          best_tau_fast &lt;- current_tau_fast
          best_VO2_slow &lt;- current_VO2_slow
          best_tau_slow &lt;- current_tau_slow
        }
        
        incProgress(1 / num_iterations, detail = paste("Iteration", i, "von", num_iterations))
      }
    })
    
    if (!is.null(best_t_delay_slow)) {
      updateSliderInput(session, "time_delay_slow", value = best_t_delay_slow)
      updateSliderInput(session, "VO2", value = best_VO2_fast)
      updateSliderInput(session, "tau_fast", value = best_tau_fast)
      updateSliderInput(session, "VO2_slow", value = best_VO2_slow)
      updateSliderInput(session, "tau_slow", value = best_tau_slow)
      
      predicted &lt;- VO2_Start + best_VO2_fast * (1 - exp(-(data_subset$t_s - t_delay) / best_tau_fast)) +
        best_VO2_slow * (1 - exp(-(pmax(data_subset$t_s - best_t_delay_slow, 0)) / best_tau_slow))
      r_squared &lt;- calculate_r_squared(data_subset$VO2_t, predicted)
      current_r_squared(r_squared)
      
      showNotification(sprintf("Schritt 2 erfolgreich. R²: %.3f", r_squared), type = "message")
    } else {
      showModal(modalDialog(
        title = "Fit fehlgeschlagen",
        "Die Anpassung für die langsame Komponente konnte nicht erfolgreich durchgeführt werden.",
        easyClose = TRUE,
        footer = NULL
      ))
    }
  })
  
  observeEvent(input$fit_optimize, {
    req(current_data())
    Beispieldaten &lt;- current_data()
    
    req(input$time_delay, input$VO2_Start, input$VO2, input$tau_fast, input$VO2_slow, input$tau_slow, input$time_delay_slow)
    
    t_delay &lt;- input$time_delay
    VO2_Start &lt;- input$VO2_Start
    
    data_subset &lt;- Beispieldaten[Beispieldaten$t_s &gt;= t_delay, ]
    
    # Werte aus Schritt 2
    VO2_step2 &lt;- input$VO2
    tau_fast_step2 &lt;- input$tau_fast
    VO2_slow_step2 &lt;- input$VO2_slow
    tau_slow_step2 &lt;- input$tau_slow
    t_delay_slow_step2 &lt;- input$time_delay_slow
    
    # Berechne R² für Schritt 2
    step2_predicted &lt;- VO2_Start + VO2_step2 * (1 - exp(-(data_subset$t_s - t_delay) / tau_fast_step2)) +
      VO2_slow_step2 * (1 - exp(-(pmax(data_subset$t_s - t_delay_slow_step2, 0)) / tau_slow_step2))
    step2_r_squared &lt;- calculate_r_squared(data_subset$VO2_t, step2_predicted)
    
    best_fit &lt;- NULL
    best_rss &lt;- Inf
    
    withProgress(message = 'Optimierung läuft', value = 0, {
      for (i in 1:1000) {
        # Randomisierte Startwerte innerhalb der festgelegten Grenzen
        VO2_start &lt;- runif(1, VO2_step2 * 0.98, VO2_step2 * 1.02)
        tau_fast_start &lt;- runif(1, max(10, tau_fast_step2 - 3), tau_fast_step2 + 3)
        VO2_slow_start &lt;- runif(1, VO2_slow_step2 * 0.98, VO2_slow_step2 * 1.02)
        tau_slow_start &lt;- runif(1, max(90, tau_slow_step2 - 3), tau_slow_step2 + 3)
        t_delay_slow_start &lt;- runif(1, max(0, t_delay_slow_step2 - 5), t_delay_slow_step2 + 5)
        
        start_values &lt;- list(
          VO2 = VO2_start,
          tau_fast = tau_fast_start,
          VO2_slow = VO2_slow_start,
          tau_slow = tau_slow_start,
          t_delay_slow = t_delay_slow_start
        )
        
        fit &lt;- try(nlsLM(VO2_t ~ VO2 * (1 - exp(-(t_s - t_delay) / tau_fast)) + 
                           VO2_slow * (1 - exp(-(t_s - t_delay_slow) / tau_slow)) + VO2_Start,
                         data = data_subset,
                         start = start_values,
                         lower = c(VO2 = VO2_step2 * 0.98, 
                                   tau_fast = max(10, tau_fast_step2 - 3), 
                                   VO2_slow = VO2_slow_step2 * 0.98, 
                                   tau_slow = max(90, tau_slow_step2 - 3), 
                                   t_delay_slow = max(0, t_delay_slow_step2 - 5)),
                         upper = c(VO2 = VO2_step2 * 1.02, 
                                   tau_fast = tau_fast_step2 + 3, 
                                   VO2_slow = VO2_slow_step2 * 1.02, 
                                   tau_slow = tau_slow_step2 + 3, 
                                   t_delay_slow = t_delay_slow_step2 + 5),
                         control = nls.control(maxiter = 1024)), silent = TRUE)
        
        if (!inherits(fit, "try-error")) {
          rss &lt;- sum(residuals(fit)^2)
          if (rss &lt; best_rss) {
            best_rss &lt;- rss
            best_fit &lt;- fit
          }
        }
        
        incProgress(1/1000, detail = paste("Iteration", i))
      }
    })
    
    if (!is.null(best_fit)) {
      params &lt;- as.list(coef(best_fit))
      step3_predicted &lt;- VO2_Start + params$VO2 * (1 - exp(-(data_subset$t_s - t_delay) / params$tau_fast)) +
        params$VO2_slow * (1 - exp(-(pmax(data_subset$t_s - params$t_delay_slow, 0)) / params$tau_slow))
      step3_r_squared &lt;- calculate_r_squared(data_subset$VO2_t, step3_predicted)
      
      if (step3_r_squared &gt; step2_r_squared) {
        updateSliderInput(session, "VO2", value = params$VO2)
        updateSliderInput(session, "tau_fast", value = params$tau_fast)
        updateSliderInput(session, "VO2_slow", value = params$VO2_slow)
        updateSliderInput(session, "tau_slow", value = params$tau_slow)
        updateSliderInput(session, "time_delay_slow", value = params$t_delay_slow)
        
        current_r_squared(step3_r_squared)
        showNotification(sprintf("Optimierung erfolgreich. Neues R²: %.3f", step3_r_squared), type = "message")
      } else {
        current_r_squared(step2_r_squared)
        showNotification(sprintf("Kein besserer Fit gefunden. Ergebnisse von Schritt 2 beibehalten. R²: %.3f", step2_r_squared), type = "warning")
      }
    } else {
      current_r_squared(step2_r_squared)
      showNotification(sprintf("Optimierung fehlgeschlagen. Ergebnisse von Schritt 2 beibehalten. R²: %.3f", step2_r_squared), type = "warning")
    }
  })
  
  output$plot &lt;- renderPlotly({
    req(input$VO2, input$tau_fast, input$VO2_slow, input$tau_slow, input$VO2_Start, input$time_delay, input$time_delay_slow, input$VO2_Ruhe)
    
    VO2 &lt;- input$VO2
    tau_fast &lt;- input$tau_fast
    VO2_slow &lt;- input$VO2_slow
    tau_slow &lt;- input$tau_slow
    VO2_Start &lt;- input$VO2_Start
    t_delay &lt;- input$time_delay
    t_delay_slow &lt;- input$time_delay_slow
    VO2_Ruhe &lt;- input$VO2_Ruhe
    
    model_function &lt;- function(t_s, VO2, tau_fast, VO2_slow, tau_slow, VO2_Start, t_delay, t_delay_slow) {
      VO2 * (1 - exp(-(pmax(t_s - t_delay, 0)) / tau_fast)) + 
        pmax(VO2_slow * (1 - exp(-(pmax(t_s - t_delay_slow, 0)) / tau_slow)), 0) + 
        VO2_Start
    }
    
    model_fast &lt;- function(t_s, VO2, tau_fast, t_delay) {
      VO2 * (1 - exp(-(pmax(t_s - t_delay, 0)) / tau_fast))
    }
    
    model_slow &lt;- function(t_s, VO2_slow, tau_slow, t_delay_slow) {
      pmax(VO2_slow * (1 - exp(-(pmax(t_s - t_delay_slow, 0)) / tau_slow)), 0)
    }
    
    Beispieldaten &lt;- current_data()
    
    max_t &lt;- if (!is.null(Beispieldaten) &amp;&amp; nrow(Beispieldaten) &gt; 0) max(Beispieldaten$t_s, na.rm = TRUE) else 300
    max_x &lt;- max_t * 1.20
    t_s &lt;- seq(0, max_x * 1.20, by = 1)
    
    model_values &lt;- ifelse(t_s &gt;= t_delay, model_function(t_s, VO2, tau_fast, VO2_slow, tau_slow, VO2_Start, t_delay, t_delay_slow), NA)
    fast_values &lt;- ifelse(t_s &gt;= t_delay, model_fast(t_s, VO2, tau_fast, t_delay), NA)
    slow_values &lt;- ifelse(t_s &gt;= t_delay_slow, model_slow(t_s, VO2_slow, tau_slow, t_delay_slow), NA)
    
    max_y &lt;- if (!is.null(Beispieldaten) &amp;&amp; nrow(Beispieldaten) &gt; 0) max(Beispieldaten$VO2_t, na.rm = TRUE) * 1.05 else max(model_values, na.rm = TRUE) * 1.05
    
    eq_text &lt;- sprintf("V̇O₂ (t) = %.2f * (1 - e&lt;sup&gt;-(t - %.0f) / %.1f&lt;/sup&gt;) + %.2f * (1 - e&lt;sup&gt;-(t - %.1f) / %.0f&lt;/sup&gt;) + %.2f",
                       VO2, t_delay, tau_fast, VO2_slow, t_delay_slow, tau_slow, VO2_Start)
    t_halb &lt;- tau_fast * log(2)
    
    shapes &lt;- list(
      list(
        type = "line", x0 = t_delay, x1 = t_delay, y0 = 0, y1 = max_y * 1.5,
        line = list(color = "gray", width = 1, dash = "dash")
      ),
      list(
        type = "line", x0 = t_delay_slow, x1 = t_delay_slow, y0 = 0, y1 = max_y * 1.5,
        line = list(color = "gray", width = 1, dash = "dash")
      )
    )
    
    p &lt;- plot_ly() %&gt;%
      add_trace(x = ~t_s, y = ~model_values, type = 'scatter', mode = 'lines',
                name = 'V̇O2-Modellfunktion', line = list(color = '#EF6F6A')) %&gt;%
      add_trace(x = ~t_s, y = ~fast_values, type = 'scatter', mode = 'lines', 
                name = 'V̇O&lt;sub&gt;2&lt;/sub&gt;&lt;sub&gt;,fast&lt;/sub&gt;', line = list(color = '#42BA97')) %&gt;%
      add_trace(x = ~t_s, y = ~slow_values, type = 'scatter', mode = 'lines', 
                name = 'V̇O&lt;sub&gt;2&lt;/sub&gt;&lt;sub&gt;,slow&lt;/sub&gt;', line = list(color = '#BB7693')) %&gt;%
      layout(title = "Biexponentielle V̇O&lt;sub&gt;2&lt;/sub&gt;-Modellfunktion",
             margin = list(t = 40),
             xaxis = list(title = "t [s]", range = c(0, max_x)),
             yaxis = list(title = "V̇O&lt;sub&gt;2&lt;/sub&gt; (t) [l·min&lt;sup&gt;-1&lt;/sup&gt;]", tickformat = ".1f"),
             legend = list(
               x = 0.05,
               y = 0.99,
               xanchor = "left",
               yanchor = "top",
               bgcolor = "rgba(255, 255, 255, 0.3)",
               bordercolor = "rgba(0,0,0,0)",
               borderwidth = 0
             ),
             shapes = shapes,
             annotations = list(
               list(
                 x = max_x * 0.35,
                 y = max_y * 0.3,
                 text = eq_text,
                 showarrow = FALSE,
                 xanchor = 'left',
                 yanchor = 'bottom',
                 font = list(
                   family = "Arial, sans-serif",
                   size = 10,
                   color = "black"
                 )
               ),
               list(
                 x = max_x * 0.35,
                 y = max_y * 0.2,
                 text = paste("T&lt;sub&gt;1/2&lt;/sub&gt;:", round(t_halb, 1)," s"),
                 showarrow = FALSE,
                 xanchor = 'left',
                 yanchor = 'bottom',
                 font = list(
                   family = "Arial, sans-serif",
                   size = 10,
                   color = "black"
                 )
               ),
               list(
                 x = t_delay, y = max_y * 0.85, text = sprintf("t&lt;sub&gt;delay&lt;/sub&gt;: %.1f s", t_delay), showarrow = FALSE, xanchor = "left", yanchor = "bottom",
                 textangle = -90, font = list(size = 11)
               ),
               list(
                 x = t_delay_slow, y = max_y * 0.85, text = sprintf("t&lt;sub&gt;delay_slow&lt;/sub&gt;: %.1f s", t_delay_slow), showarrow = FALSE, xanchor = "left", yanchor = "bottom",
                 textangle = -90, font = list(size = 11)
               )
             )) %&gt;%
      add_trace(x = ~t_s, y = ~rep(VO2_Ruhe, length(t_s)), type = 'scatter', mode = 'lines',
                name = 'V̇O&lt;sub&gt;2,Ruhe&lt;/sub&gt;', line = list(color = '#1CADE4'))
    
    if (show_data() &amp;&amp; !is.null(Beispieldaten) &amp;&amp; nrow(Beispieldaten) &gt; 0) {
      data_subset &lt;- Beispieldaten[Beispieldaten$t_s &gt;= t_delay, ]
      
      model_values_at_data &lt;- model_function(data_subset$t_s, VO2, tau_fast, VO2_slow, tau_slow, VO2_Start, t_delay, t_delay_slow)
      
      r_squared &lt;- calculate_r_squared(data_subset$VO2_t, model_values_at_data)
      current_r_squared(r_squared)
      
      current_r_squared(r_squared)  # Aktualisieren Sie die reaktive Variable
      
      p &lt;- p %&gt;%
        add_trace(data = Beispieldaten, x = ~t_s, y = ~VO2_t, type = 'scatter', mode = 'markers+lines',
                  name = 'V̇O&lt;sub&gt;2&lt;/sub&gt;', 
                  marker = list(color = 'rgba(38, 131, 198, 0.9)', size = 5.0),
                  line = list(color = 'rgba(38, 131, 198, 1.0)', width = 0.65, dash = '4 4'))
      
      p$x$layout$annotations &lt;- c(p$x$layout$annotations,
                                  list(
                                    list(
                                      x = max_x * 0.35,
                                      y = max_y * 0.10,
                                      text = sprintf("R²: %.3f", current_r_squared()),
                                      showarrow = FALSE,
                                      xanchor = 'left',
                                      yanchor = 'bottom',
                                      font = list(
                                        family = "Arial, sans-serif",
                                        size = 10,
                                        color = "black"
                                      )
                                    )
                                  ))
    }
    
    p
  })
  output$instructions &lt;- renderUI({
    HTML(
      "&lt;div style='margin-top: 20px; padding: 10px; background-color: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; width: fit-content;'&gt;
      &lt;h4 style='color: #333;'&gt;&lt;strong&gt;Anleitung - Modellanpassung:&lt;/strong&gt;&lt;/h4&gt;
      &lt;ol style='color: #555; list-style-position: outside; padding-left: 20px;'&gt;
        &lt;li&gt;Beispiel-VO2-Daten einfügen oder eigene VO2-Daten als CSV-Datei hochladen.&lt;/li&gt;
        &lt;li&gt;Zeitverzögerung_fast festlegen, um den Startpunkt der Modellanpassung zu bestimmen.&lt;/li&gt;
        &lt;li&gt;Schrittweise die Modellanpassung durchführen:
          &lt;ol&gt;
            &lt;li&gt;Fit: Schnelle Komponente&lt;/li&gt;
            &lt;li&gt;Fit: Langsame Komponente Verfeinerung&lt;/li&gt;
            &lt;li&gt;Fit: Optimierung&lt;/li&gt;
          &lt;/ol&gt;
        &lt;/li&gt;
        &lt;li&gt;Alternative: Manuelle Anpassung der Modellparameter über die Schieberegler.&lt;/li&gt;
      &lt;/ol&gt;
      &lt;div style='margin-top: 20px;'&gt;&lt;/div&gt;
      &lt;pre style='background-color: #f8f8f8; padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: fit-content;'&gt;
VO2-Daten können als CSV-Datei im folgenden Format hochgeladen werden:
t_s,VO2_t
0.0,0.479
1.0,0.459
2.3,0.488
…
      &lt;/pre&gt;
    &lt;/div&gt;"
    )
  })
}

# App ausführen
shinyApp(ui = ui, server = server)</code></pre>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modellanpassung - Details:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>1. Schnelle Komponente (1. Fit):</strong></p>
<ul>
<li>Verwendete Funktion: nlsLM</li>
<li>Parameter: V̇O2_fast, tau_fast</li>
<li>Grenzen:
<ul>
<li>V̇O2_fast: <em>0.5 bis 7.0 l/min</em></li>
<li>tau_fast: <em>10 bis 120 s</em></li>
</ul></li>
<li>Prozess: <em>100 Iterationen</em> mit zufälligen Startwerten</li>
<li>Optimierung: Minimierung der Residuenquadratsumme (RSS)</li>
</ul>
<p><strong>2. Langsame Komponente &amp; Verfeinerung (2. Fit):</strong></p>
<ul>
<li>Parameter: V̇O2_fast, tau_fast, V̇O2_slow, tau_slow, t_delay_slow</li>
<li>Initiale Werte (basierend auf Ozyener et al., 2001):
<ul>
<li>V̇O2_slow: <em>0.4 l/min</em></li>
<li>tau_slow: <em>160 s</em></li>
</ul></li>
<li>Grenzen:
<ul>
<li>V̇O2_slow: <em>0.05 bis 1.0 l/min</em></li>
<li>tau_slow: <em>90 bis Unendlich s</em></li>
<li>t_delay_slow: <em>tau_fast + t_delay bis max(t_s)</em></li>
</ul></li>
<li>Prozess für t_delay_slow:
<ol type="a">
<li>Berechnung des Suchbereichs: von <em>(tau_fast + t_delay)</em> bis zum maximalen Zeitpunkt der Daten</li>
<li>Iteration durch jeden möglichen Wert in diesem Bereich (<em>1-Sekunden-Schritte</em>)</li>
<li>Für jeden t_delay_slow-Wert:
<ul>
<li>Berechnung der RSS mit festen Werten für V̇O2_slow (<em>0.4 l/min</em>) und tau_slow (<em>160 s</em>)</li>
</ul></li>
<li>Auswahl des t_delay_slow-Wertes mit der niedrigsten RSS</li>
</ol></li>
<li>Optimierung von V̇O2_fast und tau_fast:
<ol type="a">
<li>Schrittweise Reduzierung von V̇O2_fast (<em>0.01 l/min</em>) und tau_fast (<em>0.1 s</em>)</li>
<li>Bei jeder Änderung: Berechnung der neuen RSS</li>
<li>Akzeptanz der Änderung nur bei Verbesserung der RSS</li>
<li>Wiederholung bis keine Verbesserung mehr möglich</li>
</ol></li>
<li>Optimierung von V̇O2_slow und tau_slow:
<ol type="a">
<li>Zunächst Reduzierung: V̇O2_slow (<em>0.01 l/min</em>) und tau_slow (<em>0.1 s</em>)</li>
<li>Dann Erhöhung: V̇O2_slow (<em>0.01 l/min</em>) und tau_slow (<em>0.1 s</em>)</li>
<li>Bei jeder Änderung: Berechnung der neuen RSS</li>
<li>Akzeptanz der Änderung nur bei Verbesserung der RSS</li>
<li>Wiederholung jeder Richtung bis keine Verbesserung mehr möglich</li>
</ol></li>
</ul>
<p><strong>3. Optimierung (3. Fit):</strong></p>
<ul>
<li>Verwendete Funktion: nlsLM</li>
<li>Parameter: V̇O2_fast, tau_fast, V̇O2_slow, tau_slow, t_delay_slow</li>
<li>Grenzen: Basierend auf den Ergebnissen von Schritt 2
<ul>
<li>V̇O2_fast: <em>±2% des Wertes aus Schritt 2</em></li>
<li>tau_fast: <em>±3 s des Wertes aus Schritt 2 (Minimum 10 s)</em></li>
<li>V̇O2_slow: <em>±2% des Wertes aus Schritt 2</em></li>
<li>tau_slow: <em>±3 s des Wertes aus Schritt 2 (Minimum 90 s)</em></li>
<li>t_delay_slow: <em>±5 s des Wertes aus Schritt 2 (Minimum 0 s)</em></li>
</ul></li>
<li>Prozess: <em>1000 Iterationen</em> mit zufälligen Startwerten innerhalb der Grenzen</li>
<li>Optimierung: Minimierung der RSS</li>
</ul>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="methodik-umgang-mit-dotvo_2-daten-in-dieser-arbeit" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="methodik-umgang-mit-dotvo_2-daten-in-dieser-arbeit">Methodik: Umgang mit <span class="math inline">\(\dot{V}O_{2}\)</span>-Daten in dieser Arbeit</h2>
<p>In dieser Arbeit wurde der Anstieg des <span class="math inline">\(\dot{V}O_{2}\,(t)\)</span> nach Belastungsbeginn für jede Belastungsstufe wie folgt analysiert: Zunächst wurden aus den Atemzug-für-Atemzug <span class="math inline">\(\dot{V}O_{2}\)</span>-Daten die Ausreißer entfernt. Danach erfolgte eine Glättung der Daten mittels eines gleitenden 3-Atemzug-Durchschnitts, gefolgt von der Kurvenanpassung.<br> Vor der Kurvenanpassung wurde die Zeitverzögerung der Hauptkomponente des <span class="math inline">\(\dot{V}O_{2}\,(t)\)</span> grafisch so bestimmt, dass die Phase-I-Daten der kardiorespiratorischen Antwort nicht einbezogen wurden. Dies entsprach in der Regel dem von <span class="citation" data-cites="Bearden2000 Stirling2005">(<a href="#ref-Bearden2000" role="doc-biblioref">Bearden &amp; Moffatt, 2000</a>; <a href="#ref-Stirling2005" role="doc-biblioref">Stirling et al., 2005</a>)</span> beschriebenen Zeitraum von 10-25 Sekunden für Phase 1. Die Kurvenanpassung wurde anschließend mit <a href="#eq-VO2_Start" class="quarto-xref">Gleichung&nbsp;6</a> an die jeweiligen Daten durchgeführt. Die Modellparameter der Kurvenanpassung wurden wie folgt gewählt:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Parameter - Kurvenanpassung:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>Verwendete Funktion: nlsLM
<ul>
<li>Maximale Iterationen: <em>1024</em></li>
<li>Verwendung des Levenberg-Marquardt-Algorithmus</li>
</ul></li>
<li>Parameter: V̇O2 (Amplitude), Tau</li>
<li>Modell: V̇O2_t ~ V̇O2 · (1 - exp(-(t_s - t_delay) / Tau)) + V̇O2_Start</li>
<li>Grenzen:
<ul>
<li>V̇O2: <em>0.5 bis 7.0 l/min</em></li>
<li>Tau: <em>5 bis 360 s</em></li>
</ul></li>
<li>Optimierung: Minimierung der Residuenquadratsumme (RSS)</li>
</ul>
</div>
</div>
</div>
<p>Dies erfolgte für jedes Belastungsintervall mittels nichtlinearer Regression unter Verwendung des in <a href="#eq-VO2_Start" class="quarto-xref">Gleichung&nbsp;6</a> beschriebenen mono-exponentiellen 3-Parameter-Modells <span class="citation" data-cites="Francescato2003">(<a href="#ref-Francescato2003" role="doc-biblioref">Francescato et al., 2003</a>)</span>. Da die Probanden in den Erholungsphasen nicht vollständig ruhten, war der Sauerstoffvolumenstrom zu Beginn der Belastung (<span class="math inline">\(\dot{V}O_{2, Start}\)</span>) signifikant höher als <span class="math inline">\(\dot{V}O_{2,Ruhe}\)</span>. <span class="math inline">\(\dot{V}O_{2net, SS}\)</span> wurde als der Wert der Modellfunktion von <span class="math inline">\(\dot{V}O_{2gross, SS}\)</span> zum Zeitpunkt <span class="math inline">\(4 \cdot τ_{Start}\)</span> abzüglich <span class="math inline">\(\dot{V}O_{2,Ruhe}\)</span> bestimmt. Bis zum Zeitpunkt <span class="math inline">\(4 \cdot τ_{Start}\)</span> hat ungefähr 98,2 % des Anstiegs von <span class="math inline">\(\dot{V}O_{2, Belastung}(t)\)</span> stattgefunden. Daher wurde dieser Zeitpunkt näherungsweise als Steady-State (SS) Wert des Sauerstoffvolumenstroms während der Belastung festgelegt. Ein Modellierungsbeispiel ist in <a href="#fig-VO2_Start" class="quarto-xref">Abbildung&nbsp;4</a> zu sehen:</p>
<div id="fig-VO2_Start" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-VO2_Start-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="images/p_VO2_01_2.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Abbildung&nbsp;4: Modellierung der Sauerstoffkinetik während des Belastungstests 01_2 mit exponentieller Anpassungskurve"><img src="images/p_VO2_01_2.svg" width="1100" height="450" class="figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-VO2_Start-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4: Modellierung der Sauerstoffkinetik während des Belastungstests 01_2 mit exponentieller Anpassungskurve
</figcaption>
</figure>
</div>
</section>
<section id="quellenverzeichnis" class="level2">
<h2 class="anchored" data-anchor-id="quellenverzeichnis">Quellenverzeichnis</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-Barstow1994" class="csl-entry" role="listitem">
Barstow, T. J. (1994). <a href="https://www.ncbi.nlm.nih.gov/pubmed/7837952"><span>Characterization of VO2 kinetics during heavy exercise.</span></a> <em>Medicine and science in sports and exercise</em>, <em>26</em>(11), 1327–1334.
</div>
<div id="ref-Barstow1991" class="csl-entry" role="listitem">
Barstow, T. J., &amp; Mole, P. A. (1991). <span>Linear and nonlinear characteristics of oxygen uptake kinetics during heavy exercise</span>. <em>Journal of Applied Physiology</em>, <em>71</em>(6), 2099–2106. <a href="https://doi.org/10.1152/jappl.1991.71.6.2099">https://doi.org/10.1152/jappl.1991.71.6.2099</a>
</div>
<div id="ref-Bearden2000" class="csl-entry" role="listitem">
Bearden, S. E., &amp; Moffatt, R. J. (2000). <span>V̇O2 kinetics and the O2 deficit in heavy exercise</span>. <em>Journal of Applied Physiology</em>, <em>88</em>(4), 1407–1412. <a href="https://doi.org/10.1152/jappl.2000.88.4.1407">https://doi.org/10.1152/jappl.2000.88.4.1407</a>
</div>
<div id="ref-Ciba-Geigy1977" class="csl-entry" role="listitem">
Ciba-Geigy. (1977). <em><span>Wissenschaftliche Tabellen Geigy: Einheiten im Me<span>ß</span>wesen, K<span>ö</span>rperfl<span>ü</span>ssigkeiten, Organe, Energiehaushalt, Ern<span>ä</span>hrung</span></em> (8. Auflage, S. 290). CIBA-GEIGY AG.
</div>
<div id="ref-Clark2014" class="csl-entry" role="listitem">
Clark, C. (2014). <em><span>A detailed comparison of oxygen uptake kinetics at a range of exercise intensities</span></em> (phdthesis February; S. 150). Gloucestershire.
</div>
<div id="ref-Fick1855" class="csl-entry" role="listitem">
Fick, A. (1855). <span><span>Ü</span>ber Diffusion</span>. <em>Annalen der Physik</em>, <em>170</em>(1), 59–86. <a href="https://doi.org/10.1002/andp.18551700105">https://doi.org/10.1002/andp.18551700105</a>
</div>
<div id="ref-Francescato2003" class="csl-entry" role="listitem">
Francescato, M. P., Cettolo, V., &amp; Di Prampero, P. E. (2003). <span>Relationships between mechanical power, O2 consumption, O2 deficit and high-energy phosphates during calf exercise in humans</span>. <em>Pflugers Archiv European Journal of Physiology</em>, <em>445</em>(5), 622–628. <a href="https://doi.org/10.1007/s00424-002-0992-9">https://doi.org/10.1007/s00424-002-0992-9</a>
</div>
<div id="ref-Harris1918" class="csl-entry" role="listitem">
Harris, J. A., &amp; Benedict, F. G. (1918). <span>A Biometric Study of Human Basal Metabolism</span>. <em>Proceedings of the National Academy of Sciences of the United States of America</em>, <em>4</em>(12), 370–373. <a href="https://doi.org/10.1073/pnas.4.12.370">https://doi.org/10.1073/pnas.4.12.370</a>
</div>
<div id="ref-Henry1956" class="csl-entry" role="listitem">
Henry, F. M., &amp; DeMoor, J. C. (1956). <span>Lactic and alactic oxygen consumption in moderate exercise of graded intensity</span>. <em>Journal of applied physiology</em>, <em>8</em>(6), 608–614. <a href="https://doi.org/10.1152/jappl.1956.8.6.608">https://doi.org/10.1152/jappl.1956.8.6.608</a>
</div>
<div id="ref-Hill1924" class="csl-entry" role="listitem">
Hill, A. V., Long, C. N. H., &amp; Lupton, H. (1924). <span>Muscular exercise, lactic acid, and the supply and utilisation of oxygen</span>. <em>Proceedings of the Royal Society of London. Series B, Containing Papers of a Biological Character</em>, <em>96</em>(679), 438–475. <a href="https://doi.org/10.1098/rspb.1924.0037">https://doi.org/10.1098/rspb.1924.0037</a>
</div>
<div id="ref-Margaria1965" class="csl-entry" role="listitem">
Margaria, R., Manglli, F., Cuttica, F., &amp; Cerretelli, P. (1965). <span>The kinetics of the oxygen consumption at the onset of muscular exercise in man</span>. <em>Ergonomics</em>, <em>8</em>(1), 49–54. <a href="https://doi.org/10.1080/00140136508930773">https://doi.org/10.1080/00140136508930773</a>
</div>
<div id="ref-Oezyener2001" class="csl-entry" role="listitem">
Özyener, F., Rossiter, H. B., Ward, S. A., &amp; Whipp, B. J. (2001). <span>Influence of exercise intensity on the on- and off-transient kinetics of pulmonary oxygen uptake in humans.</span> <em>The Journal of physiology</em>, <em>533</em>(Pt 3), 891–902. <a href="https://doi.org/10.1111/j.1469-7793.2001.t01-1-00891.x">https://doi.org/10.1111/j.1469-7793.2001.t01-1-00891.x</a>
</div>
<div id="ref-Sietsema2020" class="csl-entry" role="listitem">
Sietsema, K. E., Sue, D. Y., Stringer, W. W., &amp; Ward, S. A. (2020). <em><span>Wasserman &amp; Whipp’s Principles of Exercise Testing and Interpretation: Including Pathophysiology and Clinical Applications</span></em> (6. Edition, S. 600). Wolters Kluwer.
</div>
<div id="ref-Stegemann1991" class="csl-entry" role="listitem">
Stegemann, J. (1991). <em><span>Leistungsphysiologie</span></em> (4. Edition, S. 385). Georg Thieme Verlag.
</div>
<div id="ref-Stirling2005" class="csl-entry" role="listitem">
Stirling, J. R., Zakynthinaki, M. S., &amp; Saltin, B. (2005). <span>A model of oxygen uptake kinetics in response to exercise: Including a means of calculating oxygen demand/deficit/debt</span>. <em>Bulletin of Mathematical Biology</em>, <em>67</em>(5), 989–1015. <a href="https://doi.org/10.1016/j.bulm.2004.12.005">https://doi.org/10.1016/j.bulm.2004.12.005</a>
</div>
<div id="ref-Whipp1971" class="csl-entry" role="listitem">
Whipp, B. J. (1971). <span>Rate constant for the kinetics of oxygen uptake during light exercise.</span> <em>Journal of applied physiology</em>, <em>30</em>(2), 261–263. <a href="https://doi.org/10.1152/jappl.1971.30.2.261">https://doi.org/10.1152/jappl.1971.30.2.261</a>
</div>
<div id="ref-Whipp1982" class="csl-entry" role="listitem">
Whipp, B. J., Ward, S. A., Lamarra, N., Davis, J. A., &amp; Wasserman, K. (1982). <span>Parameters of ventilatory and gas exchange dynamics during exercise.</span> <em>Journal of applied physiology: respiratory, environmental and exercise physiology</em>, <em>52</em>(6), 1506–1513. <a href="https://doi.org/10.1152/jappl.1982.52.6.1506">https://doi.org/10.1152/jappl.1982.52.6.1506</a>
</div>
<div id="ref-Whipp1972" class="csl-entry" role="listitem">
Whipp, B. J., &amp; Wasserman, K. (1972). <span>Oxygen uptake kinetics for various intensities of constant-load work.</span> <em>Journal of applied physiology</em>, <em>33</em>(3), 351–356. <a href="https://doi.org/10.1152/jappl.1972.33.3.351">https://doi.org/10.1152/jappl.1972.33.3.351</a>
</div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Fußnoten</h2>

<ol>
<li id="fn1"><p>Die LT beschreibt den Punkt, an dem das Blutlaktat bei zunehmender Belastungsintensität über das Ruheniveau hinaus zu akkumulieren beginnt <span class="citation" data-cites="Sietsema2020">(<a href="#ref-Sietsema2020" role="doc-biblioref">Sietsema et al., 2020</a>)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/JJRW96\.github\.io\/Wirkungsgrad-Rad\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/index_Energieumsatzberechnung.html" class="pagination-link" aria-label="Energieumsatzberechnung">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Energieumsatzberechnung</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../Theoretischer_Hintergrund/Energieumsatzberechnung/Anaerobe_laktazide_Energiebereitstellung.html" class="pagination-link" aria-label="Anaerobe- laktazide Energiekomponente (W~BLC~)">
        <span class="nav-page-text">Anaerobe- laktazide Energiekomponente (W<sub>BLC</sub>)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb3" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Aerobe Energiekomponente (W~Aerob~)"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">    resources: </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">      - shinylive-sw.js</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">      </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="an">filters:</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">  - shinylive</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">  engine: knitr</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: false</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">  error: false</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> references.bib</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="an">lang:</span><span class="co"> de</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> false</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> </span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">  markdown: </span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">    wrap: 72</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{css}</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> echo<span class="in">:</span> false</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>p {</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">justify</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>caption<span class="op">,</span> <span class="fu">.figure-caption</span> {</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">left</span><span class="op">;</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>figure<span class="fu">.quarto-float-tbl</span> figcaption {</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">left</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>figure figcaption {</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">justify</span><span class="op">;</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>dplyr<span class="in">)</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>tidyr<span class="in">)</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>readxl<span class="in">)</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>ggplot2<span class="in">)</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>DT<span class="in">)</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>extrafont<span class="in">)</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>DT<span class="in">)</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>flextable<span class="in">)</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>```{r echo=FALSE<span class="op">,</span> output=FALSE}</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a># Stegemann - Zusammenhang zw. dem RQ und dem kalorischen Äquivalent</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>stegemann &lt;- data<span class="fu">.frame</span><span class="in">(</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  RQ = c<span class="in">(</span>0<span class="fu">.700</span><span class="op">,</span> 0<span class="fu">.710</span><span class="op">,</span> 0<span class="fu">.720</span><span class="op">,</span> 0<span class="fu">.730</span><span class="op">,</span> 0<span class="fu">.740</span><span class="op">,</span> 0<span class="fu">.750</span><span class="op">,</span> 0<span class="fu">.760</span><span class="op">,</span> 0<span class="fu">.770</span><span class="op">,</span> 0<span class="fu">.780</span><span class="op">,</span> 0<span class="fu">.790</span><span class="op">,</span> </span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>         0<span class="fu">.800</span><span class="op">,</span> 0<span class="fu">.810</span><span class="op">,</span> 0<span class="fu">.820</span><span class="op">,</span> 0<span class="fu">.830</span><span class="op">,</span> 0<span class="fu">.840</span><span class="op">,</span> 0<span class="fu">.850</span><span class="op">,</span> 0<span class="fu">.860</span><span class="op">,</span> 0<span class="fu">.870</span><span class="op">,</span> 0<span class="fu">.880</span><span class="op">,</span> 0<span class="fu">.890</span><span class="op">,</span> </span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>         0<span class="fu">.900</span><span class="op">,</span> 0<span class="fu">.910</span><span class="op">,</span> 0<span class="fu">.920</span><span class="op">,</span> 0<span class="fu">.930</span><span class="op">,</span> 0<span class="fu">.940</span><span class="op">,</span> 0<span class="fu">.950</span><span class="op">,</span> 0<span class="fu">.960</span><span class="op">,</span> 0<span class="fu">.970</span><span class="op">,</span> 0<span class="fu">.980</span><span class="op">,</span> 0<span class="fu">.990</span><span class="op">,</span> 1<span class="fu">.000</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  kÄ_O2_kJ_lO2 = c<span class="in">(</span>19<span class="fu">.619</span><span class="op">,</span> 19<span class="fu">.636</span><span class="op">,</span> 19<span class="fu">.686</span><span class="op">,</span> 19<span class="fu">.737</span><span class="op">,</span> 19<span class="fu">.791</span><span class="op">,</span> 19<span class="fu">.841</span><span class="op">,</span> 19<span class="fu">.887</span><span class="op">,</span> 19<span class="fu">.946</span><span class="op">,</span> 20<span class="fu">.009</span><span class="op">,</span> 20<span class="fu">.046</span><span class="op">,</span> </span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>                   20<span class="fu">.101</span><span class="op">,</span> 20<span class="fu">.151</span><span class="op">,</span> 20<span class="fu">.201</span><span class="op">,</span> 20<span class="fu">.256</span><span class="op">,</span> 20<span class="fu">.306</span><span class="op">,</span> 20<span class="fu">.356</span><span class="op">,</span> 20<span class="fu">.411</span><span class="op">,</span> 20<span class="fu">.461</span><span class="op">,</span> 20<span class="fu">.515</span><span class="op">,</span> 20<span class="fu">.561</span><span class="op">,</span> </span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>                   20<span class="fu">.616</span><span class="op">,</span> 20<span class="fu">.666</span><span class="op">,</span> 20<span class="fu">.716</span><span class="op">,</span> 20<span class="fu">.771</span><span class="op">,</span> 20<span class="fu">.821</span><span class="op">,</span> 20<span class="fu">.871</span><span class="op">,</span> 20<span class="fu">.926</span><span class="op">,</span> 20<span class="fu">.976</span><span class="op">,</span> 21<span class="fu">.026</span><span class="op">,</span> 21<span class="fu">.081</span><span class="op">,</span> 21<span class="fu">.131</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>  kÄ_O2_kcal_lO2 = c<span class="in">(</span>4<span class="fu">.686</span><span class="op">,</span> 4<span class="fu">.690</span><span class="op">,</span> 4<span class="fu">.702</span><span class="op">,</span> 4<span class="fu">.714</span><span class="op">,</span> 4<span class="fu">.727</span><span class="op">,</span> 4<span class="fu">.739</span><span class="op">,</span> 4<span class="fu">.750</span><span class="op">,</span> 4<span class="fu">.764</span><span class="op">,</span> 4<span class="fu">.779</span><span class="op">,</span> 4<span class="fu">.788</span><span class="op">,</span> </span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>                     4<span class="fu">.801</span><span class="op">,</span> 4<span class="fu">.813</span><span class="op">,</span> 4<span class="fu">.825</span><span class="op">,</span> 4<span class="fu">.838</span><span class="op">,</span> 4<span class="fu">.850</span><span class="op">,</span> 4<span class="fu">.862</span><span class="op">,</span> 4<span class="fu">.875</span><span class="op">,</span> 4<span class="fu">.887</span><span class="op">,</span> 4<span class="fu">.900</span><span class="op">,</span> 4<span class="fu">.911</span><span class="op">,</span> </span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>                     4<span class="fu">.924</span><span class="op">,</span> 4<span class="fu">.936</span><span class="op">,</span> 4<span class="fu">.948</span><span class="op">,</span> 4<span class="fu">.961</span><span class="op">,</span> 4<span class="fu">.973</span><span class="op">,</span> 4<span class="fu">.985</span><span class="op">,</span> 4<span class="fu">.998</span><span class="op">,</span> 5<span class="fu">.010</span><span class="op">,</span> 5<span class="fu">.022</span><span class="op">,</span> 5<span class="fu">.035</span><span class="op">,</span> 5<span class="fu">.047</span><span class="in">)</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>DT_stegemann &lt;- datatable<span class="in">(</span>stegemann<span class="op">,</span> options = list<span class="in">(</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>  dom = 'tp'<span class="op">,</span>  # Tabelle und Paging-Elemente anzeigen</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>  pageLength = 8<span class="op">,</span>  # 8 Zeilen pro Seite anzeigen</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>  autoWidth = TRUE<span class="op">,</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>  columnDefs = list<span class="in">(</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>    list<span class="in">(</span>title = "RQ"<span class="op">,</span> targets = 0<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    list<span class="in">(</span>title = "kÄ&lt;sub<span class="op">&gt;</span>Bel&lt;/sub<span class="op">&gt;</span> <span class="ex">[</span><span class="ss">kcal &amp;middot</span>; l&lt;sup<span class="op">&gt;</span>-1&lt;/sup<span class="op">&gt;</span>]"<span class="op">,</span> targets = 2<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>    list<span class="in">(</span>title = "kÄ&lt;sub<span class="op">&gt;</span>Bel&lt;/sub<span class="op">&gt;</span> <span class="ex">[</span><span class="ss">kJ &amp;middot</span>; l&lt;sup<span class="op">&gt;</span>-1&lt;/sup<span class="op">&gt;</span>]"<span class="op">,</span> targets = 1<span class="in">)</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>  <span class="in">)</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a><span class="in">)</span><span class="op">,</span> rownames = FALSE<span class="op">,</span> escape = FALSE<span class="in">)</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>  formatRound<span class="in">(</span>columns = 1<span class="op">,</span> digits = 2<span class="in">)</span> %<span class="op">&gt;</span>%  # Spalte 1 auf 2 Nachkommastellen runden</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>  formatRound<span class="in">(</span>columns = 2<span class="in">:</span>3<span class="op">,</span> digits = 3<span class="in">)</span>  # Spalten 2 und 3 auf 3 Nachkommastellen runden</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>Um den aeroben Energieanteil am physiologischen Gesamtenergieumsatz <span class="in">(</span>W<span class="op">~</span>Aerob<span class="op">~</span><span class="in">)</span> zu bestimmen<span class="op">,</span> muss zu jedem Zeitpunkt t der Sauerstoffvolumenstrom über den Belastungszeitraum <span class="in">(</span>$\dot<span class="er">{</span>V}O_{2<span class="op">,</span>Belastung}<span class="in">(</span>t<span class="in">)</span>$) sowie der Ruheumsatz bekannt sein<span class="op">,</span> welcher dem Sauerstoffvolumenstrom in Ruhe <span class="in">(</span>$\dot<span class="er">{</span>V}O_{2<span class="op">,</span> Ruhe}<span class="in">(</span>t<span class="in">)</span>$) entspricht.</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>## Bestimmung des Ruheumsatzes</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>Der Ruheumsatz bezeichnet die Energiemenge für die Aufrechterhaltung der physiologischen Grundfunktionen wie Atmung<span class="op">,</span> Kreislauf<span class="op">,</span> Verdauung und unwillkürlichem Muskeltonus in einem normalen Ruhezustand. Im Gegensatz zum Grundumsatz<span class="op">,</span> der unter streng standardisierten Bedingungen <span class="in">(</span>morgens<span class="op">,</span> nüchtern<span class="op">,</span> liegend<span class="in">)</span> gemessen wird<span class="op">,</span> beschreibt der Ruheumsatz den Energieumsatz in einem alltäglichen Ruhezustand. Die Höhe des Ruheumsatzes wird maßgeblich von individuellen Faktoren wie Körpermasse<span class="op">,</span> Geschlecht<span class="op">,</span> Alter und besonders dem Anteil der stoffwechselaktiven Muskulatur beeinflusst. Für präzise Berechnungen des Energieumsatzes während körperlicher Aktivität dient der Ruheumsatz als Bezugsgröße <span class="ex">[</span><span class="ss">@Ciba-Geigy1977</span><span class="op">,</span> 225].</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>Für die praktische Bestimmung des Grundumsatzes stehen zwei verschiedene Methoden zur Verfügung<span class="in">:</span> Der Sauerstoffvolumenstrom in Ruhe $\dot{V}O_{2<span class="op">,</span> Ruhe}<span class="in">(</span>t<span class="in">)</span>$ lässt sich entweder durch direkte Messung mittels Spirometrie oder durch Berechnung mittels etablierter Formeln bestimmen. In dieser Arbeit wurden dafür <span class="im">@eq-H</span> und @eq-RMR verwendet. @eq-H ermöglicht die Berechnung des täglichen Grundumsatzes <span class="fu">(</span><span class="dv">h</span><span class="fu">)</span> in kcal in Abhängigkeit von Geschlecht, Körpermasse, Körperlänge und Alter [@Harris1918]:</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>h_{f<span class="op">,</span> m}\,<span class="ex">[</span><span class="ss">kcal</span><span class="ex">]</span> = </span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>\begin{cases} </span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>h_{f} = 655<span class="fu">.1</span> <span class="op">+</span> <span class="in">(</span>9<span class="fu">.563</span> \cdot \text<span class="er">{</span>Körpermasse <span class="ex">[</span><span class="ss">kg</span><span class="ex">]</span>}) <span class="op">+</span> <span class="in">(</span>1<span class="fu">.850</span> \cdot \text<span class="er">{</span>Körperlänge <span class="ex">[</span><span class="ss">cm</span><span class="ex">]</span>}) - <span class="in">(</span>4<span class="fu">.676</span> \cdot \text<span class="er">{</span>Alter <span class="ex">[</span><span class="ss">Jahre</span><span class="ex">]</span>}) \rightarrow \text{Frauen}\\    </span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>h_{m} = 66<span class="fu">.5\;</span> <span class="op">+</span> <span class="in">(</span>13<span class="fu">.75</span> \cdot \text<span class="er">{</span>Körpermasse <span class="ex">[</span><span class="ss">kg</span><span class="ex">]</span>}) <span class="op">+</span> <span class="in">(</span>5<span class="fu">.003</span> \cdot \text<span class="er">{</span>Körperlänge <span class="ex">[</span><span class="ss">cm</span><span class="ex">]</span>}) - <span class="in">(</span>6<span class="fu">.775</span> \cdot \text<span class="er">{</span>Alter <span class="ex">[</span><span class="ss">Jahre</span><span class="ex">]</span>}) \rightarrow \text{Männer}</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>\end{cases}</span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>$$ {<span class="pp">#eq-H</span>}</span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>Nach der Berechnung des Grundumsatzes erfolgte die Bestimmung des kalorischen Äquivalents <span class="in">(</span>kÄ<span class="in">)</span> anhand des individuell gemessenen RQ <span class="in">(</span>t<span class="in">)</span> und <span class="im">@tbl-stegemann</span>, woraus sich der Ruheumsatz <span class="fu">(</span><span class="dv">RMR</span>, <span class="dv">Englisch für </span><span class="st">"resting metabolic rate"</span><span class="fu">)</span> im Liegen in Liter pro Minute berechnen ließ. Um vom Ruheumsatz im Liegen auf den Ruheumsatz im Stehen zu kommen, wurde der berechnete Ruheumsatz mit dem Faktor $\frac{1<span class="fu">.39</span>}{1<span class="fu">.08</span>} = 1<span class="fu">.287</span>$ für Männer und $\frac{1<span class="fu">.15</span>}{0<span class="fu">.90</span>} = 1<span class="fu">.278</span>$ für Frauen<span class="op">,</span> basierend auf <span class="im">@fig-CIBA_GEIGY</span>, multipliziert [@Ciba-Geigy1977, 225]. Der mit folgender Gleichung berechnete RMR entspricht $\dot{V}O_{2<span class="op">,</span> Ruhe}$<span class="in">:</span></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>RMR_{f<span class="op">,</span> m}\,<span class="ex">[</span><span class="ss">l \cdot min</span><span class="op">^</span>{-1}] = </span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>\begin{cases} </span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>RMR_{f} = \;\left<span class="in">(</span> \frac<span class="er">{</span>h_{f}}{24\<span class="op">,</span> \cdot\, 60\, \cdot\, kÄ} \right) \cdot 4<span class="fu">.1868</span> \cdot 1<span class="fu">.278</span> \rightarrow \text{Frauen} \\</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>RMR_{m} = \left<span class="in">(</span> \frac<span class="er">{</span>h_{m}}{24\<span class="op">,</span> \cdot\, 60\, \cdot\, kÄ} \right) \cdot 4<span class="fu">.1868</span> \cdot 1<span class="fu">.287</span> \rightarrow \text{Männer}</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>\end{cases}</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>$$ {<span class="pp">#eq-RMR</span>}</span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.callout-note</span> collapse="true"}</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>#### Abbildung 1<span class="in">:</span> Energieumsatz bei verschiedenen Tätigkeiten <span class="in">(</span>Ciba Geigy<span class="op">,</span> 1977<span class="op">,</span> S<span class="fu">.225</span><span class="in">)</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> columns</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="85%"}</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>!<span class="ex">[</span><span class="ss">Energieumsatz bei verschiedenen Tätigkeiten (Ciba Geigy</span><span class="op">,</span> 1977<span class="op">,</span> S<span class="fu">.225</span>).]<span class="in">(</span>images/Ciba_Geigy_Ruheumsatz<span class="fu">.png</span><span class="in">)</span>{<span class="pp">#fig-CIBA_GEIGY</span> <span class="fu">.caption</span>}</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="15%"}</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> columns</span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="66<span class="fu">.0</span>%"}</span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.callout-note</span> icon="false"}</span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a>## RMR-Beispielrechnung</span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Parameter<span class="in">:</span><span class="op">**</span></span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>-   Körpermasse = 75 kg</span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a>-   Körperlänge = 180 cm</span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a>-   Alter = 25 Jahre</span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a>-   RQ = 0<span class="fu">.77</span> entspricht kÄ von 19<span class="fu">.946</span> <span class="ex">[</span><span class="ss">kJ • l</span><span class="op">^</span><span class="ss">-1</span><span class="op">^</span><span class="ex">]</span> <span class="in">(</span>siehe @tbl-stegemann<span class="in">)</span></span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a>$h_{m} = 66<span class="fu">.5</span> <span class="op">+</span> <span class="in">(</span>13<span class="fu">.75</span> \cdot \text<span class="er">{</span>75}) <span class="op">+</span> <span class="in">(</span>5<span class="fu">.003</span> \cdot \text<span class="er">{</span>180}) - <span class="in">(</span>6<span class="fu">.775</span> \cdot \text<span class="er">{</span>25}) = 1828<span class="fu">.9\,</span> <span class="ex">[</span><span class="ss">\text</span>{kcal}]$&lt;br<span class="op">&gt;</span>&lt;br<span class="op">&gt;</span></span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a>$RMR_{m} = \left<span class="in">(</span> \frac<span class="er">{</span>1828<span class="fu">.9</span>}{24 \cdot 60 \cdot 19<span class="fu">.946</span>} \right) \cdot 4<span class="fu">.1868</span> \cdot 1<span class="fu">.287</span> = 0<span class="fu">.344\,</span> <span class="ex">[</span><span class="ss">l \cdot min</span><span class="op">^</span>{-1}]$</span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>In der vorliegenden Studie wurde der durchschnittliche $\dot{V}O_{2<span class="op">,</span> Ruhe}$ über einen mehrminütigen Messzeitraum etwa 10 Minuten vor Beginn der ersten Belastung auf dem Fahrradergometer in sitzender Position ermittelt. Zusätzlich erfolgte eine Bestimmung durch die oben beschriebene Berechnungsmethode.&lt;br<span class="op">&gt;</span></span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a>Da aufgrund verschiedener Faktoren<span class="op">,</span> wie beispielsweise Stress<span class="op">,</span> Nahrungsaufnahme oder unterschiedliche Umgebungsbedingungen<span class="op">,</span> die Werte der gemessenen durchschnittlichen $\dot{V}O_{2<span class="op">,</span> Ruhe}$ im Vergleich zu den Normwerten unnatürlich hoch sein können<span class="op">,</span> wurde der gemessene  $\dot{V}O_{2<span class="op">,</span>Ruhe}$-Durchschnittswert nur verwendet<span class="op">,</span> wenn er maximal 20% größer war als der berechnete. Andernfalls wurde der berechnete Wert verwendet.</span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="2<span class="fu">.0</span>%"}</span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="32<span class="fu">.0</span>%"}</span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> label<span class="in">:</span> tbl-stegemann</span>
<span id="cb3-154"><a href="#cb3-154" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> tbl-cap-location<span class="in">:</span> bottom</span>
<span id="cb3-155"><a href="#cb3-155" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> tbl-cap<span class="in">:</span> "Zusammenhang zwischen dem respiratorischem Koeffizienten und dem kalorischen Äquivalent in <span class="ex">[</span><span class="ss">kcal &amp;middot</span>; l&lt;sup<span class="op">&gt;</span>-1&lt;/sup<span class="op">&gt;</span>] und <span class="ex">[</span><span class="ss">kJ &amp;middot</span>; l&lt;sup<span class="op">&gt;</span>-1&lt;/sup<span class="op">&gt;</span>]  <span class="in">(</span>Zuntz<span class="op">,</span> 1901<span class="op">,</span> S<span class="fu">.260</span>; Stegemann<span class="op">,</span> 1991<span class="op">,</span> S<span class="fu">.59</span><span class="in">)</span>"</span>
<span id="cb3-156"><a href="#cb3-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-157"><a href="#cb3-157" aria-hidden="true" tabindex="-1"></a>DT_stegemann</span>
<span id="cb3-158"><a href="#cb3-158" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb3-159"><a href="#cb3-159" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-160"><a href="#cb3-160" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-161"><a href="#cb3-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-162"><a href="#cb3-162" aria-hidden="true" tabindex="-1"></a>## Berechnung der aeroben Energiekomponente W<span class="op">~</span>Aerob<span class="op">~</span></span>
<span id="cb3-163"><a href="#cb3-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-164"><a href="#cb3-164" aria-hidden="true" tabindex="-1"></a>Zur Bestimmung des aeroben Arbeitsumsatzes <span class="in">(</span>W<span class="op">~</span>Aerob<span class="op">~</span><span class="in">)</span> während eines Belastungszeitraums wurde zunächst der Netto-Sauerstoffvolumenstrom $\dot{V}O_{2<span class="op">,</span>Netto}<span class="in">(</span>t<span class="in">)</span>$ nach <span class="im">@eq-VO2_NET</span> berechnet:</span>
<span id="cb3-165"><a href="#cb3-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-166"><a href="#cb3-166" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a>\dot{V}O_{2<span class="op">,</span>Netto}<span class="in">(</span>t<span class="in">)</span>\;<span class="ex">[</span><span class="ss">l \cdot min</span><span class="op">^</span>{-1}] = \dot{V}O_{2<span class="op">,</span>Belastung}<span class="in">(</span>t<span class="in">)</span> - \dot{V}O_{2<span class="op">,</span>Ruhe} <span class="in">(</span>t<span class="in">)</span></span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a>$$ {<span class="pp">#eq-VO2_NET</span>}</span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a>Der aerobe Anteil am physiologischen Gesamtenergieumsatz <span class="in">(</span>W<span class="op">~</span>Aerob<span class="op">~</span><span class="in">)</span> konnte durch Multiplikation des mittleren Netto-Sauerstoffvolumenstroms <span class="in">(</span>$\overline<span class="er">{</span>\dot{V}O_{2<span class="op">,</span>Netto}}$) mit der Belastungsdauer t und dem mittleren kalorischen Äquivalent <span class="in">(</span>$\overline<span class="er">{</span>kÄ}_{Bel}$) aus <span class="im">@tbl-stegemann</span> bestimmt werden [@Stegemann1991, 59]:</span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-172"><a href="#cb3-172" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-173"><a href="#cb3-173" aria-hidden="true" tabindex="-1"></a>W_{Aerob}\;<span class="ex">[</span><span class="ss">kJ</span><span class="ex">]</span> = \overline{\dot{V}O_{2<span class="op">,</span>Netto}} \cdot \overline{kÄ}_{Bel} \cdot  t</span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a>$$ {<span class="pp">#eq-WAER</span>}</span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a>Die mittlere aerobe Leistung <span class="in">(</span>$\overline<span class="er">{</span>P}_{Aerob}$) wurde durch Division der W<span class="op">~</span>Aerob<span class="op">~</span> in kJ durch die Belastungsdauer in Sekunden berechnet<span class="in">:</span></span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>\overline{P}_{Aerob}\;<span class="ex">[</span><span class="ss">W</span><span class="ex">]</span> = \frac{W_{Aerob}}{t} \cdot 1000</span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a>$$ {<span class="pp">#eq-PAER</span>}</span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a>## Sauerstoffvolumenstrom-Kinetik</span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a>Während die in <span class="im">@eq-WAER</span> beschriebenen Berechnungen der W~Aerob~ auf Durchschnittswerten des $\dot{V}O_{2<span class="op">,</span>Belastung}<span class="in">(</span>t<span class="in">)</span>$ basieren<span class="op">,</span> ermöglicht die Analyse der Kinetik des Sauerstoffvolumenstroms zu Belastungsbeginn und während der Belastung weitere Einblicke in die Charakteristik der aeroben Energiebereitstellung. Von besonderem Interesse sind dabei die Geschwindigkeit der initialen Anpassung sowie das Erreichen oder Ausbleiben eines Fließgleichgewichts und dessen absolute Höhe. Diese Aspekte lassen sich durch die mathematische Modellierung des Sauerstoffvolumenstroms quantifizieren.</span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a>Der Anstieg des Sauerstoffvolumenstroms $\dot{V}O_{2<span class="op">,</span>Belastung}<span class="in">(</span>t<span class="in">)</span>$ zu</span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a>Beginn einer leichten bis moderaten körperlichen Belastung auf dem</span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a>Fahrradergometer unterhalb der Laktatschwelle <span class="in">(</span>LT<span class="ex">[</span><span class="op">^</span><span class="ss">1</span><span class="ex">]</span><span class="in">)</span> wurde</span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a>traditionell in der Literatur als monoexponentiell beschrieben<span class="op">,</span> mit</span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a>einer Amplitude von ungefähr 9–10 ml O<span class="op">~</span>2<span class="op">~</span>·W^-1^·min^-1^ <span class="ex">[</span><span class="ss">@Barstow1991</span>;</span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a><span class="im">@Bearden2000</span>]. Die Zeitkonstante $\tau_{\text{Start}}$ beschreibt die</span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a>Geschwindigkeit<span class="op">,</span> mit der der Sauerstoffvolumenstrom den</span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a>Gleichgewichtszustand $\dot{V}O_{2<span class="op">,</span>\text{Brutto<span class="op">,</span> SS}}$ erreicht. Dieser Gleichgewichtszustand<span class="op">,</span> auch Steady-State genannt<span class="op">,</span> zeichnet sich durch ein Gleichgewicht zwischen Energiebedarf und aerober Energiebereitstellung aus<span class="op">,</span> was sich in einem Plateauwert der $\dot{V}O_{2<span class="op">,</span>Belastung}<span class="in">(</span>t<span class="in">)</span>$ widerspiegelt. Dies</span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a>lässt sich mit der folgenden Formel darstellen <span class="ex">[</span><span class="ss">@Hill1924</span>; <span class="im">@Henry1956</span><span class="op">;</span></span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a><span class="im">@Margaria1965</span><span class="op">;</span> <span class="im">@Whipp1971</span><span class="op">;</span> <span class="im">@Oezyener2001</span><span class="op">;</span> <span class="im">@Francescato2003</span><span class="op">;</span> <span class="im">@Clark2014</span>]:</span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a>[^1]: Die LT beschreibt den Punkt, an dem das Blutlaktat bei zunehmender</span>
<span id="cb3-199"><a href="#cb3-199" aria-hidden="true" tabindex="-1"></a>    Belastungsintensität über das Ruheniveau hinaus zu akkumulieren</span>
<span id="cb3-200"><a href="#cb3-200" aria-hidden="true" tabindex="-1"></a>    beginnt [@Sietsema2020].</span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-202"><a href="#cb3-202" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-203"><a href="#cb3-203" aria-hidden="true" tabindex="-1"></a>\dot{V}O_{2<span class="op">,</span>\text{Belastung}}\,<span class="in">(</span>t<span class="in">)</span> = \dot{V}O_{2<span class="op">,</span>\text{Amplitude}} \cdot \left<span class="in">(</span>1 - e^<span class="er">{</span>-\frac{t - TD}{\tau_{\text{Start}}}}\right) <span class="op">+</span> \dot{V}O_{2<span class="op">,</span>\text{Start}}</span>
<span id="cb3-204"><a href="#cb3-204" aria-hidden="true" tabindex="-1"></a>$$ {<span class="pp">#eq-VO2_Start</span>}</span>
<span id="cb3-205"><a href="#cb3-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-206"><a href="#cb3-206" aria-hidden="true" tabindex="-1"></a>Dabei beschreibt $\dot{V}O_{2<span class="op">,</span>\text{Start}}$ den Sauerstoffvolumenstrom zu Beginn der Belastung und $\dot{V}O_{2<span class="op">,</span>\text{Amplitude}}$ die Differenz zwischen Start- und Brutto-Steady-State-Wert. Der Brutto-Steady-State-Wert $\dot{V}O_{2<span class="op">,</span>\text{Brutto<span class="op">,</span> SS}}$ ergibt sich aus der Summe von $\dot{V}O_{2<span class="op">,</span>\text{Amplitude}}$ und $\dot{V}O_{2<span class="op">,</span>\text{Start}}$ und wurde in der vorliegenden Untersuchung zum Zeitpunkt 4$\tau$ bestimmt. Durch Subtraktion des Ruhe-Sauerstoffvolumenstroms $\dot{V}O_{2<span class="op">,</span> \text{Ruhe}}$ von diesem Brutto-Steady-State-Wert wurde der Netto-Sauerstoffvolumenstrom $\dot{V}O_{2<span class="op">,</span>\text{Netto<span class="op">,</span> SS}}$ berechnet. Die Wahl des Zeitpunkts 4$\tau$ basiert darauf<span class="op">,</span> dass zu diesem Zeitpunkt bereits 98% des Gesamtanstiegs des Sauerstoffvolumenstroms stattgefunden haben. Das genaue methodische Vorgehen zur Bestimmung der $\dot{V}O_{2<span class="op">,</span>\text{Brutto<span class="op">,</span> SS}}$- und $\dot{V}O_{2<span class="op">,</span>\text{Netto<span class="op">,</span> SS}}$-Werte wird am Ende dieses Kapitels detailliert beschrieben.</span>
<span id="cb3-207"><a href="#cb3-207" aria-hidden="true" tabindex="-1"></a>&lt;br<span class="op">&gt;</span> In der folgenden Shiny-App wird ein</span>
<span id="cb3-208"><a href="#cb3-208" aria-hidden="true" tabindex="-1"></a>Beispiel der in <span class="im">@eq-VO2_Start</span> beschriebenen Modellfunktion gezeigt. Eigene $\dot{V}O_{2}$-Daten können hochgeladen und mittels</span>
<span id="cb3-209"><a href="#cb3-209" aria-hidden="true" tabindex="-1"></a>nichtlinearer Regression an die Beispieldaten angepasst werden.</span>
<span id="cb3-210"><a href="#cb3-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-211"><a href="#cb3-211" aria-hidden="true" tabindex="-1"></a>#### Shiny-App<span class="in">:</span> Monoexponentielle $\dot{V}O_{2}$-Modellfunktion {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-212"><a href="#cb3-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-213"><a href="#cb3-213" aria-hidden="true" tabindex="-1"></a>```{shinylive-r}</span>
<span id="cb3-214"><a href="#cb3-214" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> standalone<span class="in">:</span> true</span>
<span id="cb3-215"><a href="#cb3-215" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> viewerHeight<span class="in">:</span> 900</span>
<span id="cb3-216"><a href="#cb3-216" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>shiny<span class="in">)</span></span>
<span id="cb3-217"><a href="#cb3-217" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>plotly<span class="in">)</span></span>
<span id="cb3-218"><a href="#cb3-218" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>minpack<span class="fu">.lm</span><span class="in">)</span></span>
<span id="cb3-219"><a href="#cb3-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-220"><a href="#cb3-220" aria-hidden="true" tabindex="-1"></a># Beispieldaten</span>
<span id="cb3-221"><a href="#cb3-221" aria-hidden="true" tabindex="-1"></a>t_data &lt;- c<span class="in">(</span>0<span class="op">,</span> 2<span class="fu">.8</span><span class="op">,</span> 5<span class="fu">.3</span><span class="op">,</span> 8<span class="fu">.6</span><span class="op">,</span> 10<span class="fu">.4</span><span class="op">,</span> 15<span class="fu">.2</span><span class="op">,</span> 19<span class="fu">.7</span><span class="op">,</span> 22<span class="fu">.5</span><span class="op">,</span> 24<span class="fu">.5</span><span class="op">,</span> 26<span class="fu">.2</span><span class="op">,</span> 28<span class="fu">.2</span><span class="op">,</span> 31<span class="fu">.6</span><span class="op">,</span> 33<span class="fu">.5</span><span class="op">,</span> 35<span class="fu">.3</span><span class="op">,</span> 37<span class="op">,</span> 38<span class="fu">.5</span><span class="op">,</span> 40<span class="fu">.3</span><span class="op">,</span> 41<span class="fu">.9</span><span class="op">,</span> 43<span class="fu">.5</span><span class="op">,</span> 45<span class="fu">.2</span><span class="op">,</span> 46<span class="fu">.8</span><span class="op">,</span> 48<span class="fu">.4</span><span class="op">,</span> 50<span class="op">,</span> 51<span class="fu">.5</span><span class="op">,</span> 53<span class="fu">.3</span><span class="op">,</span> 54<span class="fu">.8</span><span class="op">,</span> 56<span class="fu">.5</span><span class="op">,</span> 57<span class="fu">.9</span><span class="op">,</span> 59<span class="fu">.5</span><span class="op">,</span> 61<span class="fu">.1</span><span class="op">,</span> 62<span class="fu">.9</span><span class="op">,</span> 64<span class="fu">.3</span><span class="op">,</span> 65<span class="fu">.8</span><span class="op">,</span> 67<span class="fu">.7</span><span class="op">,</span> 69<span class="fu">.1</span><span class="op">,</span> 70<span class="fu">.7</span><span class="op">,</span> 72<span class="fu">.4</span><span class="op">,</span> 73<span class="fu">.9</span><span class="op">,</span> 75<span class="fu">.7</span><span class="op">,</span> 77<span class="fu">.2</span><span class="op">,</span> 78<span class="fu">.9</span><span class="op">,</span> 80<span class="fu">.5</span><span class="op">,</span> 82<span class="fu">.7</span><span class="op">,</span> 84<span class="fu">.1</span><span class="op">,</span> 85<span class="fu">.5</span><span class="op">,</span> 87<span class="op">,</span> 88<span class="fu">.6</span><span class="op">,</span> 90<span class="fu">.2</span><span class="op">,</span> 91<span class="fu">.5</span><span class="op">,</span> 92<span class="fu">.9</span><span class="op">,</span> 94<span class="fu">.3</span><span class="op">,</span> 95<span class="fu">.8</span><span class="op">,</span> 97<span class="fu">.6</span><span class="op">,</span> 99<span class="fu">.1</span><span class="op">,</span> 100<span class="fu">.5</span><span class="op">,</span> 102<span class="fu">.1</span><span class="op">,</span> 103<span class="fu">.5</span><span class="op">,</span> 105<span class="fu">.3</span><span class="op">,</span> 106<span class="fu">.6</span><span class="op">,</span> 108<span class="fu">.1</span><span class="op">,</span> 109<span class="fu">.6</span><span class="op">,</span> 111<span class="fu">.4</span><span class="op">,</span> 112<span class="fu">.8</span><span class="op">,</span> 114<span class="fu">.3</span><span class="op">,</span> 115<span class="fu">.8</span><span class="op">,</span> 117<span class="fu">.7</span><span class="op">,</span> 119<span class="fu">.1</span><span class="op">,</span> 120<span class="fu">.8</span><span class="op">,</span> 122<span class="fu">.3</span><span class="op">,</span> 124<span class="fu">.2</span><span class="op">,</span> 125<span class="fu">.7</span><span class="op">,</span> 127<span class="fu">.2</span><span class="op">,</span> 128<span class="fu">.8</span><span class="op">,</span> 131<span class="fu">.1</span><span class="op">,</span> 132<span class="fu">.5</span><span class="op">,</span> 133<span class="fu">.9</span><span class="op">,</span> 135<span class="fu">.4</span><span class="op">,</span> 136<span class="fu">.9</span><span class="op">,</span> 138<span class="fu">.4</span><span class="op">,</span> 140<span class="op">,</span> 141<span class="fu">.3</span><span class="op">,</span> 143<span class="op">,</span> 144<span class="fu">.5</span><span class="op">,</span> 146<span class="fu">.1</span><span class="op">,</span> 147<span class="fu">.6</span><span class="op">,</span> 149<span class="op">,</span> 150<span class="fu">.5</span><span class="op">,</span> 152<span class="fu">.3</span><span class="op">,</span> 153<span class="fu">.9</span><span class="op">,</span> 155<span class="fu">.6</span><span class="op">,</span> 156<span class="fu">.9</span><span class="op">,</span> 158<span class="fu">.6</span><span class="op">,</span> 160<span class="fu">.1</span><span class="op">,</span> 162<span class="fu">.4</span><span class="op">,</span> 163<span class="fu">.7</span><span class="op">,</span> 165<span class="fu">.1</span><span class="in">)</span></span>
<span id="cb3-222"><a href="#cb3-222" aria-hidden="true" tabindex="-1"></a>VO2_data &lt;- c<span class="in">(</span>0<span class="fu">.465</span><span class="op">,</span> 0<span class="fu">.34</span><span class="op">,</span> 0<span class="fu">.466</span><span class="op">,</span> 0<span class="fu">.503</span><span class="op">,</span> 0<span class="fu">.452</span><span class="op">,</span> 0<span class="fu">.687</span><span class="op">,</span> 0<span class="fu">.846</span><span class="op">,</span> 0<span class="fu">.963</span><span class="op">,</span> 0<span class="fu">.936</span><span class="op">,</span> 1<span class="fu">.125</span><span class="op">,</span> 1<span class="fu">.238</span><span class="op">,</span> 1<span class="fu">.541</span><span class="op">,</span> 1<span class="fu">.395</span><span class="op">,</span> 1<span class="fu">.685</span><span class="op">,</span> 1<span class="fu">.689</span><span class="op">,</span> 1<span class="fu">.622</span><span class="op">,</span> 1<span class="fu">.917</span><span class="op">,</span> 1<span class="fu">.732</span><span class="op">,</span> 1<span class="fu">.835</span><span class="op">,</span> 1<span class="fu">.801</span><span class="op">,</span> 1<span class="fu">.664</span><span class="op">,</span> 1<span class="fu">.744</span><span class="op">,</span> 1<span class="fu">.891</span><span class="op">,</span> 1<span class="fu">.85</span><span class="op">,</span> 1<span class="fu">.858</span><span class="op">,</span> 1<span class="fu">.89</span><span class="op">,</span> 2<span class="fu">.108</span><span class="op">,</span> 1<span class="fu">.962</span><span class="op">,</span> 1<span class="fu">.992</span><span class="op">,</span> 1<span class="fu">.972</span><span class="op">,</span> 2<span class="fu">.026</span><span class="op">,</span> 1<span class="fu">.868</span><span class="op">,</span> 1<span class="fu">.949</span><span class="op">,</span> 2<span class="fu">.033</span><span class="op">,</span> 1<span class="fu">.887</span><span class="op">,</span> 1<span class="fu">.856</span><span class="op">,</span> 2<span class="fu">.112</span><span class="op">,</span> 2<span class="fu">.117</span><span class="op">,</span> 2<span class="fu">.129</span><span class="op">,</span> 1<span class="fu">.994</span><span class="op">,</span> 2<span class="fu">.03</span><span class="op">,</span> 1<span class="fu">.925</span><span class="op">,</span> 1<span class="fu">.916</span><span class="op">,</span> 1<span class="fu">.949</span><span class="op">,</span> 1<span class="fu">.956</span><span class="op">,</span> 2<span class="fu">.119</span><span class="op">,</span> 1<span class="fu">.894</span><span class="op">,</span> 2<span class="fu">.034</span><span class="op">,</span> 1<span class="fu">.766</span><span class="op">,</span> 1<span class="fu">.994</span><span class="op">,</span> 1<span class="fu">.985</span><span class="op">,</span> 2<span class="fu">.068</span><span class="op">,</span> 1<span class="fu">.796</span><span class="op">,</span> 2<span class="fu">.172</span><span class="op">,</span> 2<span class="fu">.09</span><span class="op">,</span> 2<span class="fu">.017</span><span class="op">,</span> 2<span class="fu">.152</span><span class="op">,</span> 2<span class="fu">.238</span><span class="op">,</span> 2<span class="fu">.027</span><span class="op">,</span> 2<span class="fu">.214</span><span class="op">,</span> 2<span class="fu">.159</span><span class="op">,</span> 2<span class="fu">.098</span><span class="op">,</span> 1<span class="fu">.963</span><span class="op">,</span> 2<span class="fu">.063</span><span class="op">,</span> 2<span class="fu">.292</span><span class="op">,</span> 2<span class="fu">.21</span><span class="op">,</span> 1<span class="fu">.84</span><span class="op">,</span> 2<span class="fu">.102</span><span class="op">,</span> 2<span class="fu">.1</span><span class="op">,</span> 2<span class="fu">.086</span><span class="op">,</span> 2<span class="fu">.008</span><span class="op">,</span> 2<span class="fu">.048</span><span class="op">,</span> 1<span class="fu">.978</span><span class="op">,</span> 1<span class="fu">.87</span><span class="op">,</span> 2<span class="fu">.16</span><span class="op">,</span> 1<span class="fu">.977</span><span class="op">,</span> 2<span class="fu">.335</span><span class="op">,</span> 2<span class="fu">.053</span><span class="op">,</span> 2<span class="fu">.084</span><span class="op">,</span> 2<span class="fu">.056</span><span class="op">,</span> 2<span class="fu">.005</span><span class="op">,</span> 2<span class="fu">.161</span><span class="op">,</span> 2<span class="fu">.088</span><span class="op">,</span> 2<span class="fu">.161</span><span class="op">,</span> 2<span class="fu">.078</span><span class="op">,</span> 2<span class="fu">.038</span><span class="op">,</span> 2<span class="fu">.117</span><span class="op">,</span> 2<span class="fu">.148</span><span class="op">,</span> 2<span class="fu">.043</span><span class="op">,</span> 2<span class="fu">.342</span><span class="op">,</span> 2<span class="fu">.142</span><span class="op">,</span> 2<span class="fu">.306</span><span class="op">,</span> 2<span class="fu">.043</span><span class="op">,</span> 1<span class="fu">.881</span><span class="op">,</span> 1<span class="fu">.918</span><span class="op">,</span> 2<span class="fu">.252</span><span class="in">)</span></span>
<span id="cb3-223"><a href="#cb3-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-224"><a href="#cb3-224" aria-hidden="true" tabindex="-1"></a># UI</span>
<span id="cb3-225"><a href="#cb3-225" aria-hidden="true" tabindex="-1"></a>ui &lt;- fluidPage<span class="in">(</span></span>
<span id="cb3-226"><a href="#cb3-226" aria-hidden="true" tabindex="-1"></a>  titlePanel<span class="in">(</span>"V̇O2-Modellfunktion"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-227"><a href="#cb3-227" aria-hidden="true" tabindex="-1"></a>  fluidRow<span class="in">(</span></span>
<span id="cb3-228"><a href="#cb3-228" aria-hidden="true" tabindex="-1"></a>    column<span class="in">(</span>3<span class="op">,</span></span>
<span id="cb3-229"><a href="#cb3-229" aria-hidden="true" tabindex="-1"></a>           style = "height<span class="in">:</span> 90vh; overflow-y<span class="in">:</span> auto;"<span class="op">,</span></span>
<span id="cb3-230"><a href="#cb3-230" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb3-231"><a href="#cb3-231" aria-hidden="true" tabindex="-1"></a>           tags$h4<span class="in">(</span>tags$strong<span class="in">(</span>"Modellparameter<span class="in">:</span>"<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-232"><a href="#cb3-232" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"VO2"<span class="op">,</span> "V̇O2 Amplitude"<span class="op">,</span> min = 0<span class="fu">.0</span><span class="op">,</span> max = 7<span class="fu">.0</span><span class="op">,</span> value = 1<span class="fu">.7</span><span class="op">,</span> step = 0<span class="fu">.001</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-233"><a href="#cb3-233" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"Tau"<span class="op">,</span> "Tau"<span class="op">,</span> min = 5<span class="op">,</span> max = 360<span class="op">,</span> value = 23<span class="op">,</span> step = 1<span class="fu">.0</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-234"><a href="#cb3-234" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"VO2_Start"<span class="op">,</span> "V̇O2 Start"<span class="op">,</span> min = 0<span class="fu">.0</span><span class="op">,</span> max = 4<span class="fu">.0</span><span class="op">,</span> value = 0<span class="fu">.4</span><span class="op">,</span> step = 0<span class="fu">.001</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-235"><a href="#cb3-235" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"VO2_Ruhe"<span class="op">,</span> "V̇O2 Ruhe"<span class="op">,</span> min = 0<span class="op">,</span> max = 1<span class="op">,</span> value = 0<span class="fu">.3</span><span class="op">,</span> step = 0<span class="fu">.001</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-236"><a href="#cb3-236" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"time_delay"<span class="op">,</span> "Zeitverzögerung"<span class="op">,</span> min = 0<span class="op">,</span> max = 300<span class="op">,</span> value = 11<span class="op">,</span> step = 1<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-237"><a href="#cb3-237" aria-hidden="true" tabindex="-1"></a>           conditionalPanel<span class="in">(</span></span>
<span id="cb3-238"><a href="#cb3-238" aria-hidden="true" tabindex="-1"></a>             condition = "output<span class="fu">.showFitSlider</span>"<span class="op">,</span></span>
<span id="cb3-239"><a href="#cb3-239" aria-hidden="true" tabindex="-1"></a>             sliderInput<span class="in">(</span>"nlsLM_end"<span class="op">,</span> "nlsLM Ende"<span class="op">,</span> min = 10<span class="op">,</span> max = max<span class="in">(</span>t_data<span class="in">)</span><span class="op">,</span> value = max<span class="in">(</span>t_data<span class="in">)</span><span class="op">,</span> step = 1<span class="in">)</span></span>
<span id="cb3-240"><a href="#cb3-240" aria-hidden="true" tabindex="-1"></a>           <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-241"><a href="#cb3-241" aria-hidden="true" tabindex="-1"></a>           actionButton<span class="in">(</span>"toggle_data"<span class="op">,</span> "Beispieldaten einfügen"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-242"><a href="#cb3-242" aria-hidden="true" tabindex="-1"></a>           br<span class="in">()</span><span class="op">,</span> br<span class="in">()</span><span class="op">,</span></span>
<span id="cb3-243"><a href="#cb3-243" aria-hidden="true" tabindex="-1"></a>           fileInput<span class="in">(</span>"file_upload"<span class="op">,</span> "CSV-Datei hochladen"<span class="op">,</span> accept = "<span class="fu">.csv</span>"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-244"><a href="#cb3-244" aria-hidden="true" tabindex="-1"></a>           tags$h4<span class="in">(</span>tags$strong<span class="in">(</span>"Modelanpassung<span class="in">:</span>"<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-245"><a href="#cb3-245" aria-hidden="true" tabindex="-1"></a>           actionButton<span class="in">(</span>"optimize"<span class="op">,</span> "nlsLM - Fit"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-246"><a href="#cb3-246" aria-hidden="true" tabindex="-1"></a>           br<span class="in">()</span><span class="op">,</span> br<span class="in">()</span><span class="op">,</span></span>
<span id="cb3-247"><a href="#cb3-247" aria-hidden="true" tabindex="-1"></a>           tags$h4<span class="in">(</span>tags$strong<span class="in">(</span>"Berechnung - Ruhesauerstoffaufnahme<span class="in">:</span>"<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-248"><a href="#cb3-248" aria-hidden="true" tabindex="-1"></a>           radioButtons<span class="in">(</span>"geschlecht"<span class="op">,</span> "Geschlecht<span class="in">:</span>"<span class="op">,</span> choices = c<span class="in">(</span>"Männlich"<span class="op">,</span> "Weiblich"<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-249"><a href="#cb3-249" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"koerpermasse"<span class="op">,</span> "Körpermasse <span class="ex">[</span><span class="ss">kg</span><span class="ex">]</span><span class="in">:</span>"<span class="op">,</span> min = 40<span class="op">,</span> max = 150<span class="op">,</span> value = 55<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-250"><a href="#cb3-250" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"koerperlaenge"<span class="op">,</span> "Körperlänge <span class="ex">[</span><span class="ss">cm</span><span class="ex">]</span><span class="in">:</span>"<span class="op">,</span> min = 140<span class="op">,</span> max = 220<span class="op">,</span> value = 160<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-251"><a href="#cb3-251" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"alter"<span class="op">,</span> "Alter <span class="ex">[</span><span class="ss">Jahre</span><span class="ex">]</span><span class="in">:</span>"<span class="op">,</span> min = 18<span class="op">,</span> max = 100<span class="op">,</span> value = 24<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-252"><a href="#cb3-252" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"rq"<span class="op">,</span> "RQ<span class="in">:</span>"<span class="op">,</span> min = 0<span class="fu">.7</span><span class="op">,</span> max = 1<span class="fu">.0</span><span class="op">,</span> value = 0<span class="fu">.77</span><span class="op">,</span> step = 0<span class="fu">.01</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-253"><a href="#cb3-253" aria-hidden="true" tabindex="-1"></a>           actionButton<span class="in">(</span>"berechne_vo2_ruhe"<span class="op">,</span> "VO2 Ruhe berechnen"<span class="in">)</span></span>
<span id="cb3-254"><a href="#cb3-254" aria-hidden="true" tabindex="-1"></a>    <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-255"><a href="#cb3-255" aria-hidden="true" tabindex="-1"></a>    mainPanel<span class="in">(</span></span>
<span id="cb3-256"><a href="#cb3-256" aria-hidden="true" tabindex="-1"></a>      width = 9<span class="op">,</span></span>
<span id="cb3-257"><a href="#cb3-257" aria-hidden="true" tabindex="-1"></a>      plotlyOutput<span class="in">(</span>"plot"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-258"><a href="#cb3-258" aria-hidden="true" tabindex="-1"></a>      uiOutput<span class="in">(</span>"instructions"<span class="in">)</span></span>
<span id="cb3-259"><a href="#cb3-259" aria-hidden="true" tabindex="-1"></a>    <span class="in">)</span></span>
<span id="cb3-260"><a href="#cb3-260" aria-hidden="true" tabindex="-1"></a>  <span class="in">)</span></span>
<span id="cb3-261"><a href="#cb3-261" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb3-262"><a href="#cb3-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-263"><a href="#cb3-263" aria-hidden="true" tabindex="-1"></a># Server</span>
<span id="cb3-264"><a href="#cb3-264" aria-hidden="true" tabindex="-1"></a>server &lt;- function<span class="in">(</span>input<span class="op">,</span> output<span class="op">,</span> session<span class="in">)</span> {</span>
<span id="cb3-265"><a href="#cb3-265" aria-hidden="true" tabindex="-1"></a>  show_data &lt;- reactiveVal(FALSE)</span>
<span id="cb3-266"><a href="#cb3-266" aria-hidden="true" tabindex="-1"></a>  uploaded_data &lt;- reactiveVal(NULL)</span>
<span id="cb3-267"><a href="#cb3-267" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-268"><a href="#cb3-268" aria-hidden="true" tabindex="-1"></a>  observeEvent(input$toggle_data<span class="op">,</span> {</span>
<span id="cb3-269"><a href="#cb3-269" aria-hidden="true" tabindex="-1"></a>    show_data(!show_data())</span>
<span id="cb3-270"><a href="#cb3-270" aria-hidden="true" tabindex="-1"></a>    max_t &lt;- max(t_data)</span>
<span id="cb3-271"><a href="#cb3-271" aria-hidden="true" tabindex="-1"></a>    updateSliderInput(session<span class="op">,</span> "nlsLM_end"<span class="op">,</span> min = input$time_delay<span class="op">,</span> max = max_t<span class="op">,</span> value = max_t)</span>
<span id="cb3-272"><a href="#cb3-272" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-273"><a href="#cb3-273" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-274"><a href="#cb3-274" aria-hidden="true" tabindex="-1"></a>  observeEvent(input$file_upload<span class="op">,</span> {</span>
<span id="cb3-275"><a href="#cb3-275" aria-hidden="true" tabindex="-1"></a>    req(input$file_upload)</span>
<span id="cb3-276"><a href="#cb3-276" aria-hidden="true" tabindex="-1"></a>    df &lt;- read<span class="fu">.csv</span><span class="in">(</span>input$file_upload$datapath<span class="in">)</span></span>
<span id="cb3-277"><a href="#cb3-277" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>"t_s" %in% names<span class="in">(</span>df<span class="in">)</span> <span class="op">&amp;&amp;</span> "VO2_t" %in% names<span class="in">(</span>df<span class="in">))</span> {</span>
<span id="cb3-278"><a href="#cb3-278" aria-hidden="true" tabindex="-1"></a>      uploaded_data(df)</span>
<span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a>      show_data(TRUE)</span>
<span id="cb3-280"><a href="#cb3-280" aria-hidden="true" tabindex="-1"></a>      max_t &lt;- max(df$t_s)</span>
<span id="cb3-281"><a href="#cb3-281" aria-hidden="true" tabindex="-1"></a>      updateSliderInput(session<span class="op">,</span> "nlsLM_end"<span class="op">,</span> min = input$time_delay<span class="op">,</span> max = max_t<span class="op">,</span> value = max_t)</span>
<span id="cb3-282"><a href="#cb3-282" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-283"><a href="#cb3-283" aria-hidden="true" tabindex="-1"></a>      showModal(modalDialog(</span>
<span id="cb3-284"><a href="#cb3-284" aria-hidden="true" tabindex="-1"></a>        title = "Invalid CSV"<span class="op">,</span></span>
<span id="cb3-285"><a href="#cb3-285" aria-hidden="true" tabindex="-1"></a>        "Die csv-Datei muss 't_s' und 'VO2_t' als Spaltennamen beinhalten."<span class="op">,</span></span>
<span id="cb3-286"><a href="#cb3-286" aria-hidden="true" tabindex="-1"></a>        easyClose = TRUE<span class="op">,</span></span>
<span id="cb3-287"><a href="#cb3-287" aria-hidden="true" tabindex="-1"></a>        footer = NULL</span>
<span id="cb3-288"><a href="#cb3-288" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb3-289"><a href="#cb3-289" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-290"><a href="#cb3-290" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-291"><a href="#cb3-291" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-292"><a href="#cb3-292" aria-hidden="true" tabindex="-1"></a>  # Neue Funktionen zur Berechnung des Grundumsatzes und RMR</span>
<span id="cb3-293"><a href="#cb3-293" aria-hidden="true" tabindex="-1"></a>  berechne_grundumsatz &lt;- function<span class="in">(</span>geschlecht<span class="op">,</span> masse<span class="op">,</span> laenge<span class="op">,</span> alter<span class="in">)</span> {</span>
<span id="cb3-294"><a href="#cb3-294" aria-hidden="true" tabindex="-1"></a>    if (geschlecht == "Männlich") {</span>
<span id="cb3-295"><a href="#cb3-295" aria-hidden="true" tabindex="-1"></a>      return(66<span class="fu">.5</span> <span class="op">+</span> <span class="in">(</span>13<span class="fu">.75</span> <span class="op">*</span> masse<span class="in">)</span> <span class="op">+</span> <span class="in">(</span>5<span class="fu">.003</span> <span class="op">*</span> laenge<span class="in">)</span> - <span class="in">(</span>6<span class="fu">.775</span> <span class="op">*</span> alter<span class="in">)</span>)</span>
<span id="cb3-296"><a href="#cb3-296" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-297"><a href="#cb3-297" aria-hidden="true" tabindex="-1"></a>      return(655<span class="fu">.1</span> <span class="op">+</span> <span class="in">(</span>9<span class="fu">.563</span> <span class="op">*</span> masse<span class="in">)</span> <span class="op">+</span> <span class="in">(</span>1<span class="fu">.850</span> <span class="op">*</span> laenge<span class="in">)</span> - <span class="in">(</span>4<span class="fu">.676</span> <span class="op">*</span> alter<span class="in">)</span>)</span>
<span id="cb3-298"><a href="#cb3-298" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-299"><a href="#cb3-299" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-300"><a href="#cb3-300" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-301"><a href="#cb3-301" aria-hidden="true" tabindex="-1"></a>  berechne_rmr &lt;- function(grundumsatz<span class="op">,</span> rq<span class="op">,</span> geschlecht) {</span>
<span id="cb3-302"><a href="#cb3-302" aria-hidden="true" tabindex="-1"></a>    ka &lt;- 19<span class="fu">.946</span>  # Annahme für RQ = 0<span class="fu">.77</span><span class="op">,</span> passen Sie dies an<span class="op">,</span> wenn nötig</span>
<span id="cb3-303"><a href="#cb3-303" aria-hidden="true" tabindex="-1"></a>    faktor &lt;- if<span class="in">(</span>geschlecht == "Männlich"<span class="in">)</span> 1<span class="fu">.287</span> else 1<span class="fu">.278</span></span>
<span id="cb3-304"><a href="#cb3-304" aria-hidden="true" tabindex="-1"></a>    return<span class="in">((</span>grundumsatz / <span class="in">(</span>24 <span class="op">*</span> 60 <span class="op">*</span> ka<span class="in">))</span> <span class="op">*</span> 4<span class="fu">.1868</span> <span class="op">*</span> faktor<span class="in">)</span></span>
<span id="cb3-305"><a href="#cb3-305" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-306"><a href="#cb3-306" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-307"><a href="#cb3-307" aria-hidden="true" tabindex="-1"></a>  # Reaktion auf den Klick des "VO2 Ruhe berechnen" Buttons</span>
<span id="cb3-308"><a href="#cb3-308" aria-hidden="true" tabindex="-1"></a>  observeEvent<span class="in">(</span>input$berechne_vo2_ruhe<span class="op">,</span> <span class="er">{</span></span>
<span id="cb3-309"><a href="#cb3-309" aria-hidden="true" tabindex="-1"></a>    grundumsatz &lt;- berechne_grundumsatz(</span>
<span id="cb3-310"><a href="#cb3-310" aria-hidden="true" tabindex="-1"></a>      input$geschlecht<span class="op">,</span></span>
<span id="cb3-311"><a href="#cb3-311" aria-hidden="true" tabindex="-1"></a>      input$koerpermasse<span class="op">,</span></span>
<span id="cb3-312"><a href="#cb3-312" aria-hidden="true" tabindex="-1"></a>      input$koerperlaenge<span class="op">,</span></span>
<span id="cb3-313"><a href="#cb3-313" aria-hidden="true" tabindex="-1"></a>      input$alter</span>
<span id="cb3-314"><a href="#cb3-314" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-315"><a href="#cb3-315" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-316"><a href="#cb3-316" aria-hidden="true" tabindex="-1"></a>    rmr &lt;- berechne_rmr<span class="in">(</span>grundumsatz<span class="op">,</span> input$rq<span class="op">,</span> input$geschlecht<span class="in">)</span></span>
<span id="cb3-317"><a href="#cb3-317" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-318"><a href="#cb3-318" aria-hidden="true" tabindex="-1"></a>    # Aktualisieren Sie den VO2_Ruhe Slider mit dem berechneten Wert</span>
<span id="cb3-319"><a href="#cb3-319" aria-hidden="true" tabindex="-1"></a>    updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2_Ruhe"<span class="op">,</span> value = round<span class="in">(</span>rmr<span class="op">,</span> 3<span class="in">))</span></span>
<span id="cb3-320"><a href="#cb3-320" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-321"><a href="#cb3-321" aria-hidden="true" tabindex="-1"></a>    # Zeigen Sie eine Benachrichtigung mit dem berechneten Wert an</span>
<span id="cb3-322"><a href="#cb3-322" aria-hidden="true" tabindex="-1"></a>    showNotification<span class="in">(</span>paste<span class="in">(</span>"Berechnete Ruhesauerstoffaufnahme<span class="in">:</span>"<span class="op">,</span> round<span class="in">(</span>rmr<span class="op">,</span> 3<span class="in">)</span><span class="op">,</span> "l/min"<span class="in">)</span><span class="op">,</span> type = "message"<span class="in">)</span></span>
<span id="cb3-323"><a href="#cb3-323" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-324"><a href="#cb3-324" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-325"><a href="#cb3-325" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-326"><a href="#cb3-326" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-327"><a href="#cb3-327" aria-hidden="true" tabindex="-1"></a>  observe<span class="in">(</span><span class="er">{</span></span>
<span id="cb3-328"><a href="#cb3-328" aria-hidden="true" tabindex="-1"></a>    if (input$VO2_Start &lt; input$VO2_Ruhe) {</span>
<span id="cb3-329"><a href="#cb3-329" aria-hidden="true" tabindex="-1"></a>      updateSliderInput(session<span class="op">,</span> "VO2_Start"<span class="op">,</span> value = input$VO2_Ruhe)</span>
<span id="cb3-330"><a href="#cb3-330" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-331"><a href="#cb3-331" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-332"><a href="#cb3-332" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-333"><a href="#cb3-333" aria-hidden="true" tabindex="-1"></a>  output$showFitSlider &lt;- reactive<span class="in">(</span><span class="er">{</span></span>
<span id="cb3-334"><a href="#cb3-334" aria-hidden="true" tabindex="-1"></a>    show_data()</span>
<span id="cb3-335"><a href="#cb3-335" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-336"><a href="#cb3-336" aria-hidden="true" tabindex="-1"></a>  outputOptions<span class="in">(</span>output<span class="op">,</span> "showFitSlider"<span class="op">,</span> suspendWhenHidden = FALSE<span class="in">)</span></span>
<span id="cb3-337"><a href="#cb3-337" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-338"><a href="#cb3-338" aria-hidden="true" tabindex="-1"></a>  observeEvent<span class="in">(</span>input$optimize<span class="op">,</span> <span class="er">{</span></span>
<span id="cb3-339"><a href="#cb3-339" aria-hidden="true" tabindex="-1"></a>    if (show_data()) {</span>
<span id="cb3-340"><a href="#cb3-340" aria-hidden="true" tabindex="-1"></a>      Beispieldaten &lt;- if (is<span class="fu">.null</span><span class="in">(</span>uploaded_data<span class="in">())</span>) {</span>
<span id="cb3-341"><a href="#cb3-341" aria-hidden="true" tabindex="-1"></a>        data<span class="fu">.frame</span><span class="in">(</span>t_s = t_data<span class="op">,</span> VO2_t = VO2_data<span class="in">)</span></span>
<span id="cb3-342"><a href="#cb3-342" aria-hidden="true" tabindex="-1"></a>      } else {</span>
<span id="cb3-343"><a href="#cb3-343" aria-hidden="true" tabindex="-1"></a>        uploaded_data()</span>
<span id="cb3-344"><a href="#cb3-344" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-345"><a href="#cb3-345" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-346"><a href="#cb3-346" aria-hidden="true" tabindex="-1"></a>      t_delay &lt;- isolate(input$time_delay)</span>
<span id="cb3-347"><a href="#cb3-347" aria-hidden="true" tabindex="-1"></a>      nlsLM_end &lt;- isolate(input$nlsLM_end)</span>
<span id="cb3-348"><a href="#cb3-348" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-349"><a href="#cb3-349" aria-hidden="true" tabindex="-1"></a>      # Finde den nächstgelegenen Zeitpunkt zu t_delay</span>
<span id="cb3-350"><a href="#cb3-350" aria-hidden="true" tabindex="-1"></a>      closest_index &lt;- which<span class="fu">.min</span><span class="in">(</span>abs<span class="in">(</span>Beispieldaten$t_s - t_delay<span class="in">))</span></span>
<span id="cb3-351"><a href="#cb3-351" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-352"><a href="#cb3-352" aria-hidden="true" tabindex="-1"></a>      # Setze VO2_Start auf den gerundeten Wert des nächsten Punktes</span>
<span id="cb3-353"><a href="#cb3-353" aria-hidden="true" tabindex="-1"></a>      VO2_Start &lt;- round<span class="in">(</span>Beispieldaten$VO2_t<span class="ex">[</span><span class="ss">closest_index</span><span class="ex">]</span><span class="op">,</span> 3<span class="in">)</span></span>
<span id="cb3-354"><a href="#cb3-354" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-355"><a href="#cb3-355" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2_Start"<span class="op">,</span> value = VO2_Start<span class="in">)</span></span>
<span id="cb3-356"><a href="#cb3-356" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-357"><a href="#cb3-357" aria-hidden="true" tabindex="-1"></a>      data_subset &lt;- Beispieldaten<span class="ex">[</span><span class="ss">Beispieldaten</span><span class="op">$</span><span class="ss">t_s </span><span class="op">&gt;</span>= t_delay <span class="op">&amp;</span> Beispieldaten$t_s &lt;= nlsLM_end<span class="op">,</span> ]</span>
<span id="cb3-358"><a href="#cb3-358" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-359"><a href="#cb3-359" aria-hidden="true" tabindex="-1"></a>      start_values &lt;- list<span class="in">(</span>VO2 = isolate<span class="in">(</span>input$VO2<span class="in">)</span><span class="op">,</span> Tau = isolate<span class="in">(</span>input$Tau<span class="in">))</span></span>
<span id="cb3-360"><a href="#cb3-360" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-361"><a href="#cb3-361" aria-hidden="true" tabindex="-1"></a>      fit &lt;- try<span class="in">(</span>nlsLM<span class="in">(</span>VO2_t <span class="op">~</span> VO2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>t_s - t_delay<span class="in">)</span> / Tau<span class="in">))</span> <span class="op">+</span> VO2_Start<span class="op">,</span></span>
<span id="cb3-362"><a href="#cb3-362" aria-hidden="true" tabindex="-1"></a>                       data = data_subset<span class="op">,</span></span>
<span id="cb3-363"><a href="#cb3-363" aria-hidden="true" tabindex="-1"></a>                       start = start_values<span class="op">,</span></span>
<span id="cb3-364"><a href="#cb3-364" aria-hidden="true" tabindex="-1"></a>                       lower = c<span class="in">(</span>VO2 = 0<span class="fu">.5</span><span class="op">,</span> Tau = 5<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-365"><a href="#cb3-365" aria-hidden="true" tabindex="-1"></a>                       upper = c<span class="in">(</span>VO2 = 7<span class="fu">.0</span><span class="op">,</span> Tau = 360<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-366"><a href="#cb3-366" aria-hidden="true" tabindex="-1"></a>                       control = nls<span class="fu">.control</span><span class="in">(</span>maxiter = 1024<span class="in">))</span><span class="op">,</span> silent = TRUE<span class="in">)</span></span>
<span id="cb3-367"><a href="#cb3-367" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-368"><a href="#cb3-368" aria-hidden="true" tabindex="-1"></a>      if <span class="in">(</span>!inherits<span class="in">(</span>fit<span class="op">,</span> "try-error"<span class="in">))</span> {</span>
<span id="cb3-369"><a href="#cb3-369" aria-hidden="true" tabindex="-1"></a>        params &lt;- as<span class="fu">.list</span><span class="in">(</span>coef<span class="in">(</span>fit<span class="in">))</span></span>
<span id="cb3-370"><a href="#cb3-370" aria-hidden="true" tabindex="-1"></a>        updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2"<span class="op">,</span> value = params$VO2<span class="in">)</span></span>
<span id="cb3-371"><a href="#cb3-371" aria-hidden="true" tabindex="-1"></a>        updateSliderInput<span class="in">(</span>session<span class="op">,</span> "Tau"<span class="op">,</span> value = params$Tau<span class="in">)</span></span>
<span id="cb3-372"><a href="#cb3-372" aria-hidden="true" tabindex="-1"></a>      } else {</span>
<span id="cb3-373"><a href="#cb3-373" aria-hidden="true" tabindex="-1"></a>        showModal(modalDialog(</span>
<span id="cb3-374"><a href="#cb3-374" aria-hidden="true" tabindex="-1"></a>          title = "nlsLM fehlgeschlagen"<span class="op">,</span></span>
<span id="cb3-375"><a href="#cb3-375" aria-hidden="true" tabindex="-1"></a>          "Die nicht-lineare Regression mittels Levenberg-Marquardt-Algorithmus konnte nicht erfolgreich durchgeführt werden."<span class="op">,</span></span>
<span id="cb3-376"><a href="#cb3-376" aria-hidden="true" tabindex="-1"></a>          easyClose = TRUE<span class="op">,</span></span>
<span id="cb3-377"><a href="#cb3-377" aria-hidden="true" tabindex="-1"></a>          footer = NULL</span>
<span id="cb3-378"><a href="#cb3-378" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb3-379"><a href="#cb3-379" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-380"><a href="#cb3-380" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-381"><a href="#cb3-381" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-382"><a href="#cb3-382" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-383"><a href="#cb3-383" aria-hidden="true" tabindex="-1"></a>  output$plot &lt;- renderPlotly<span class="in">(</span><span class="er">{</span></span>
<span id="cb3-384"><a href="#cb3-384" aria-hidden="true" tabindex="-1"></a>    VO2 &lt;- input$VO2</span>
<span id="cb3-385"><a href="#cb3-385" aria-hidden="true" tabindex="-1"></a>    Tau &lt;- input$Tau</span>
<span id="cb3-386"><a href="#cb3-386" aria-hidden="true" tabindex="-1"></a>    VO2_Start &lt;- input$VO2_Start</span>
<span id="cb3-387"><a href="#cb3-387" aria-hidden="true" tabindex="-1"></a>    t_delay &lt;- input$time_delay</span>
<span id="cb3-388"><a href="#cb3-388" aria-hidden="true" tabindex="-1"></a>    VO2_Ruhe &lt;- input$VO2_Ruhe</span>
<span id="cb3-389"><a href="#cb3-389" aria-hidden="true" tabindex="-1"></a>    nlsLM_end &lt;- input$nlsLM_end</span>
<span id="cb3-390"><a href="#cb3-390" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-391"><a href="#cb3-391" aria-hidden="true" tabindex="-1"></a>    model_function &lt;- function(t_s<span class="op">,</span> VO2<span class="op">,</span> Tau<span class="op">,</span> VO2_Start<span class="op">,</span> t_delay) {</span>
<span id="cb3-392"><a href="#cb3-392" aria-hidden="true" tabindex="-1"></a>      VO2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>t_s - t_delay<span class="in">)</span> / Tau<span class="in">))</span> <span class="op">+</span> VO2_Start</span>
<span id="cb3-393"><a href="#cb3-393" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-394"><a href="#cb3-394" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-395"><a href="#cb3-395" aria-hidden="true" tabindex="-1"></a>    Beispieldaten &lt;- if (show_data() <span class="op">&amp;&amp;</span> !is<span class="fu">.null</span><span class="in">(</span>uploaded_data<span class="in">())</span>) {</span>
<span id="cb3-396"><a href="#cb3-396" aria-hidden="true" tabindex="-1"></a>      uploaded_data()</span>
<span id="cb3-397"><a href="#cb3-397" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-398"><a href="#cb3-398" aria-hidden="true" tabindex="-1"></a>      data<span class="fu">.frame</span><span class="in">(</span>t_s = t_data<span class="op">,</span> VO2_t = VO2_data<span class="in">)</span></span>
<span id="cb3-399"><a href="#cb3-399" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-400"><a href="#cb3-400" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-401"><a href="#cb3-401" aria-hidden="true" tabindex="-1"></a>    tau4 &lt;- 4 <span class="op">*</span> Tau</span>
<span id="cb3-402"><a href="#cb3-402" aria-hidden="true" tabindex="-1"></a>    max_t &lt;- max<span class="in">(</span>Beispieldaten$t_s<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span></span>
<span id="cb3-403"><a href="#cb3-403" aria-hidden="true" tabindex="-1"></a>    max_x &lt;- max<span class="in">(</span>1<span class="fu">.05</span> <span class="op">*</span> tau4 <span class="op">+</span> t_delay<span class="op">,</span> max_t <span class="op">*</span> 1<span class="fu">.05</span><span class="in">)</span></span>
<span id="cb3-404"><a href="#cb3-404" aria-hidden="true" tabindex="-1"></a>    t_s &lt;- seq<span class="in">(</span>0<span class="op">,</span> max_x <span class="op">*</span> 1<span class="fu">.20</span><span class="op">,</span> by = 1<span class="in">)</span></span>
<span id="cb3-405"><a href="#cb3-405" aria-hidden="true" tabindex="-1"></a>    model_values &lt;- ifelse<span class="in">(</span>t_s <span class="op">&gt;</span>= t_delay<span class="op">,</span> model_function<span class="in">(</span>t_s<span class="op">,</span> VO2<span class="op">,</span> Tau<span class="op">,</span> VO2_Start<span class="op">,</span> t_delay<span class="in">)</span><span class="op">,</span> NA<span class="in">)</span></span>
<span id="cb3-406"><a href="#cb3-406" aria-hidden="true" tabindex="-1"></a>    VO2_SS_gross &lt;- model_function<span class="in">(</span>tau4 <span class="op">+</span> t_delay<span class="op">,</span> VO2<span class="op">,</span> Tau<span class="op">,</span> VO2_Start<span class="op">,</span> t_delay<span class="in">)</span></span>
<span id="cb3-407"><a href="#cb3-407" aria-hidden="true" tabindex="-1"></a>    VO2_SS_net &lt;- VO2_SS_gross - VO2_Ruhe</span>
<span id="cb3-408"><a href="#cb3-408" aria-hidden="true" tabindex="-1"></a>    max_y &lt;- max<span class="in">(</span>1<span class="fu">.05</span> <span class="op">*</span> VO2_SS_gross<span class="op">,</span> max<span class="in">(</span>Beispieldaten$VO2_t<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span> <span class="op">*</span> 1<span class="fu">.05</span><span class="in">)</span></span>
<span id="cb3-409"><a href="#cb3-409" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-410"><a href="#cb3-410" aria-hidden="true" tabindex="-1"></a>    eq_text &lt;- sprintf<span class="in">(</span>"V̇O₂ <span class="in">(</span>t<span class="in">)</span> = %<span class="fu">.3f</span> <span class="op">*</span> <span class="in">(</span>1 - e&lt;sup<span class="op">&gt;</span>-<span class="in">(</span>t - %<span class="fu">.2f</span><span class="in">)</span> / %<span class="fu">.2f</span>&lt;/sup<span class="op">&gt;</span><span class="in">)</span> <span class="op">+</span> %<span class="fu">.3f</span>"<span class="op">,</span></span>
<span id="cb3-411"><a href="#cb3-411" aria-hidden="true" tabindex="-1"></a>                       VO2<span class="op">,</span> t_delay<span class="op">,</span> Tau<span class="op">,</span> VO2_Start<span class="in">)</span></span>
<span id="cb3-412"><a href="#cb3-412" aria-hidden="true" tabindex="-1"></a>    VO2_SS_gross_text &lt;- sprintf<span class="in">(</span>"V̇O₂ &lt;sub<span class="op">&gt;</span>SS<span class="op">,</span>Brutto&lt;/sub<span class="op">&gt;</span><span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> VO2_SS_gross<span class="in">)</span></span>
<span id="cb3-413"><a href="#cb3-413" aria-hidden="true" tabindex="-1"></a>    VO2_SS_net_text &lt;- sprintf<span class="in">(</span>"V̇O₂ &lt;sub<span class="op">&gt;</span>SS<span class="op">,</span>Netto&lt;/sub<span class="op">&gt;</span><span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> VO2_SS_net<span class="in">)</span></span>
<span id="cb3-414"><a href="#cb3-414" aria-hidden="true" tabindex="-1"></a>    t_halb &lt;- Tau <span class="op">*</span> log<span class="in">(</span>2<span class="in">)</span></span>
<span id="cb3-415"><a href="#cb3-415" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-416"><a href="#cb3-416" aria-hidden="true" tabindex="-1"></a>    shapes &lt;- list<span class="in">(</span></span>
<span id="cb3-417"><a href="#cb3-417" aria-hidden="true" tabindex="-1"></a>      list<span class="in">(</span></span>
<span id="cb3-418"><a href="#cb3-418" aria-hidden="true" tabindex="-1"></a>        type = "line"<span class="op">,</span> x0 = t_delay<span class="op">,</span> x1 = t_delay<span class="op">,</span> y0 = 0<span class="op">,</span> y1 = max_y <span class="op">*</span> 1<span class="fu">.5</span><span class="op">,</span></span>
<span id="cb3-419"><a href="#cb3-419" aria-hidden="true" tabindex="-1"></a>        line = list<span class="in">(</span>color = "gray"<span class="op">,</span> width = 1<span class="op">,</span> dash = "dash"<span class="in">)</span></span>
<span id="cb3-420"><a href="#cb3-420" aria-hidden="true" tabindex="-1"></a>      <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-421"><a href="#cb3-421" aria-hidden="true" tabindex="-1"></a>      list<span class="in">(</span></span>
<span id="cb3-422"><a href="#cb3-422" aria-hidden="true" tabindex="-1"></a>        type = "line"<span class="op">,</span> x0 = Tau <span class="op">+</span> t_delay<span class="op">,</span> x1 = Tau <span class="op">+</span> t_delay<span class="op">,</span> y0 = 0<span class="op">,</span> y1 = max_y <span class="op">*</span> 1<span class="fu">.5</span><span class="op">,</span></span>
<span id="cb3-423"><a href="#cb3-423" aria-hidden="true" tabindex="-1"></a>        line = list<span class="in">(</span>color = "gray"<span class="op">,</span> width = 1<span class="op">,</span> dash = "dash"<span class="in">)</span></span>
<span id="cb3-424"><a href="#cb3-424" aria-hidden="true" tabindex="-1"></a>      <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-425"><a href="#cb3-425" aria-hidden="true" tabindex="-1"></a>      list<span class="in">(</span></span>
<span id="cb3-426"><a href="#cb3-426" aria-hidden="true" tabindex="-1"></a>        type = "line"<span class="op">,</span> x0 = tau4 <span class="op">+</span> t_delay<span class="op">,</span> x1 = tau4 <span class="op">+</span> t_delay<span class="op">,</span> y0 = 0<span class="op">,</span> y1 = max_y <span class="op">*</span> 1<span class="fu">.5</span><span class="op">,</span></span>
<span id="cb3-427"><a href="#cb3-427" aria-hidden="true" tabindex="-1"></a>        line = list<span class="in">(</span>color = "gray"<span class="op">,</span> width = 1<span class="op">,</span> dash = "dash"<span class="in">)</span></span>
<span id="cb3-428"><a href="#cb3-428" aria-hidden="true" tabindex="-1"></a>      <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-429"><a href="#cb3-429" aria-hidden="true" tabindex="-1"></a>      if <span class="in">(</span>show_data<span class="in">())</span> <span class="er">{</span></span>
<span id="cb3-430"><a href="#cb3-430" aria-hidden="true" tabindex="-1"></a>        list(</span>
<span id="cb3-431"><a href="#cb3-431" aria-hidden="true" tabindex="-1"></a>          type = "line"<span class="op">,</span> x0 = nlsLM_end<span class="op">,</span> x1 = nlsLM_end<span class="op">,</span> y0 = 0<span class="op">,</span> y1 = max_y <span class="op">*</span> 1<span class="fu">.5</span><span class="op">,</span></span>
<span id="cb3-432"><a href="#cb3-432" aria-hidden="true" tabindex="-1"></a>          line = list<span class="in">(</span>color = "gray"<span class="op">,</span> width = 1<span class="op">,</span> dash = "dash"<span class="in">)</span></span>
<span id="cb3-433"><a href="#cb3-433" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb3-434"><a href="#cb3-434" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb3-435"><a href="#cb3-435" aria-hidden="true" tabindex="-1"></a>      list<span class="in">(</span></span>
<span id="cb3-436"><a href="#cb3-436" aria-hidden="true" tabindex="-1"></a>        type = "line"<span class="op">,</span> x0 = 0<span class="op">,</span> x1 = max_x<span class="op">,</span> y0 = VO2_Ruhe<span class="op">,</span> y1 = VO2_Ruhe<span class="op">,</span></span>
<span id="cb3-437"><a href="#cb3-437" aria-hidden="true" tabindex="-1"></a>        line = list<span class="in">(</span>color = '<span class="pp">#1CADE4</span>'<span class="op">,</span> width = 1<span class="op">,</span> dash = "solid"<span class="in">)</span></span>
<span id="cb3-438"><a href="#cb3-438" aria-hidden="true" tabindex="-1"></a>      <span class="in">)</span></span>
<span id="cb3-439"><a href="#cb3-439" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-440"><a href="#cb3-440" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-441"><a href="#cb3-441" aria-hidden="true" tabindex="-1"></a>    p &lt;- plot_ly<span class="in">()</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-442"><a href="#cb3-442" aria-hidden="true" tabindex="-1"></a>      add_trace<span class="in">(</span>x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>model_values<span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'lines'<span class="op">,</span></span>
<span id="cb3-443"><a href="#cb3-443" aria-hidden="true" tabindex="-1"></a>                name = 'Modellfunktion'<span class="op">,</span> line = list<span class="in">(</span>color = '<span class="pp">#EF6F6A</span>'<span class="in">))</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-444"><a href="#cb3-444" aria-hidden="true" tabindex="-1"></a>      layout<span class="in">(</span></span>
<span id="cb3-445"><a href="#cb3-445" aria-hidden="true" tabindex="-1"></a>        title = "V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>-Modellfunktion"<span class="op">,</span></span>
<span id="cb3-446"><a href="#cb3-446" aria-hidden="true" tabindex="-1"></a>        margin = list<span class="in">(</span>t = 40<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-447"><a href="#cb3-447" aria-hidden="true" tabindex="-1"></a>        xaxis = list<span class="in">(</span>title = "t <span class="ex">[</span><span class="ss">s</span><span class="ex">]</span>"<span class="op">,</span> range = c<span class="in">(</span>0<span class="op">,</span> max_x<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-448"><a href="#cb3-448" aria-hidden="true" tabindex="-1"></a>        yaxis = list<span class="in">(</span>title = "V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span><span class="in">(</span>t<span class="in">)</span> <span class="ex">[</span><span class="ss">l·min&lt;sup</span><span class="op">&gt;</span>-1&lt;/sup<span class="op">&gt;</span>]"<span class="op">,</span> tickformat = "<span class="fu">.3f</span>"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-449"><a href="#cb3-449" aria-hidden="true" tabindex="-1"></a>        legend = list<span class="in">(</span></span>
<span id="cb3-450"><a href="#cb3-450" aria-hidden="true" tabindex="-1"></a>          x = 0<span class="fu">.80</span><span class="op">,</span></span>
<span id="cb3-451"><a href="#cb3-451" aria-hidden="true" tabindex="-1"></a>          y = 0<span class="fu">.99</span><span class="op">,</span></span>
<span id="cb3-452"><a href="#cb3-452" aria-hidden="true" tabindex="-1"></a>          xanchor = "left"<span class="op">,</span></span>
<span id="cb3-453"><a href="#cb3-453" aria-hidden="true" tabindex="-1"></a>          yanchor = "top"<span class="op">,</span></span>
<span id="cb3-454"><a href="#cb3-454" aria-hidden="true" tabindex="-1"></a>          bgcolor = "rgba<span class="in">(</span>255<span class="op">,</span> 255<span class="op">,</span> 255<span class="op">,</span> 0<span class="fu">.3</span><span class="in">)</span>"<span class="op">,</span></span>
<span id="cb3-455"><a href="#cb3-455" aria-hidden="true" tabindex="-1"></a>          bordercolor = "rgba<span class="in">(</span>0<span class="op">,</span>0<span class="op">,</span>0<span class="op">,</span>0<span class="in">)</span>"<span class="op">,</span></span>
<span id="cb3-456"><a href="#cb3-456" aria-hidden="true" tabindex="-1"></a>          borderwidth = 0</span>
<span id="cb3-457"><a href="#cb3-457" aria-hidden="true" tabindex="-1"></a>        <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-458"><a href="#cb3-458" aria-hidden="true" tabindex="-1"></a>        shapes = shapes<span class="op">,</span></span>
<span id="cb3-459"><a href="#cb3-459" aria-hidden="true" tabindex="-1"></a>        annotations = list<span class="in">(</span></span>
<span id="cb3-460"><a href="#cb3-460" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-461"><a href="#cb3-461" aria-hidden="true" tabindex="-1"></a>            x = max_x <span class="op">*</span> 0<span class="fu">.60</span><span class="op">,</span></span>
<span id="cb3-462"><a href="#cb3-462" aria-hidden="true" tabindex="-1"></a>            y = max_y <span class="op">*</span> 0<span class="fu">.6</span><span class="op">,</span></span>
<span id="cb3-463"><a href="#cb3-463" aria-hidden="true" tabindex="-1"></a>            text = eq_text<span class="op">,</span></span>
<span id="cb3-464"><a href="#cb3-464" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-465"><a href="#cb3-465" aria-hidden="true" tabindex="-1"></a>            xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-466"><a href="#cb3-466" aria-hidden="true" tabindex="-1"></a>            yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-467"><a href="#cb3-467" aria-hidden="true" tabindex="-1"></a>            font = list<span class="in">(</span></span>
<span id="cb3-468"><a href="#cb3-468" aria-hidden="true" tabindex="-1"></a>              family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-469"><a href="#cb3-469" aria-hidden="true" tabindex="-1"></a>              size = 12<span class="op">,</span></span>
<span id="cb3-470"><a href="#cb3-470" aria-hidden="true" tabindex="-1"></a>              color = "black"</span>
<span id="cb3-471"><a href="#cb3-471" aria-hidden="true" tabindex="-1"></a>            <span class="in">)</span></span>
<span id="cb3-472"><a href="#cb3-472" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-473"><a href="#cb3-473" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-474"><a href="#cb3-474" aria-hidden="true" tabindex="-1"></a>            x = max_x <span class="op">*</span> 0<span class="fu">.60</span><span class="op">,</span></span>
<span id="cb3-475"><a href="#cb3-475" aria-hidden="true" tabindex="-1"></a>            y = max_y <span class="op">*</span> 0<span class="fu">.5</span><span class="op">,</span></span>
<span id="cb3-476"><a href="#cb3-476" aria-hidden="true" tabindex="-1"></a>            text = VO2_SS_gross_text<span class="op">,</span></span>
<span id="cb3-477"><a href="#cb3-477" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-478"><a href="#cb3-478" aria-hidden="true" tabindex="-1"></a>            xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-479"><a href="#cb3-479" aria-hidden="true" tabindex="-1"></a>            yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-480"><a href="#cb3-480" aria-hidden="true" tabindex="-1"></a>            font = list<span class="in">(</span></span>
<span id="cb3-481"><a href="#cb3-481" aria-hidden="true" tabindex="-1"></a>              family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-482"><a href="#cb3-482" aria-hidden="true" tabindex="-1"></a>              size = 12<span class="op">,</span></span>
<span id="cb3-483"><a href="#cb3-483" aria-hidden="true" tabindex="-1"></a>              color = "black"</span>
<span id="cb3-484"><a href="#cb3-484" aria-hidden="true" tabindex="-1"></a>            <span class="in">)</span></span>
<span id="cb3-485"><a href="#cb3-485" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-486"><a href="#cb3-486" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-487"><a href="#cb3-487" aria-hidden="true" tabindex="-1"></a>            x = max_x <span class="op">*</span> 0<span class="fu">.60</span><span class="op">,</span></span>
<span id="cb3-488"><a href="#cb3-488" aria-hidden="true" tabindex="-1"></a>            y = max_y <span class="op">*</span> 0<span class="fu">.4</span><span class="op">,</span></span>
<span id="cb3-489"><a href="#cb3-489" aria-hidden="true" tabindex="-1"></a>            text = VO2_SS_net_text<span class="op">,</span></span>
<span id="cb3-490"><a href="#cb3-490" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-491"><a href="#cb3-491" aria-hidden="true" tabindex="-1"></a>            xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-492"><a href="#cb3-492" aria-hidden="true" tabindex="-1"></a>            yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-493"><a href="#cb3-493" aria-hidden="true" tabindex="-1"></a>            font = list<span class="in">(</span></span>
<span id="cb3-494"><a href="#cb3-494" aria-hidden="true" tabindex="-1"></a>              family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-495"><a href="#cb3-495" aria-hidden="true" tabindex="-1"></a>              size = 12<span class="op">,</span></span>
<span id="cb3-496"><a href="#cb3-496" aria-hidden="true" tabindex="-1"></a>              color = "black"</span>
<span id="cb3-497"><a href="#cb3-497" aria-hidden="true" tabindex="-1"></a>            <span class="in">)</span></span>
<span id="cb3-498"><a href="#cb3-498" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-499"><a href="#cb3-499" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-500"><a href="#cb3-500" aria-hidden="true" tabindex="-1"></a>            x = max_x <span class="op">*</span> 0<span class="fu">.60</span><span class="op">,</span></span>
<span id="cb3-501"><a href="#cb3-501" aria-hidden="true" tabindex="-1"></a>            y = max_y <span class="op">*</span> 0<span class="fu">.3</span><span class="op">,</span></span>
<span id="cb3-502"><a href="#cb3-502" aria-hidden="true" tabindex="-1"></a>            text = paste<span class="in">(</span>"T&lt;sub<span class="op">&gt;</span>1/2&lt;/sub<span class="op">&gt;</span><span class="in">:</span>"<span class="op">,</span> round<span class="in">(</span>t_halb<span class="op">,</span> 1<span class="in">)</span><span class="op">,</span>" s"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-503"><a href="#cb3-503" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-504"><a href="#cb3-504" aria-hidden="true" tabindex="-1"></a>            xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-505"><a href="#cb3-505" aria-hidden="true" tabindex="-1"></a>            yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-506"><a href="#cb3-506" aria-hidden="true" tabindex="-1"></a>            font = list<span class="in">(</span></span>
<span id="cb3-507"><a href="#cb3-507" aria-hidden="true" tabindex="-1"></a>              family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-508"><a href="#cb3-508" aria-hidden="true" tabindex="-1"></a>              size = 12<span class="op">,</span></span>
<span id="cb3-509"><a href="#cb3-509" aria-hidden="true" tabindex="-1"></a>              color = "black"</span>
<span id="cb3-510"><a href="#cb3-510" aria-hidden="true" tabindex="-1"></a>            <span class="in">)</span></span>
<span id="cb3-511"><a href="#cb3-511" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-512"><a href="#cb3-512" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-513"><a href="#cb3-513" aria-hidden="true" tabindex="-1"></a>            x = t_delay<span class="op">,</span> y = max_y <span class="op">*</span> 0<span class="fu">.9</span><span class="op">,</span> text = sprintf<span class="in">(</span>"t&lt;sub<span class="op">&gt;</span>delay&lt;/sub<span class="op">&gt;</span><span class="in">:</span> %<span class="fu">.1f</span> s"<span class="op">,</span> t_delay<span class="in">)</span><span class="op">,</span> </span>
<span id="cb3-514"><a href="#cb3-514" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span> xanchor = "left"<span class="op">,</span> yanchor = "bottom"<span class="op">,</span></span>
<span id="cb3-515"><a href="#cb3-515" aria-hidden="true" tabindex="-1"></a>            textangle = -90<span class="op">,</span> font = list<span class="in">(</span>size = 11<span class="in">)</span></span>
<span id="cb3-516"><a href="#cb3-516" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-517"><a href="#cb3-517" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-518"><a href="#cb3-518" aria-hidden="true" tabindex="-1"></a>            x = Tau <span class="op">+</span> t_delay<span class="op">,</span> y = max_y <span class="op">*</span> 0<span class="fu">.9</span><span class="op">,</span> text = sprintf<span class="in">(</span>"tau<span class="in">:</span> %<span class="fu">.1f</span> s"<span class="op">,</span> Tau<span class="in">)</span><span class="op">,</span> </span>
<span id="cb3-519"><a href="#cb3-519" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span> xanchor = "left"<span class="op">,</span> yanchor = "bottom"<span class="op">,</span></span>
<span id="cb3-520"><a href="#cb3-520" aria-hidden="true" tabindex="-1"></a>            textangle = -90<span class="op">,</span> font = list<span class="in">(</span>size = 11<span class="in">)</span></span>
<span id="cb3-521"><a href="#cb3-521" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-522"><a href="#cb3-522" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-523"><a href="#cb3-523" aria-hidden="true" tabindex="-1"></a>            x = tau4 <span class="op">+</span> t_delay<span class="op">,</span> y = max_y <span class="op">*</span> 0<span class="fu">.9</span><span class="op">,</span> text = sprintf<span class="in">(</span>"4tau<span class="in">:</span> %<span class="fu">.1f</span> s"<span class="op">,</span> tau4<span class="in">)</span><span class="op">,</span> </span>
<span id="cb3-524"><a href="#cb3-524" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span> xanchor = "left"<span class="op">,</span> yanchor = "bottom"<span class="op">,</span></span>
<span id="cb3-525"><a href="#cb3-525" aria-hidden="true" tabindex="-1"></a>            textangle = -90<span class="op">,</span> font = list<span class="in">(</span>size = 11<span class="in">)</span></span>
<span id="cb3-526"><a href="#cb3-526" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-527"><a href="#cb3-527" aria-hidden="true" tabindex="-1"></a>          if <span class="in">(</span>show_data<span class="in">())</span> <span class="er">{</span></span>
<span id="cb3-528"><a href="#cb3-528" aria-hidden="true" tabindex="-1"></a>            list(</span>
<span id="cb3-529"><a href="#cb3-529" aria-hidden="true" tabindex="-1"></a>              x = nlsLM_end<span class="op">,</span> y = max_y <span class="op">*</span> 0<span class="fu">.9</span><span class="op">,</span> text = sprintf<span class="in">(</span>"nlsLM Ende<span class="in">:</span> %<span class="fu">.1f</span> s"<span class="op">,</span> nlsLM_end<span class="in">)</span><span class="op">,</span> </span>
<span id="cb3-530"><a href="#cb3-530" aria-hidden="true" tabindex="-1"></a>              showarrow = FALSE<span class="op">,</span> xanchor = "left"<span class="op">,</span> yanchor = "bottom"<span class="op">,</span></span>
<span id="cb3-531"><a href="#cb3-531" aria-hidden="true" tabindex="-1"></a>              textangle = -90<span class="op">,</span> font = list<span class="in">(</span>size = 11<span class="in">)</span></span>
<span id="cb3-532"><a href="#cb3-532" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb3-533"><a href="#cb3-533" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-534"><a href="#cb3-534" aria-hidden="true" tabindex="-1"></a>        )) %<span class="op">&gt;</span>%</span>
<span id="cb3-535"><a href="#cb3-535" aria-hidden="true" tabindex="-1"></a>      add_trace<span class="in">(</span>x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>rep<span class="in">(</span>VO2_Ruhe<span class="op">,</span> length<span class="in">(</span>t_s<span class="in">))</span><span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'lines'<span class="op">,</span></span>
<span id="cb3-536"><a href="#cb3-536" aria-hidden="true" tabindex="-1"></a>                name = 'V̇O&lt;sub<span class="op">&gt;</span>2<span class="op">,</span> Ruhe&lt;/sub<span class="op">&gt;</span>'<span class="op">,</span> line = list<span class="in">(</span>color = '<span class="pp">#1CADE4</span>'<span class="in">))</span></span>
<span id="cb3-537"><a href="#cb3-537" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-538"><a href="#cb3-538" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>show_data<span class="in">())</span> {</span>
<span id="cb3-539"><a href="#cb3-539" aria-hidden="true" tabindex="-1"></a>      model_values_at_data &lt;- model_function(Beispieldaten$t_s<span class="op">,</span> VO2<span class="op">,</span> Tau<span class="op">,</span> VO2_Start<span class="op">,</span> t_delay)</span>
<span id="cb3-540"><a href="#cb3-540" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-541"><a href="#cb3-541" aria-hidden="true" tabindex="-1"></a>      data_subset &lt;- Beispieldaten<span class="ex">[</span><span class="ss">Beispieldaten</span><span class="op">$</span><span class="ss">t_s </span><span class="op">&gt;</span>= t_delay <span class="op">&amp;</span> Beispieldaten$t_s &lt;= input$nlsLM_end<span class="op">,</span> ]</span>
<span id="cb3-542"><a href="#cb3-542" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-543"><a href="#cb3-543" aria-hidden="true" tabindex="-1"></a>      ss_res &lt;- sum<span class="in">((</span>data_subset$VO2_t - model_values_at_data<span class="ex">[</span><span class="ss">Beispieldaten</span><span class="op">$</span><span class="ss">t_s </span><span class="op">&gt;</span>= t_delay <span class="op">&amp;</span> Beispieldaten$t_s &lt;= input$nlsLM_end]<span class="in">)</span>^2<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span></span>
<span id="cb3-544"><a href="#cb3-544" aria-hidden="true" tabindex="-1"></a>      ss_tot &lt;- sum<span class="in">((</span>data_subset$VO2_t - mean<span class="in">(</span>data_subset$VO2_t<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">))</span>^2<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span></span>
<span id="cb3-545"><a href="#cb3-545" aria-hidden="true" tabindex="-1"></a>      r_squared &lt;- 1 - <span class="in">(</span>ss_res / ss_tot<span class="in">)</span></span>
<span id="cb3-546"><a href="#cb3-546" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-547"><a href="#cb3-547" aria-hidden="true" tabindex="-1"></a>      p &lt;- p %<span class="op">&gt;</span>%</span>
<span id="cb3-548"><a href="#cb3-548" aria-hidden="true" tabindex="-1"></a>        add_trace<span class="in">(</span>data = Beispieldaten<span class="op">,</span> x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>VO2_t<span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'markers<span class="op">+</span>lines'<span class="op">,</span></span>
<span id="cb3-549"><a href="#cb3-549" aria-hidden="true" tabindex="-1"></a>                  name = 'V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>'<span class="op">,</span> </span>
<span id="cb3-550"><a href="#cb3-550" aria-hidden="true" tabindex="-1"></a>                  marker = list<span class="in">(</span>color = 'rgba<span class="in">(</span>38<span class="op">,</span> 131<span class="op">,</span> 198<span class="op">,</span> 0<span class="fu">.9</span><span class="in">)</span>'<span class="op">,</span> size = 5<span class="fu">.0</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-551"><a href="#cb3-551" aria-hidden="true" tabindex="-1"></a>                  line = list<span class="in">(</span>color = 'rgba<span class="in">(</span>38<span class="op">,</span> 131<span class="op">,</span> 198<span class="op">,</span> 1<span class="fu">.0</span><span class="in">)</span>'<span class="op">,</span> width = 0<span class="fu">.65</span><span class="op">,</span> dash = '4 4'<span class="in">))</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-552"><a href="#cb3-552" aria-hidden="true" tabindex="-1"></a>        layout<span class="in">(</span>annotations = list<span class="in">(</span></span>
<span id="cb3-553"><a href="#cb3-553" aria-hidden="true" tabindex="-1"></a>          list<span class="in">(</span></span>
<span id="cb3-554"><a href="#cb3-554" aria-hidden="true" tabindex="-1"></a>            x = max_x <span class="op">*</span> 0<span class="fu">.60</span><span class="op">,</span></span>
<span id="cb3-555"><a href="#cb3-555" aria-hidden="true" tabindex="-1"></a>            y = max_y <span class="op">*</span> 0<span class="fu">.2</span><span class="op">,</span></span>
<span id="cb3-556"><a href="#cb3-556" aria-hidden="true" tabindex="-1"></a>            text = sprintf<span class="in">(</span>"R²<span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> r_squared<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-557"><a href="#cb3-557" aria-hidden="true" tabindex="-1"></a>            showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-558"><a href="#cb3-558" aria-hidden="true" tabindex="-1"></a>            xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-559"><a href="#cb3-559" aria-hidden="true" tabindex="-1"></a>            yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-560"><a href="#cb3-560" aria-hidden="true" tabindex="-1"></a>            font = list<span class="in">(</span></span>
<span id="cb3-561"><a href="#cb3-561" aria-hidden="true" tabindex="-1"></a>              family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-562"><a href="#cb3-562" aria-hidden="true" tabindex="-1"></a>              size = 12<span class="op">,</span></span>
<span id="cb3-563"><a href="#cb3-563" aria-hidden="true" tabindex="-1"></a>              color = "black"</span>
<span id="cb3-564"><a href="#cb3-564" aria-hidden="true" tabindex="-1"></a>            <span class="in">)</span></span>
<span id="cb3-565"><a href="#cb3-565" aria-hidden="true" tabindex="-1"></a>          <span class="in">)</span></span>
<span id="cb3-566"><a href="#cb3-566" aria-hidden="true" tabindex="-1"></a>        <span class="in">))</span></span>
<span id="cb3-567"><a href="#cb3-567" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-568"><a href="#cb3-568" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-569"><a href="#cb3-569" aria-hidden="true" tabindex="-1"></a>    p</span>
<span id="cb3-570"><a href="#cb3-570" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-571"><a href="#cb3-571" aria-hidden="true" tabindex="-1"></a>  output$instructions &lt;- renderUI<span class="in">(</span><span class="er">{</span></span>
<span id="cb3-572"><a href="#cb3-572" aria-hidden="true" tabindex="-1"></a>    HTML(</span>
<span id="cb3-573"><a href="#cb3-573" aria-hidden="true" tabindex="-1"></a>      "&lt;div style='margin-top<span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#f0f0f0</span><span class="op">;</span> <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#ddd</span><span class="op">;</span> <span class="kw">border-radius</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span> <span class="kw">width</span><span class="ch">:</span> <span class="dv">fit-content</span><span class="op">;</span>'<span class="op">&gt;</span></span>
<span id="cb3-574"><a href="#cb3-574" aria-hidden="true" tabindex="-1"></a>        &lt;h4 style='color<span class="in">:</span> <span class="pp">#333</span>;'<span class="op">&gt;</span>&lt;strong<span class="op">&gt;</span>Anleitung - Modellanpassung<span class="in">:</span>&lt;/strong<span class="op">&gt;</span>&lt;/h4<span class="op">&gt;</span></span>
<span id="cb3-575"><a href="#cb3-575" aria-hidden="true" tabindex="-1"></a>        &lt;ol style='color<span class="in">:</span> <span class="pp">#555</span>; list-style-position<span class="in">:</span> outside; padding-left<span class="in">:</span> 20px;'<span class="op">&gt;</span></span>
<span id="cb3-576"><a href="#cb3-576" aria-hidden="true" tabindex="-1"></a>          &lt;li<span class="op">&gt;</span>Beispiel VO2-Daten oder eigene VO2-Daten als CSV-Datei einfügen.&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-577"><a href="#cb3-577" aria-hidden="true" tabindex="-1"></a>          &lt;li<span class="op">&gt;</span>Die Zeitverzögerung festlegen<span class="op">,</span> um den Startpunkt der Modellanpassung zu bestimmen<span class="op">,</span> und bei Bedarf das Ende der Anpassung anpassen.&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-578"><a href="#cb3-578" aria-hidden="true" tabindex="-1"></a>          &lt;li<span class="op">&gt;</span>Modellanpassung 'Fit<span class="in">:</span> nlsLM' durchführen.&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-579"><a href="#cb3-579" aria-hidden="true" tabindex="-1"></a>          &lt;li<span class="op">&gt;</span>Alternativ<span class="in">:</span> Manuelle Modellanpassung der Modellparameter mit den Schiebereglern.&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-580"><a href="#cb3-580" aria-hidden="true" tabindex="-1"></a>        &lt;/ol<span class="op">&gt;</span></span>
<span id="cb3-581"><a href="#cb3-581" aria-hidden="true" tabindex="-1"></a>        &lt;div style='margin-top<span class="in">:</span> 20px;'<span class="op">&gt;</span>&lt;/div<span class="op">&gt;</span></span>
<span id="cb3-582"><a href="#cb3-582" aria-hidden="true" tabindex="-1"></a>        &lt;pre style='background-color<span class="in">:</span> <span class="pp">#f8f8f8</span>; padding<span class="in">:</span> 10px; border<span class="in">:</span> 1px solid <span class="pp">#ddd</span>; border-radius<span class="in">:</span> 5px; width<span class="in">:</span> fit-content;'<span class="op">&gt;</span></span>
<span id="cb3-583"><a href="#cb3-583" aria-hidden="true" tabindex="-1"></a>VO2-Daten können als CSV-Datei im folgenden Format hochgeladen werden<span class="in">:</span></span>
<span id="cb3-584"><a href="#cb3-584" aria-hidden="true" tabindex="-1"></a>t_s<span class="op">,</span>VO2_t</span>
<span id="cb3-585"><a href="#cb3-585" aria-hidden="true" tabindex="-1"></a>0<span class="fu">.0</span><span class="op">,</span>0<span class="fu">.479</span></span>
<span id="cb3-586"><a href="#cb3-586" aria-hidden="true" tabindex="-1"></a>1<span class="fu">.0</span><span class="op">,</span>0<span class="fu">.459</span></span>
<span id="cb3-587"><a href="#cb3-587" aria-hidden="true" tabindex="-1"></a>2<span class="fu">.3</span><span class="op">,</span>0<span class="fu">.488</span></span>
<span id="cb3-588"><a href="#cb3-588" aria-hidden="true" tabindex="-1"></a>…</span>
<span id="cb3-589"><a href="#cb3-589" aria-hidden="true" tabindex="-1"></a>        &lt;/pre<span class="op">&gt;</span></span>
<span id="cb3-590"><a href="#cb3-590" aria-hidden="true" tabindex="-1"></a>      &lt;/div<span class="op">&gt;</span>"</span>
<span id="cb3-591"><a href="#cb3-591" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-592"><a href="#cb3-592" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-593"><a href="#cb3-593" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-594"><a href="#cb3-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-595"><a href="#cb3-595" aria-hidden="true" tabindex="-1"></a># App ausführen</span>
<span id="cb3-596"><a href="#cb3-596" aria-hidden="true" tabindex="-1"></a>shinyApp<span class="in">(</span>ui = ui<span class="op">,</span> server = server<span class="in">)</span></span>
<span id="cb3-597"><a href="#cb3-597" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb3-598"><a href="#cb3-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-599"><a href="#cb3-599" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.callout-note</span> icon="false" collapse="true" appearance="simple"}</span>
<span id="cb3-600"><a href="#cb3-600" aria-hidden="true" tabindex="-1"></a>#### <span class="op">**</span>Modellanpassung - Details<span class="in">:</span><span class="op">**</span> {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-601"><a href="#cb3-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-602"><a href="#cb3-602" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>nlsLM - Fit<span class="in">:</span><span class="op">**</span></span>
<span id="cb3-603"><a href="#cb3-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-604"><a href="#cb3-604" aria-hidden="true" tabindex="-1"></a>-   Verwendete Funktion<span class="in">:</span> nlsLM</span>
<span id="cb3-605"><a href="#cb3-605" aria-hidden="true" tabindex="-1"></a>-   Parameter<span class="in">:</span> V̇O2 <span class="in">(</span>Amplitude<span class="in">)</span><span class="op">,</span> Tau</span>
<span id="cb3-606"><a href="#cb3-606" aria-hidden="true" tabindex="-1"></a>-   Modell<span class="in">:</span> V̇O2_t \~ V̇O2 · <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>t_s - t_delay<span class="in">)</span> / Tau<span class="in">))</span> <span class="op">+</span> V̇O2_Start</span>
<span id="cb3-607"><a href="#cb3-607" aria-hidden="true" tabindex="-1"></a>-   Grenzen<span class="in">:</span></span>
<span id="cb3-608"><a href="#cb3-608" aria-hidden="true" tabindex="-1"></a>    -   V̇O2<span class="in">:</span> <span class="op">*</span>0<span class="fu">.5</span> bis 7<span class="fu">.0</span> l/min<span class="op">*</span></span>
<span id="cb3-609"><a href="#cb3-609" aria-hidden="true" tabindex="-1"></a>    -   Tau<span class="in">:</span> <span class="op">*</span>5 bis 360 s<span class="op">*</span></span>
<span id="cb3-610"><a href="#cb3-610" aria-hidden="true" tabindex="-1"></a>-   Prozess<span class="in">:</span></span>
<span id="cb3-611"><a href="#cb3-611" aria-hidden="true" tabindex="-1"></a>    a)  Bestimmung des V̇O2_Start-Wertes<span class="in">:</span></span>
<span id="cb3-612"><a href="#cb3-612" aria-hidden="true" tabindex="-1"></a>        -   Finden des nächstgelegenen Zeitpunkts zu t_delay in den</span>
<span id="cb3-613"><a href="#cb3-613" aria-hidden="true" tabindex="-1"></a>            Daten</span>
<span id="cb3-614"><a href="#cb3-614" aria-hidden="true" tabindex="-1"></a>        -   Setzen von V̇O2_Start auf den gerundeten V̇O2-Wert dieses</span>
<span id="cb3-615"><a href="#cb3-615" aria-hidden="true" tabindex="-1"></a>            Punktes</span>
<span id="cb3-616"><a href="#cb3-616" aria-hidden="true" tabindex="-1"></a>    b)  Datenauswahl<span class="in">:</span></span>
<span id="cb3-617"><a href="#cb3-617" aria-hidden="true" tabindex="-1"></a>        -   Verwendung der Daten zwischen <span class="op">*</span>t_delay<span class="op">*</span> und <span class="op">*</span>nlsLM_end<span class="op">*</span></span>
<span id="cb3-618"><a href="#cb3-618" aria-hidden="true" tabindex="-1"></a>    c)  Startwertebestimmung<span class="in">:</span></span>
<span id="cb3-619"><a href="#cb3-619" aria-hidden="true" tabindex="-1"></a>        -   Verwendung der aktuellen Slider-Werte für V̇O2 und Tau</span>
<span id="cb3-620"><a href="#cb3-620" aria-hidden="true" tabindex="-1"></a>    d)  Durchführung der nicht-linearen Regression<span class="in">:</span></span>
<span id="cb3-621"><a href="#cb3-621" aria-hidden="true" tabindex="-1"></a>        -   Verwendung des Levenberg-Marquardt-Algorithmus</span>
<span id="cb3-622"><a href="#cb3-622" aria-hidden="true" tabindex="-1"></a>        -   Maximale Iterationen<span class="in">:</span> <span class="op">*</span>1024<span class="op">*</span></span>
<span id="cb3-623"><a href="#cb3-623" aria-hidden="true" tabindex="-1"></a>-   Optimierung<span class="in">:</span> Minimierung der Residuenquadratsumme <span class="in">(</span>RSS<span class="in">)</span></span>
<span id="cb3-624"><a href="#cb3-624" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-625"><a href="#cb3-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-626"><a href="#cb3-626" aria-hidden="true" tabindex="-1"></a>## Drei-Phasen-Modell {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-627"><a href="#cb3-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-628"><a href="#cb3-628" aria-hidden="true" tabindex="-1"></a>Die Analyse der $\dot{V}O_{2}<span class="in">(</span>t<span class="in">)</span>$-Kinetik kann durch die Berücksichtigung</span>
<span id="cb3-629"><a href="#cb3-629" aria-hidden="true" tabindex="-1"></a>von Zeitverzögerungen und/oder Exponentialfunktionen zweiter Ordnung</span>
<span id="cb3-630"><a href="#cb3-630" aria-hidden="true" tabindex="-1"></a>verfeinert werden. Dazu kann die Anpassungsreaktion des</span>
<span id="cb3-631"><a href="#cb3-631" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_{2}\,<span class="in">(</span>t<span class="in">)</span>$ nach Beginn der sportlichen Betätigung in</span>
<span id="cb3-632"><a href="#cb3-632" aria-hidden="true" tabindex="-1"></a>drei Phasen unterteilt werden<span class="op">,</span> wie in <span class="im">@fig-3_Phasen</span> zu sehen</span>
<span id="cb3-633"><a href="#cb3-633" aria-hidden="true" tabindex="-1"></a>[@Whipp1982]. Dies ermöglicht es, die erhöhte Komplexität der</span>
<span id="cb3-634"><a href="#cb3-634" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_{2}$-Kinetik oberhalb der LT besser darzustellen und eine</span>
<span id="cb3-635"><a href="#cb3-635" aria-hidden="true" tabindex="-1"></a>präzisere Analyse der physiologischen Anpassungen bei körperlicher</span>
<span id="cb3-636"><a href="#cb3-636" aria-hidden="true" tabindex="-1"></a>Belastung durchzuführen<span class="op">,</span> da oberhalb der LT der $\dot{V}O_2$-Umsatz über</span>
<span id="cb3-637"><a href="#cb3-637" aria-hidden="true" tabindex="-1"></a>10 ml O<span class="op">~</span>2<span class="op">~</span>·W^-1^·min^-1^ steigt <span class="ex">[</span><span class="ss">@Barstow1994</span>; <span class="im">@Bearden2000</span><span class="op">;</span></span>
<span id="cb3-638"><a href="#cb3-638" aria-hidden="true" tabindex="-1"></a><span class="im">@Sietsema2020</span>]. Die 3 Phasen lassen sich wie folgt beschreiben:</span>
<span id="cb3-639"><a href="#cb3-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-640"><a href="#cb3-640" aria-hidden="true" tabindex="-1"></a>:::::: columns</span>
<span id="cb3-641"><a href="#cb3-641" aria-hidden="true" tabindex="-1"></a>::: {<span class="fu">.column</span> width="72%"}</span>
<span id="cb3-642"><a href="#cb3-642" aria-hidden="true" tabindex="-1"></a>!<span class="ex">[</span><span class="ss">Beispiel der Drei-Phasen der VO2-Kinetik bis zum Erreichen eines SS</span></span>
<span id="cb3-643"><a href="#cb3-643" aria-hidden="true" tabindex="-1"></a><span class="ss">nach Beginn der Belastung (McNulty &amp; Robergs</span><span class="op">,</span></span>
<span id="cb3-644"><a href="#cb3-644" aria-hidden="true" tabindex="-1"></a>2017)]<span class="in">(</span>images/McNulty2017_VO2_3_Phase<span class="fu">.png</span><span class="in">)</span>{<span class="pp">#fig-3_Phasen</span> height="500"}</span>
<span id="cb3-645"><a href="#cb3-645" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-646"><a href="#cb3-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-647"><a href="#cb3-647" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="2%"}</span>
<span id="cb3-648"><a href="#cb3-648" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-649"><a href="#cb3-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-650"><a href="#cb3-650" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="25%"}</span>
<span id="cb3-651"><a href="#cb3-651" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-652"><a href="#cb3-652" aria-hidden="true" tabindex="-1"></a><span class="in">::::::</span></span>
<span id="cb3-653"><a href="#cb3-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-654"><a href="#cb3-654" aria-hidden="true" tabindex="-1"></a><span class="in">::::::</span> columns</span>
<span id="cb3-655"><a href="#cb3-655" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="60%"}</span>
<span id="cb3-656"><a href="#cb3-656" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Phase 1<span class="in">:</span><span class="op">**</span>&lt;br<span class="op">&gt;</span> Phase I<span class="op">,</span> häufig als kardiodynamische Phase bezeichnet<span class="op">,</span></span>
<span id="cb3-657"><a href="#cb3-657" aria-hidden="true" tabindex="-1"></a>umfasst ungefähr die ersten 10 bis 25 Sekunden nach Beginn der</span>
<span id="cb3-658"><a href="#cb3-658" aria-hidden="true" tabindex="-1"></a>Belastung. Aufgrund des schnellen Anstiegs des Herzzeitvolumens und des</span>
<span id="cb3-659"><a href="#cb3-659" aria-hidden="true" tabindex="-1"></a>Lungenblutflusses zu Beginn der Belastung steigt</span>
<span id="cb3-660"><a href="#cb3-660" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_2\,<span class="in">(</span>t<span class="in">)</span>$ abrupt an. In dieser Phase bleibt die</span>
<span id="cb3-661"><a href="#cb3-661" aria-hidden="true" tabindex="-1"></a>Zusammensetzung des gemischtvenösen Blutes sowie der respiratorische</span>
<span id="cb3-662"><a href="#cb3-662" aria-hidden="true" tabindex="-1"></a>Quotient</span>
<span id="cb3-663"><a href="#cb3-663" aria-hidden="true" tabindex="-1"></a>$RQ\,<span class="in">(</span>t<span class="in">)</span> = \frac{\dot{V}CO_{2}\<span class="op">,</span><span class="in">(</span>t<span class="in">)</span>}{\dot{V}O_{2}\<span class="op">,</span><span class="in">(</span>t<span class="in">)</span>}$</span>
<span id="cb3-664"><a href="#cb3-664" aria-hidden="true" tabindex="-1"></a>im Vergleich zum Ruhezustand unverändert. Somit ist der Anstieg des</span>
<span id="cb3-665"><a href="#cb3-665" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_2\,<span class="in">(</span>t<span class="in">)</span>$ ausschließlich auf das erhöhte</span>
<span id="cb3-666"><a href="#cb3-666" aria-hidden="true" tabindex="-1"></a>Herzminutenvolumen zurückzuführen<span class="op">,</span> da sich die Sauerstoffkonzentration</span>
<span id="cb3-667"><a href="#cb3-667" aria-hidden="true" tabindex="-1"></a>im arteriellen und venösen Blut <span class="in">(</span>C<span class="op">~</span>a<span class="op">~</span> und C<span class="op">~</span>v<span class="op">~</span><span class="in">)</span> noch nicht verändert</span>
<span id="cb3-668"><a href="#cb3-668" aria-hidden="true" tabindex="-1"></a>haben. Dies lässt sich mit Hilfe der Fick'schen Gleichung <span class="im">@eq-FICK</span></span>
<span id="cb3-669"><a href="#cb3-669" aria-hidden="true" tabindex="-1"></a>verdeutlichen [@Fick1855<span class="op">;</span> <span class="im">@Whipp1982</span><span class="op">;</span> <span class="im">@Stirling2005</span><span class="op">;</span> <span class="im">@Clark2014</span><span class="op">;</span></span>
<span id="cb3-670"><a href="#cb3-670" aria-hidden="true" tabindex="-1"></a><span class="im">@Sietsema2020</span>].</span>
<span id="cb3-671"><a href="#cb3-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-672"><a href="#cb3-672" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-673"><a href="#cb3-673" aria-hidden="true" tabindex="-1"></a>\dot{V}O_2 = \dot{Q} \cdot <span class="in">(</span>C_a - C_v<span class="in">)</span> </span>
<span id="cb3-674"><a href="#cb3-674" aria-hidden="true" tabindex="-1"></a>$$ {<span class="pp">#eq-FICK</span>}</span>
<span id="cb3-675"><a href="#cb3-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-676"><a href="#cb3-676" aria-hidden="true" tabindex="-1"></a>Da die anfängliche „kardiodynamische“ Phase der $\dot{V}O_2$-Reaktion</span>
<span id="cb3-677"><a href="#cb3-677" aria-hidden="true" tabindex="-1"></a>nicht direkt den Sauerstoffumsatz der aktiven Muskulatur repräsentiert<span class="op">,</span></span>
<span id="cb3-678"><a href="#cb3-678" aria-hidden="true" tabindex="-1"></a>werden in der Regel die ersten 20 bis 25 Sekunden von Phase I bei</span>
<span id="cb3-679"><a href="#cb3-679" aria-hidden="true" tabindex="-1"></a>Modellierungen der $\dot{V}O_2$-Kinetik aus der Modellanpassung</span>
<span id="cb3-680"><a href="#cb3-680" aria-hidden="true" tabindex="-1"></a>ausgeschlossen <span class="ex">[</span><span class="ss">@Bearden2000</span>; <span class="im">@Oezyener2001</span>].</span>
<span id="cb3-681"><a href="#cb3-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-682"><a href="#cb3-682" aria-hidden="true" tabindex="-1"></a>**Phase 2:**&lt;br&gt; Phase 2 folgt auf Phase 1 und ist durch einen</span>
<span id="cb3-683"><a href="#cb3-683" aria-hidden="true" tabindex="-1"></a>schnellen, monoexponentiellen Anstieg des $\dot{V}O_2$ gekennzeichnet.</span>
<span id="cb3-684"><a href="#cb3-684" aria-hidden="true" tabindex="-1"></a>Die Zeitkonstante beträgt im Durchschnitt etwa 30 <span class="ex">[</span><span class="ss">@Sietsema2020</span><span class="ex">]</span> bis 33</span>
<span id="cb3-685"><a href="#cb3-685" aria-hidden="true" tabindex="-1"></a>Sekunden <span class="ex">[</span><span class="ss">@Oezyener2001</span><span class="ex">]</span>. Anschließend wird entweder ein SS erreicht</span>
<span id="cb3-686"><a href="#cb3-686" aria-hidden="true" tabindex="-1"></a>oder der $\dot{V}O_2$ steigt weiter an<span class="op">,</span> was dann in dem Modell als Phase</span>
<span id="cb3-687"><a href="#cb3-687" aria-hidden="true" tabindex="-1"></a>3 bezeichnet wird <span class="ex">[</span><span class="ss">@Stirling2005</span><span class="ex">]</span>.</span>
<span id="cb3-688"><a href="#cb3-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-689"><a href="#cb3-689" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Phase 3<span class="in">:</span><span class="op">**</span>&lt;br<span class="op">&gt;</span> In Phase 3 des $\dot{V}O_2$-Modells wird bei leichten</span>
<span id="cb3-690"><a href="#cb3-690" aria-hidden="true" tabindex="-1"></a>bis moderaten Belastungen unterhalb der Laktatschwelle <span class="in">(</span>LT<span class="in">)</span> nach etwa 3</span>
<span id="cb3-691"><a href="#cb3-691" aria-hidden="true" tabindex="-1"></a>Minuten ein stabiler Zustand <span class="in">(</span>SS<span class="in">)</span> erreicht. Dieses Verhalten beschreibt<span class="op">,</span></span>
<span id="cb3-692"><a href="#cb3-692" aria-hidden="true" tabindex="-1"></a>wie der $\dot{V}O_2$ sich im 3-Phasen-Modell für Belastungen unterhalb</span>
<span id="cb3-693"><a href="#cb3-693" aria-hidden="true" tabindex="-1"></a>der LT verhält. Bei Belastungen oberhalb der LT erreicht der</span>
<span id="cb3-694"><a href="#cb3-694" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_2$ nach der primären Anpassungsreaktion keinen SS mehr<span class="op">,</span></span>
<span id="cb3-695"><a href="#cb3-695" aria-hidden="true" tabindex="-1"></a>sondern steigt weiter an <span class="in">(</span>siehe @fig-Verlauf_ON<span class="in">)</span>. Diese zusätzliche</span>
<span id="cb3-696"><a href="#cb3-696" aria-hidden="true" tabindex="-1"></a>Komponente<span class="op">,</span> meist als "slow component" bezeichnet und überlagert die</span>
<span id="cb3-697"><a href="#cb3-697" aria-hidden="true" tabindex="-1"></a>anfängliche monoexponentielle Funktion aus Phase 2.</span>
<span id="cb3-698"><a href="#cb3-698" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-699"><a href="#cb3-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-700"><a href="#cb3-700" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="2%"}</span>
<span id="cb3-701"><a href="#cb3-701" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-702"><a href="#cb3-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-703"><a href="#cb3-703" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.column</span> width="38%"}</span>
<span id="cb3-704"><a href="#cb3-704" aria-hidden="true" tabindex="-1"></a>!<span class="ex">[</span><span class="ss">Beispiele der VO&lt;sub</span><span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>-Anstiegskinetik eines Probanden für</span>
<span id="cb3-705"><a href="#cb3-705" aria-hidden="true" tabindex="-1"></a>verschiedene Belastungsintensitäten<span class="in">:</span> sehr intensiv<span class="op">,</span> schwer<span class="op">,</span> mittelschwer</span>
<span id="cb3-706"><a href="#cb3-706" aria-hidden="true" tabindex="-1"></a>und moderat <span class="in">(</span>von oben nach unten<span class="in">)</span>. Unterhalb der VO&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>-Daten</span>
<span id="cb3-707"><a href="#cb3-707" aria-hidden="true" tabindex="-1"></a>ist der entsprechende Residuenplot zu sehen. In Spalte A wird eine</span>
<span id="cb3-708"><a href="#cb3-708" aria-hidden="true" tabindex="-1"></a>Modellfunktion mit mono-exponentieller Kurvenanpassung gezeigt<span class="op">,</span> in</span>
<span id="cb3-709"><a href="#cb3-709" aria-hidden="true" tabindex="-1"></a>Spalte B eine mit bi-exponentieller Anpassung <span class="in">(</span>Özyener<span class="op">,</span></span>
<span id="cb3-710"><a href="#cb3-710" aria-hidden="true" tabindex="-1"></a>2001<span class="in">)</span>.]<span class="in">(</span>images/Ozyener_ON<span class="fu">.png</span><span class="in">)</span>{<span class="pp">#fig-Verlauf_ON</span>}</span>
<span id="cb3-711"><a href="#cb3-711" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-712"><a href="#cb3-712" aria-hidden="true" tabindex="-1"></a><span class="in">::::::</span></span>
<span id="cb3-713"><a href="#cb3-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-714"><a href="#cb3-714" aria-hidden="true" tabindex="-1"></a>Mathematische Modellierungen haben gezeigt<span class="op">,</span> dass die langsame Komponente</span>
<span id="cb3-715"><a href="#cb3-715" aria-hidden="true" tabindex="-1"></a>etwa 90 bis 200 Sekunden nach Beginn des Übergangs einsetzt <span class="ex">[</span><span class="ss">@Whipp1972</span>;</span>
<span id="cb3-716"><a href="#cb3-716" aria-hidden="true" tabindex="-1"></a><span class="im">@Barstow1991</span><span class="op">;</span> <span class="im">@Bearden2000</span><span class="op">;</span> <span class="im">@Sietsema2020</span>]. Die Komponente der</span>
<span id="cb3-717"><a href="#cb3-717" aria-hidden="true" tabindex="-1"></a>Anpassungsreaktion bis zum Beginn der slow component wird in der</span>
<span id="cb3-718"><a href="#cb3-718" aria-hidden="true" tabindex="-1"></a>Literatur oft als <span class="st">"primary component"</span> oder <span class="st">"fundamental component"</span></span>
<span id="cb3-719"><a href="#cb3-719" aria-hidden="true" tabindex="-1"></a>bezeichnet [@Barstow1994<span class="op">;</span> <span class="im">@Oezyener2001</span>]. Im Folgenden wird diese</span>
<span id="cb3-720"><a href="#cb3-720" aria-hidden="true" tabindex="-1"></a>Hauptkomponente mit dem Index <span class="st">"fast"</span> gekennzeichnet.</span>
<span id="cb3-721"><a href="#cb3-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-722"><a href="#cb3-722" aria-hidden="true" tabindex="-1"></a>### Biexponentielle $\dot{V}O_{2}$-Modellfunktion {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-723"><a href="#cb3-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-724"><a href="#cb3-724" aria-hidden="true" tabindex="-1"></a>Phase 2 und 3 des 3-Phasen-Modells lassen sich mit Hilfe der</span>
<span id="cb3-725"><a href="#cb3-725" aria-hidden="true" tabindex="-1"></a><span class="im">@eq-VO2_Start</span> modellieren:</span>
<span id="cb3-726"><a href="#cb3-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-727"><a href="#cb3-727" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-728"><a href="#cb3-728" aria-hidden="true" tabindex="-1"></a>\dot{V}O_2\,<span class="in">(</span>t<span class="in">)</span> = \dot{V}O_{2<span class="op">,</span>\text{fast}} \cdot \left<span class="in">(</span>1 - e^<span class="er">{</span>-\frac{t_s - t_\text{delay<span class="op">,</span> fast}}{\tau_\text{fast}}}\right) <span class="op">+</span> </span>
<span id="cb3-729"><a href="#cb3-729" aria-hidden="true" tabindex="-1"></a>\dot{V}O_{2<span class="op">,</span>\text{slow}} \cdot \left<span class="in">(</span>1 - e^<span class="er">{</span>-\frac{t_s - t_\text{delay<span class="op">,</span>slow}}{\tau_\text{slow}}}\right) <span class="op">+</span> </span>
<span id="cb3-730"><a href="#cb3-730" aria-hidden="true" tabindex="-1"></a>\dot{V}O_{2<span class="op">,</span>\text{Start}}</span>
<span id="cb3-731"><a href="#cb3-731" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-732"><a href="#cb3-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-733"><a href="#cb3-733" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_{2<span class="op">,</span>\text{fast}}$ repräsentiert die Amplitude der</span>
<span id="cb3-734"><a href="#cb3-734" aria-hidden="true" tabindex="-1"></a>Hauptkomponente<span class="op">,</span> während $\dot{V}O_{2<span class="op">,</span>\text{slow}}$ die Amplitude der</span>
<span id="cb3-735"><a href="#cb3-735" aria-hidden="true" tabindex="-1"></a>slow component beschreibt. Die Zeitkonstanten $\tau_\text{fast}$ und</span>
<span id="cb3-736"><a href="#cb3-736" aria-hidden="true" tabindex="-1"></a>$\tau_\text{slow}$ steuern die Geschwindigkeit der jeweiligen</span>
<span id="cb3-737"><a href="#cb3-737" aria-hidden="true" tabindex="-1"></a>Reaktionsprozesse<span class="op">,</span> wobei die Zeitverzögerungen $t_\text{delay<span class="op">,</span> fast}$</span>
<span id="cb3-738"><a href="#cb3-738" aria-hidden="true" tabindex="-1"></a>und $t_\text{delay<span class="op">,</span> slow}$ den Beginn dieser Prozesse bestimmen.</span>
<span id="cb3-739"><a href="#cb3-739" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_{2<span class="op">,</span>\text{Start}}$ beschreibt den Sauerstoffvolumenstrom zu</span>
<span id="cb3-740"><a href="#cb3-740" aria-hidden="true" tabindex="-1"></a>Beginn der Belastung.</span>
<span id="cb3-741"><a href="#cb3-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-742"><a href="#cb3-742" aria-hidden="true" tabindex="-1"></a>In der folgenden Shiny-App wird die Modellanpassung der Gleichung</span>
<span id="cb3-743"><a href="#cb3-743" aria-hidden="true" tabindex="-1"></a><span class="im">@eq-VO2_Start</span> an Beispieldaten demonstriert. Eigene</span>
<span id="cb3-744"><a href="#cb3-744" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_{2}<span class="in">(</span>t<span class="in">)</span>$-Daten können hochgeladen und mittels nichtlinearer</span>
<span id="cb3-745"><a href="#cb3-745" aria-hidden="true" tabindex="-1"></a>Regression an die Modellparameter angepasst werden.</span>
<span id="cb3-746"><a href="#cb3-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-747"><a href="#cb3-747" aria-hidden="true" tabindex="-1"></a>#### Biexponentielle $\dot{V}O_{2}$-Shiny-App {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-748"><a href="#cb3-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-749"><a href="#cb3-749" aria-hidden="true" tabindex="-1"></a>```{shinylive-r}</span>
<span id="cb3-750"><a href="#cb3-750" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> standalone<span class="in">:</span> true</span>
<span id="cb3-751"><a href="#cb3-751" aria-hidden="true" tabindex="-1"></a>#<span class="op">|</span> viewerHeight<span class="in">:</span> 900</span>
<span id="cb3-752"><a href="#cb3-752" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>shiny<span class="in">)</span></span>
<span id="cb3-753"><a href="#cb3-753" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>plotly<span class="in">)</span></span>
<span id="cb3-754"><a href="#cb3-754" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>minpack<span class="fu">.lm</span><span class="in">)</span></span>
<span id="cb3-755"><a href="#cb3-755" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>dplyr<span class="in">)</span></span>
<span id="cb3-756"><a href="#cb3-756" aria-hidden="true" tabindex="-1"></a>library<span class="in">(</span>shinyjs<span class="in">)</span></span>
<span id="cb3-757"><a href="#cb3-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-758"><a href="#cb3-758" aria-hidden="true" tabindex="-1"></a># Beispieldaten</span>
<span id="cb3-759"><a href="#cb3-759" aria-hidden="true" tabindex="-1"></a>t_data &lt;- c<span class="in">(</span>0<span class="fu">.0</span><span class="op">,</span> 2<span class="fu">.7</span><span class="op">,</span> 5<span class="fu">.3</span><span class="op">,</span> 8<span class="fu">.3</span><span class="op">,</span> 11<span class="fu">.5</span><span class="op">,</span> 13<span class="fu">.6</span><span class="op">,</span> 15<span class="fu">.4</span><span class="op">,</span> 17<span class="fu">.1</span><span class="op">,</span> 19<span class="fu">.8</span><span class="op">,</span> 21<span class="fu">.1</span><span class="op">,</span> 22<span class="fu">.3</span><span class="op">,</span> 23<span class="fu">.5</span><span class="op">,</span> 24<span class="fu">.9</span><span class="op">,</span> 27<span class="fu">.5</span><span class="op">,</span> 30<span class="fu">.9</span><span class="op">,</span> 32<span class="fu">.4</span><span class="op">,</span> 35<span class="fu">.0</span><span class="op">,</span> 38<span class="fu">.3</span><span class="op">,</span> 39<span class="fu">.7</span><span class="op">,</span> 41<span class="fu">.6</span><span class="op">,</span> 43<span class="fu">.7</span><span class="op">,</span> 45<span class="fu">.3</span><span class="op">,</span> 46<span class="fu">.8</span><span class="op">,</span> 49<span class="fu">.8</span><span class="op">,</span> 52<span class="fu">.0</span><span class="op">,</span> 53<span class="fu">.6</span><span class="op">,</span> 55<span class="fu">.5</span><span class="op">,</span> 57<span class="fu">.5</span><span class="op">,</span> 59<span class="fu">.0</span><span class="op">,</span> 60<span class="fu">.7</span><span class="op">,</span> 62<span class="fu">.4</span><span class="op">,</span> 64<span class="fu">.4</span><span class="op">,</span> 66<span class="fu">.6</span><span class="op">,</span> 68<span class="fu">.1</span><span class="op">,</span> 69<span class="fu">.8</span><span class="op">,</span> 71<span class="fu">.4</span><span class="op">,</span> 73<span class="fu">.3</span><span class="op">,</span> 75<span class="fu">.0</span><span class="op">,</span> 76<span class="fu">.7</span><span class="op">,</span> 78<span class="fu">.4</span><span class="op">,</span> 80<span class="fu">.0</span><span class="op">,</span> 82<span class="fu">.2</span><span class="op">,</span> 83<span class="fu">.9</span><span class="op">,</span> 85<span class="fu">.4</span><span class="op">,</span> 87<span class="fu">.3</span><span class="op">,</span> 88<span class="fu">.8</span><span class="op">,</span> 90<span class="fu">.6</span><span class="op">,</span> 92<span class="fu">.0</span><span class="op">,</span> 93<span class="fu">.6</span><span class="op">,</span> 94<span class="fu">.8</span><span class="op">,</span> 96<span class="fu">.3</span><span class="op">,</span> 97<span class="fu">.9</span><span class="op">,</span> 99<span class="fu">.5</span><span class="op">,</span> 101<span class="fu">.1</span><span class="op">,</span> 102<span class="fu">.7</span><span class="op">,</span> 104<span class="fu">.3</span><span class="op">,</span> 106<span class="fu">.0</span><span class="op">,</span> 107<span class="fu">.7</span><span class="op">,</span> 109<span class="fu">.3</span><span class="op">,</span> 110<span class="fu">.9</span><span class="op">,</span> 112<span class="fu">.5</span><span class="op">,</span> 114<span class="fu">.8</span><span class="op">,</span> 116<span class="fu">.4</span><span class="op">,</span> 118<span class="fu">.1</span><span class="op">,</span> 119<span class="fu">.7</span><span class="op">,</span> 121<span class="fu">.3</span><span class="op">,</span> 122<span class="fu">.8</span><span class="op">,</span> 124<span class="fu">.3</span><span class="op">,</span> 125<span class="fu">.9</span><span class="op">,</span> 127<span class="fu">.4</span><span class="op">,</span> 128<span class="fu">.9</span><span class="op">,</span> 130<span class="fu">.6</span><span class="op">,</span> 132<span class="fu">.1</span><span class="op">,</span> 133<span class="fu">.6</span><span class="op">,</span> 135<span class="fu">.6</span><span class="op">,</span> 137<span class="fu">.1</span><span class="op">,</span> 138<span class="fu">.6</span><span class="op">,</span> 140<span class="fu">.1</span><span class="op">,</span> 141<span class="fu">.6</span><span class="op">,</span> 143<span class="fu">.1</span><span class="op">,</span> 144<span class="fu">.4</span><span class="op">,</span> 145<span class="fu">.8</span><span class="op">,</span> 147<span class="fu">.2</span><span class="op">,</span> 148<span class="fu">.4</span><span class="op">,</span> 149<span class="fu">.9</span><span class="op">,</span> 151<span class="fu">.6</span><span class="op">,</span> 153<span class="fu">.1</span><span class="op">,</span> 154<span class="fu">.7</span><span class="op">,</span> 156<span class="fu">.1</span><span class="op">,</span> 157<span class="fu">.4</span><span class="op">,</span> 158<span class="fu">.7</span><span class="op">,</span> 160<span class="fu">.5</span><span class="op">,</span> 161<span class="fu">.9</span><span class="op">,</span> 163<span class="fu">.3</span><span class="op">,</span> 164<span class="fu">.7</span><span class="op">,</span> 166<span class="fu">.2</span><span class="op">,</span> 167<span class="fu">.6</span><span class="op">,</span> 169<span class="fu">.1</span><span class="op">,</span> 172<span class="fu">.6</span><span class="op">,</span> 173<span class="fu">.9</span><span class="op">,</span> 175<span class="fu">.4</span><span class="op">,</span> 176<span class="fu">.7</span><span class="op">,</span> 178<span class="fu">.1</span><span class="op">,</span> 179<span class="fu">.6</span><span class="op">,</span> 181<span class="fu">.0</span><span class="op">,</span> 182<span class="fu">.4</span><span class="op">,</span> 183<span class="fu">.8</span><span class="op">,</span> 185<span class="fu">.3</span><span class="op">,</span> 186<span class="fu">.7</span><span class="op">,</span> 188<span class="fu">.2</span><span class="op">,</span> 189<span class="fu">.6</span><span class="op">,</span> 191<span class="fu">.0</span><span class="op">,</span> 192<span class="fu">.4</span><span class="op">,</span> 193<span class="fu">.8</span><span class="op">,</span> 195<span class="fu">.2</span><span class="op">,</span> 196<span class="fu">.6</span><span class="op">,</span> 198<span class="fu">.0</span><span class="op">,</span> 199<span class="fu">.3</span><span class="op">,</span> 200<span class="fu">.7</span><span class="op">,</span> 202<span class="fu">.0</span><span class="op">,</span> 203<span class="fu">.3</span><span class="op">,</span> 204<span class="fu">.7</span><span class="op">,</span> 206<span class="fu">.1</span><span class="op">,</span> 207<span class="fu">.5</span><span class="op">,</span> 208<span class="fu">.8</span><span class="op">,</span> 210<span class="fu">.2</span><span class="op">,</span> 211<span class="fu">.6</span><span class="op">,</span> 213<span class="fu">.0</span><span class="op">,</span> 214<span class="fu">.3</span><span class="op">,</span> 215<span class="fu">.7</span><span class="op">,</span> 217<span class="fu">.1</span><span class="op">,</span> 218<span class="fu">.4</span><span class="op">,</span> 219<span class="fu">.8</span><span class="op">,</span> 221<span class="fu">.1</span><span class="op">,</span> 222<span class="fu">.4</span><span class="op">,</span> 223<span class="fu">.7</span><span class="op">,</span> 225<span class="fu">.0</span><span class="op">,</span> 226<span class="fu">.3</span><span class="op">,</span> 227<span class="fu">.7</span><span class="op">,</span> 229<span class="fu">.0</span><span class="op">,</span> 230<span class="fu">.5</span><span class="op">,</span> 231<span class="fu">.9</span><span class="op">,</span> 233<span class="fu">.1</span><span class="op">,</span> 234<span class="fu">.4</span><span class="in">)</span></span>
<span id="cb3-760"><a href="#cb3-760" aria-hidden="true" tabindex="-1"></a>VO2_data &lt;- c<span class="in">(</span>0<span class="fu">.823</span><span class="op">,</span> 0<span class="fu">.898</span><span class="op">,</span> 0<span class="fu">.966</span><span class="op">,</span> 1<span class="fu">.122</span><span class="op">,</span> 1<span class="fu">.281</span><span class="op">,</span> 1<span class="fu">.313</span><span class="op">,</span> 1<span class="fu">.463</span><span class="op">,</span> 1<span class="fu">.537</span><span class="op">,</span> 1<span class="fu">.602</span><span class="op">,</span> 1<span class="fu">.595</span><span class="op">,</span> 1<span class="fu">.598</span><span class="op">,</span> 1<span class="fu">.674</span><span class="op">,</span> 1<span class="fu">.923</span><span class="op">,</span> 2<span class="fu">.168</span><span class="op">,</span> 2<span class="fu">.439</span><span class="op">,</span> 2<span class="fu">.670</span><span class="op">,</span> 2<span class="fu">.797</span><span class="op">,</span> 2<span class="fu">.712</span><span class="op">,</span> 2<span class="fu">.688</span><span class="op">,</span> 2<span class="fu">.968</span><span class="op">,</span> 3<span class="fu">.228</span><span class="op">,</span> 3<span class="fu">.371</span><span class="op">,</span> 3<span class="fu">.673</span><span class="op">,</span> 3<span class="fu">.938</span><span class="op">,</span> 4<span class="fu">.076</span><span class="op">,</span> 3<span class="fu">.959</span><span class="op">,</span> 3<span class="fu">.886</span><span class="op">,</span> 3<span class="fu">.880</span><span class="op">,</span> 3<span class="fu">.928</span><span class="op">,</span> 3<span class="fu">.962</span><span class="op">,</span> 4<span class="fu">.173</span><span class="op">,</span> 4<span class="fu">.381</span><span class="op">,</span> 4<span class="fu">.268</span><span class="op">,</span> 4<span class="fu">.208</span><span class="op">,</span> 4<span class="fu">.234</span><span class="op">,</span> 4<span class="fu">.132</span><span class="op">,</span> 4<span class="fu">.109</span><span class="op">,</span> 4<span class="fu">.192</span><span class="op">,</span> 4<span class="fu">.304</span><span class="op">,</span> 4<span class="fu">.493</span><span class="op">,</span> 4<span class="fu">.352</span><span class="op">,</span> 4<span class="fu">.349</span><span class="op">,</span> 4<span class="fu">.332</span><span class="op">,</span> 4<span class="fu">.346</span><span class="op">,</span> 4<span class="fu">.345</span><span class="op">,</span> 4<span class="fu">.373</span><span class="op">,</span> 4<span class="fu">.320</span><span class="op">,</span> 4<span class="fu">.286</span><span class="op">,</span> 4<span class="fu">.353</span><span class="op">,</span> 4<span class="fu">.346</span><span class="op">,</span> 4<span class="fu">.287</span><span class="op">,</span> 4<span class="fu">.322</span><span class="op">,</span> 4<span class="fu">.250</span><span class="op">,</span> 4<span class="fu">.332</span><span class="op">,</span> 4<span class="fu">.257</span><span class="op">,</span> 4<span class="fu">.161</span><span class="op">,</span> 4<span class="fu">.120</span><span class="op">,</span> 4<span class="fu">.144</span><span class="op">,</span> 4<span class="fu">.115</span><span class="op">,</span> 4<span class="fu">.158</span><span class="op">,</span> 4<span class="fu">.186</span><span class="op">,</span> 4<span class="fu">.206</span><span class="op">,</span> 4<span class="fu">.220</span><span class="op">,</span> 4<span class="fu">.259</span><span class="op">,</span> 4<span class="fu">.291</span><span class="op">,</span> 4<span class="fu">.279</span><span class="op">,</span> 4<span class="fu">.295</span><span class="op">,</span> 4<span class="fu">.339</span><span class="op">,</span> 4<span class="fu">.371</span><span class="op">,</span> 4<span class="fu">.425</span><span class="op">,</span> 4<span class="fu">.448</span><span class="op">,</span> 4<span class="fu">.474</span><span class="op">,</span> 4<span class="fu">.517</span><span class="op">,</span> 4<span class="fu">.536</span><span class="op">,</span> 4<span class="fu">.544</span><span class="op">,</span> 4<span class="fu">.528</span><span class="op">,</span> 4<span class="fu">.432</span><span class="op">,</span> 4<span class="fu">.371</span><span class="op">,</span> 4<span class="fu">.367</span><span class="op">,</span> 4<span class="fu">.430</span><span class="op">,</span> 4<span class="fu">.492</span><span class="op">,</span> 4<span class="fu">.535</span><span class="op">,</span> 4<span class="fu">.510</span><span class="op">,</span> 4<span class="fu">.433</span><span class="op">,</span> 4<span class="fu">.399</span><span class="op">,</span> 4<span class="fu">.305</span><span class="op">,</span> 4<span class="fu">.308</span><span class="op">,</span> 4<span class="fu">.304</span><span class="op">,</span> 4<span class="fu">.366</span><span class="op">,</span> 4<span class="fu">.434</span><span class="op">,</span> 4<span class="fu">.501</span><span class="op">,</span> 4<span class="fu">.535</span><span class="op">,</span> 4<span class="fu">.512</span><span class="op">,</span> 4<span class="fu">.463</span><span class="op">,</span> 4<span class="fu">.509</span><span class="op">,</span> 4<span class="fu">.529</span><span class="op">,</span> 4<span class="fu">.586</span><span class="op">,</span> 4<span class="fu">.624</span><span class="op">,</span> 4<span class="fu">.740</span><span class="op">,</span> 4<span class="fu">.769</span><span class="op">,</span> 4<span class="fu">.788</span><span class="op">,</span> 4<span class="fu">.794</span><span class="op">,</span> 4<span class="fu">.824</span><span class="op">,</span> 4<span class="fu">.830</span><span class="op">,</span> 4<span class="fu">.888</span><span class="op">,</span> 4<span class="fu">.887</span><span class="op">,</span> 4<span class="fu">.915</span><span class="op">,</span> 4<span class="fu">.924</span><span class="op">,</span> 4<span class="fu">.955</span><span class="op">,</span> 4<span class="fu">.965</span><span class="op">,</span> 4<span class="fu">.982</span><span class="op">,</span> 4<span class="fu">.992</span><span class="op">,</span> 5<span class="fu">.016</span><span class="op">,</span> 5<span class="fu">.024</span><span class="op">,</span> 5<span class="fu">.033</span><span class="op">,</span> 5<span class="fu">.066</span><span class="op">,</span> 5<span class="fu">.081</span><span class="op">,</span> 5<span class="fu">.053</span><span class="op">,</span> 5<span class="fu">.035</span><span class="op">,</span> 4<span class="fu">.997</span><span class="op">,</span> 5<span class="fu">.018</span><span class="op">,</span> 5<span class="fu">.038</span><span class="op">,</span> 5<span class="fu">.035</span><span class="op">,</span> 5<span class="fu">.039</span><span class="op">,</span> 4<span class="fu">.970</span><span class="op">,</span> 4<span class="fu">.970</span><span class="op">,</span> 4<span class="fu">.973</span><span class="op">,</span> 4<span class="fu">.964</span><span class="op">,</span> 4<span class="fu">.945</span><span class="op">,</span> 4<span class="fu">.953</span><span class="op">,</span> 4<span class="fu">.974</span><span class="op">,</span> 4<span class="fu">.984</span><span class="op">,</span> 4<span class="fu">.997</span><span class="op">,</span> 4<span class="fu">.995</span><span class="op">,</span> 4<span class="fu">.946</span><span class="op">,</span> 4<span class="fu">.997</span><span class="op">,</span> 5<span class="fu">.014</span><span class="op">,</span> 5<span class="fu">.092</span><span class="op">,</span> 5<span class="fu">.072</span><span class="op">,</span> 5<span class="fu">.111</span><span class="op">,</span> 5<span class="fu">.088</span><span class="op">,</span> 5<span class="fu">.065</span><span class="op">,</span> 5<span class="fu">.061</span><span class="op">,</span> 5<span class="fu">.038</span><span class="in">)</span></span>
<span id="cb3-761"><a href="#cb3-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-762"><a href="#cb3-762" aria-hidden="true" tabindex="-1"></a># UI</span>
<span id="cb3-763"><a href="#cb3-763" aria-hidden="true" tabindex="-1"></a>ui &lt;- fluidPage<span class="in">(</span></span>
<span id="cb3-764"><a href="#cb3-764" aria-hidden="true" tabindex="-1"></a>  useShinyjs<span class="in">()</span><span class="op">,</span></span>
<span id="cb3-765"><a href="#cb3-765" aria-hidden="true" tabindex="-1"></a>  titlePanel<span class="in">(</span>"Bi-exponentielle V̇O2-Modellfunktion"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-766"><a href="#cb3-766" aria-hidden="true" tabindex="-1"></a>  fluidRow<span class="in">(</span></span>
<span id="cb3-767"><a href="#cb3-767" aria-hidden="true" tabindex="-1"></a>    column<span class="in">(</span>3<span class="op">,</span></span>
<span id="cb3-768"><a href="#cb3-768" aria-hidden="true" tabindex="-1"></a>           style = "height<span class="in">:</span> 90vh; overflow-y<span class="in">:</span> auto;"<span class="op">,</span></span>
<span id="cb3-769"><a href="#cb3-769" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb3-770"><a href="#cb3-770" aria-hidden="true" tabindex="-1"></a>           tags$h4<span class="in">(</span>tags$strong<span class="in">(</span>"Modellparameter<span class="in">:</span>"<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-771"><a href="#cb3-771" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"VO2"<span class="op">,</span> "V̇O2_fast"<span class="op">,</span> min = 0<span class="fu">.0</span><span class="op">,</span> max = 7<span class="fu">.0</span><span class="op">,</span> value = 3<span class="fu">.7</span><span class="op">,</span> step = 0<span class="fu">.01</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-772"><a href="#cb3-772" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"tau_fast"<span class="op">,</span> "Tau_fast"<span class="op">,</span> min = 10<span class="op">,</span> max = 120<span class="op">,</span> value = 45<span class="op">,</span> step = 0<span class="fu">.1</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-773"><a href="#cb3-773" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"VO2_Start"<span class="op">,</span> "V̇O2_Start"<span class="op">,</span> min = 0<span class="fu">.0</span><span class="op">,</span> max = 4<span class="fu">.0</span><span class="op">,</span> value = 0<span class="fu">.8</span><span class="op">,</span> step = 0<span class="fu">.01</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-774"><a href="#cb3-774" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"VO2_Ruhe"<span class="op">,</span> "V̇O2_Ruhe"<span class="op">,</span> min = 0<span class="op">,</span> max = 1<span class="op">,</span> value = 0<span class="fu">.4</span><span class="op">,</span> step = 0<span class="fu">.1</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-775"><a href="#cb3-775" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"time_delay"<span class="op">,</span> "Zeitverzögerung_fast"<span class="op">,</span> min = 0<span class="op">,</span> max = 600<span class="op">,</span> value = 0<span class="op">,</span> step = 1<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-776"><a href="#cb3-776" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"VO2_slow"<span class="op">,</span> "V̇O2_slow"<span class="op">,</span> min = 0<span class="fu">.0</span><span class="op">,</span> max = 1<span class="fu">.0</span><span class="op">,</span> value = 0<span class="fu">.3</span><span class="op">,</span> step = 0<span class="fu">.01</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-777"><a href="#cb3-777" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"tau_slow"<span class="op">,</span> "Tau_slow"<span class="op">,</span> min = 90<span class="op">,</span> max = 600<span class="op">,</span> value = 110<span class="op">,</span> step = 0<span class="fu">.1</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-778"><a href="#cb3-778" aria-hidden="true" tabindex="-1"></a>           sliderInput<span class="in">(</span>"time_delay_slow"<span class="op">,</span> "Zeitverzögerung_slow"<span class="op">,</span> min = 0<span class="op">,</span> max = 1200<span class="op">,</span> value = 160<span class="op">,</span> step = 1<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-779"><a href="#cb3-779" aria-hidden="true" tabindex="-1"></a>           conditionalPanel<span class="in">(</span></span>
<span id="cb3-780"><a href="#cb3-780" aria-hidden="true" tabindex="-1"></a>             condition = "output<span class="fu">.showFitSlider</span>"<span class="op">,</span></span>
<span id="cb3-781"><a href="#cb3-781" aria-hidden="true" tabindex="-1"></a>             sliderInput<span class="in">(</span>"nlsLM_end"<span class="op">,</span> "nlsLM Ende"<span class="op">,</span> min = 10<span class="op">,</span> max = 300<span class="op">,</span> value = 300<span class="op">,</span> step = 1<span class="in">)</span></span>
<span id="cb3-782"><a href="#cb3-782" aria-hidden="true" tabindex="-1"></a>           <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-783"><a href="#cb3-783" aria-hidden="true" tabindex="-1"></a>           actionButton<span class="in">(</span>"toggle_data"<span class="op">,</span> "Beispieldaten einfügen"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-784"><a href="#cb3-784" aria-hidden="true" tabindex="-1"></a>           br<span class="in">()</span><span class="op">,</span> br<span class="in">()</span><span class="op">,</span></span>
<span id="cb3-785"><a href="#cb3-785" aria-hidden="true" tabindex="-1"></a>           fileInput<span class="in">(</span>"file_upload"<span class="op">,</span> "CSV-Datei hochladen"<span class="op">,</span> accept = "<span class="fu">.csv</span>"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-786"><a href="#cb3-786" aria-hidden="true" tabindex="-1"></a>           tags$h4<span class="in">(</span>tags$strong<span class="in">(</span>"Modellanpassung<span class="in">:</span>"<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-787"><a href="#cb3-787" aria-hidden="true" tabindex="-1"></a>           actionButton<span class="in">(</span>"fit_fast"<span class="op">,</span> "1. Fit<span class="in">:</span> Schnelle Komponente"<span class="in">)</span><span class="op">,</span>br<span class="in">()</span><span class="op">,</span></span>
<span id="cb3-788"><a href="#cb3-788" aria-hidden="true" tabindex="-1"></a>           actionButton<span class="in">(</span>"fit_slow"<span class="op">,</span> "2. Fit<span class="in">:</span> Langsame Komponente <span class="op">&amp;</span> Verfeinerung"<span class="in">)</span><span class="op">,</span>br<span class="in">()</span><span class="op">,</span></span>
<span id="cb3-789"><a href="#cb3-789" aria-hidden="true" tabindex="-1"></a>           actionButton<span class="in">(</span>"fit_optimize"<span class="op">,</span> "3. Fit<span class="in">:</span> Optimierung"<span class="in">)</span></span>
<span id="cb3-790"><a href="#cb3-790" aria-hidden="true" tabindex="-1"></a>    <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-791"><a href="#cb3-791" aria-hidden="true" tabindex="-1"></a>    mainPanel<span class="in">(</span></span>
<span id="cb3-792"><a href="#cb3-792" aria-hidden="true" tabindex="-1"></a>      width = 9<span class="op">,</span></span>
<span id="cb3-793"><a href="#cb3-793" aria-hidden="true" tabindex="-1"></a>      plotlyOutput<span class="in">(</span>"plot"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-794"><a href="#cb3-794" aria-hidden="true" tabindex="-1"></a>      uiOutput<span class="in">(</span>"instructions"<span class="in">)</span></span>
<span id="cb3-795"><a href="#cb3-795" aria-hidden="true" tabindex="-1"></a>    <span class="in">)</span></span>
<span id="cb3-796"><a href="#cb3-796" aria-hidden="true" tabindex="-1"></a>  <span class="in">)</span></span>
<span id="cb3-797"><a href="#cb3-797" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb3-798"><a href="#cb3-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-799"><a href="#cb3-799" aria-hidden="true" tabindex="-1"></a># Server</span>
<span id="cb3-800"><a href="#cb3-800" aria-hidden="true" tabindex="-1"></a>server &lt;- function<span class="in">(</span>input<span class="op">,</span> output<span class="op">,</span> session<span class="in">)</span> {</span>
<span id="cb3-801"><a href="#cb3-801" aria-hidden="true" tabindex="-1"></a>  show_data &lt;- reactiveVal(FALSE)</span>
<span id="cb3-802"><a href="#cb3-802" aria-hidden="true" tabindex="-1"></a>  uploaded_data &lt;- reactiveVal(NULL)</span>
<span id="cb3-803"><a href="#cb3-803" aria-hidden="true" tabindex="-1"></a>  current_data &lt;- reactiveVal(NULL)</span>
<span id="cb3-804"><a href="#cb3-804" aria-hidden="true" tabindex="-1"></a>  current_r_squared &lt;- reactiveVal(NA)</span>
<span id="cb3-805"><a href="#cb3-805" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-806"><a href="#cb3-806" aria-hidden="true" tabindex="-1"></a>  calculate_r_squared &lt;- function(observed<span class="op">,</span> predicted) {</span>
<span id="cb3-807"><a href="#cb3-807" aria-hidden="true" tabindex="-1"></a>    ss_res &lt;- sum((observed - predicted)^2<span class="op">,</span> na<span class="fu">.rm</span> = TRUE)</span>
<span id="cb3-808"><a href="#cb3-808" aria-hidden="true" tabindex="-1"></a>    ss_tot &lt;- sum<span class="in">((</span>observed - mean<span class="in">(</span>observed<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">))</span>^2<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span></span>
<span id="cb3-809"><a href="#cb3-809" aria-hidden="true" tabindex="-1"></a>    return<span class="in">(</span>1 - <span class="in">(</span>ss_res / ss_tot<span class="in">))</span></span>
<span id="cb3-810"><a href="#cb3-810" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-811"><a href="#cb3-811" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-812"><a href="#cb3-812" aria-hidden="true" tabindex="-1"></a>  observeEvent(input$toggle_data<span class="op">,</span> {</span>
<span id="cb3-813"><a href="#cb3-813" aria-hidden="true" tabindex="-1"></a>    show_data(!show_data())</span>
<span id="cb3-814"><a href="#cb3-814" aria-hidden="true" tabindex="-1"></a>    if (show_data()) {</span>
<span id="cb3-815"><a href="#cb3-815" aria-hidden="true" tabindex="-1"></a>      current_data(data<span class="fu">.frame</span><span class="in">(</span>t_s = t_data<span class="op">,</span> VO2_t = VO2_data<span class="in">)</span>)</span>
<span id="cb3-816"><a href="#cb3-816" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-817"><a href="#cb3-817" aria-hidden="true" tabindex="-1"></a>      current_data(NULL)</span>
<span id="cb3-818"><a href="#cb3-818" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-819"><a href="#cb3-819" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-820"><a href="#cb3-820" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-821"><a href="#cb3-821" aria-hidden="true" tabindex="-1"></a>  observeEvent(input$file_upload<span class="op">,</span> {</span>
<span id="cb3-822"><a href="#cb3-822" aria-hidden="true" tabindex="-1"></a>    req(input$file_upload)</span>
<span id="cb3-823"><a href="#cb3-823" aria-hidden="true" tabindex="-1"></a>    df &lt;- read<span class="fu">.csv</span><span class="in">(</span>input$file_upload$datapath<span class="in">)</span></span>
<span id="cb3-824"><a href="#cb3-824" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>"t_s" %in% names<span class="in">(</span>df<span class="in">)</span> <span class="op">&amp;&amp;</span> "VO2_t" %in% names<span class="in">(</span>df<span class="in">))</span> {</span>
<span id="cb3-825"><a href="#cb3-825" aria-hidden="true" tabindex="-1"></a>      uploaded_data(df)</span>
<span id="cb3-826"><a href="#cb3-826" aria-hidden="true" tabindex="-1"></a>      current_data(df)</span>
<span id="cb3-827"><a href="#cb3-827" aria-hidden="true" tabindex="-1"></a>      show_data(TRUE)</span>
<span id="cb3-828"><a href="#cb3-828" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-829"><a href="#cb3-829" aria-hidden="true" tabindex="-1"></a>      showModal(modalDialog(</span>
<span id="cb3-830"><a href="#cb3-830" aria-hidden="true" tabindex="-1"></a>        title = "Invalid CSV"<span class="op">,</span></span>
<span id="cb3-831"><a href="#cb3-831" aria-hidden="true" tabindex="-1"></a>        "Die csv-Datei muss 't_s' und 'VO2_t' als Spaltennamen beinhalten."<span class="op">,</span></span>
<span id="cb3-832"><a href="#cb3-832" aria-hidden="true" tabindex="-1"></a>        easyClose = TRUE<span class="op">,</span></span>
<span id="cb3-833"><a href="#cb3-833" aria-hidden="true" tabindex="-1"></a>        footer = NULL</span>
<span id="cb3-834"><a href="#cb3-834" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb3-835"><a href="#cb3-835" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-836"><a href="#cb3-836" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-837"><a href="#cb3-837" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-838"><a href="#cb3-838" aria-hidden="true" tabindex="-1"></a>  observe({</span>
<span id="cb3-839"><a href="#cb3-839" aria-hidden="true" tabindex="-1"></a>    req(input$VO2_Start<span class="op">,</span> input$VO2_Ruhe)</span>
<span id="cb3-840"><a href="#cb3-840" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>input$VO2_Start &lt; input$VO2_Ruhe<span class="in">)</span> {</span>
<span id="cb3-841"><a href="#cb3-841" aria-hidden="true" tabindex="-1"></a>      updateSliderInput(session<span class="op">,</span> "VO2_Start"<span class="op">,</span> value = input$VO2_Ruhe)</span>
<span id="cb3-842"><a href="#cb3-842" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-843"><a href="#cb3-843" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-844"><a href="#cb3-844" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-845"><a href="#cb3-845" aria-hidden="true" tabindex="-1"></a>  # Hilfsfunktion zur Bestimmung des nächstgelegenen VO2-Wertes</span>
<span id="cb3-846"><a href="#cb3-846" aria-hidden="true" tabindex="-1"></a>  find_nearest_VO2 &lt;- function<span class="in">(</span>data<span class="op">,</span> t_delay<span class="in">)</span> {</span>
<span id="cb3-847"><a href="#cb3-847" aria-hidden="true" tabindex="-1"></a>    req(data<span class="op">,</span> t_delay)</span>
<span id="cb3-848"><a href="#cb3-848" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>nrow<span class="in">(</span>data<span class="in">)</span> == 0<span class="in">)</span> return<span class="in">(</span>NA<span class="in">)</span></span>
<span id="cb3-849"><a href="#cb3-849" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-850"><a href="#cb3-850" aria-hidden="true" tabindex="-1"></a>    index &lt;- which<span class="fu">.min</span><span class="in">(</span>abs<span class="in">(</span>data$t_s - t_delay<span class="in">))</span></span>
<span id="cb3-851"><a href="#cb3-851" aria-hidden="true" tabindex="-1"></a>    return<span class="in">(</span>data$VO2_t<span class="ex">[</span><span class="ss">index</span><span class="ex">]</span><span class="in">)</span></span>
<span id="cb3-852"><a href="#cb3-852" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-853"><a href="#cb3-853" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-854"><a href="#cb3-854" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-855"><a href="#cb3-855" aria-hidden="true" tabindex="-1"></a>  observeEvent(input$fit_fast<span class="op">,</span> {</span>
<span id="cb3-856"><a href="#cb3-856" aria-hidden="true" tabindex="-1"></a>    req(current_data())</span>
<span id="cb3-857"><a href="#cb3-857" aria-hidden="true" tabindex="-1"></a>    Beispieldaten &lt;- current_data()</span>
<span id="cb3-858"><a href="#cb3-858" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-859"><a href="#cb3-859" aria-hidden="true" tabindex="-1"></a>    t_delay &lt;- isolate(input$time_delay)</span>
<span id="cb3-860"><a href="#cb3-860" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-861"><a href="#cb3-861" aria-hidden="true" tabindex="-1"></a>    # Bestimme den nächstgelegenen VO2-Wert als VO2_Start</span>
<span id="cb3-862"><a href="#cb3-862" aria-hidden="true" tabindex="-1"></a>    VO2_Start &lt;- find_nearest_VO2<span class="in">(</span>Beispieldaten<span class="op">,</span> t_delay<span class="in">)</span></span>
<span id="cb3-863"><a href="#cb3-863" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-864"><a href="#cb3-864" aria-hidden="true" tabindex="-1"></a>    # Aktualisiere den VO2_Start Slider</span>
<span id="cb3-865"><a href="#cb3-865" aria-hidden="true" tabindex="-1"></a>    updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2_Start"<span class="op">,</span> value = VO2_Start<span class="in">)</span></span>
<span id="cb3-866"><a href="#cb3-866" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-867"><a href="#cb3-867" aria-hidden="true" tabindex="-1"></a>    data_subset &lt;- Beispieldaten<span class="ex">[</span><span class="ss">Beispieldaten</span><span class="op">$</span><span class="ss">t_s </span><span class="op">&gt;</span>= t_delay<span class="op">,</span> ]</span>
<span id="cb3-868"><a href="#cb3-868" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-869"><a href="#cb3-869" aria-hidden="true" tabindex="-1"></a>    best_fit &lt;- NULL</span>
<span id="cb3-870"><a href="#cb3-870" aria-hidden="true" tabindex="-1"></a>    best_rss &lt;- Inf</span>
<span id="cb3-871"><a href="#cb3-871" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-872"><a href="#cb3-872" aria-hidden="true" tabindex="-1"></a>    withProgress<span class="in">(</span>message = 'Fitting in progress'<span class="op">,</span> value = 0<span class="op">,</span> <span class="er">{</span></span>
<span id="cb3-873"><a href="#cb3-873" aria-hidden="true" tabindex="-1"></a>      for (i in 1<span class="ch">:</span><span class="dv">100</span>) {</span>
<span id="cb3-874"><a href="#cb3-874" aria-hidden="true" tabindex="-1"></a>        # <span class="dv">Randomisierte Startwerte innerhalb der Slider-Grenzen</span></span>
<span id="cb3-875"><a href="#cb3-875" aria-hidden="true" tabindex="-1"></a>        <span class="dv">VO2_start </span>&lt;<span class="dv">- </span>runif<span class="fu">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0.5</span><span class="op">,</span> <span class="dv">7.0</span><span class="fu">)</span></span>
<span id="cb3-876"><a href="#cb3-876" aria-hidden="true" tabindex="-1"></a>        <span class="dv">tau_fast_start </span>&lt;<span class="dv">- </span>runif<span class="fu">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">120</span><span class="fu">)</span></span>
<span id="cb3-877"><a href="#cb3-877" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-878"><a href="#cb3-878" aria-hidden="true" tabindex="-1"></a>        <span class="dv">start_values </span>&lt;<span class="dv">- </span>list<span class="fu">(</span></span>
<span id="cb3-879"><a href="#cb3-879" aria-hidden="true" tabindex="-1"></a>          <span class="dv">VO2 </span>= <span class="dv">VO2_start</span><span class="op">,</span></span>
<span id="cb3-880"><a href="#cb3-880" aria-hidden="true" tabindex="-1"></a>          <span class="dv">tau_fast </span>= <span class="dv">tau_fast_start</span></span>
<span id="cb3-881"><a href="#cb3-881" aria-hidden="true" tabindex="-1"></a>        <span class="fu">)</span></span>
<span id="cb3-882"><a href="#cb3-882" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-883"><a href="#cb3-883" aria-hidden="true" tabindex="-1"></a>        <span class="dv">fit </span>&lt;<span class="dv">- </span>try<span class="fu">(</span>nlsLM<span class="fu">(</span><span class="dv">VO2_t </span>~ <span class="dv">VO2 </span>* <span class="fu">(</span><span class="dv">1</span> <span class="dv">- </span><span class="fu">exp(</span><span class="dv">-</span><span class="fu">(</span><span class="dv">t_s - t_delay</span><span class="fu">)</span> / <span class="dv">tau_fast</span><span class="fu">))</span> + <span class="dv">VO2_Start</span><span class="op">,</span></span>
<span id="cb3-884"><a href="#cb3-884" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">data </span>= <span class="dv">data_subset</span><span class="op">,</span></span>
<span id="cb3-885"><a href="#cb3-885" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">start</span> = <span class="dv">start_values</span><span class="op">,</span></span>
<span id="cb3-886"><a href="#cb3-886" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">lower </span>= c<span class="fu">(</span><span class="dv">VO2 </span>= <span class="dv">0.5</span><span class="op">,</span> <span class="dv">tau_fast </span>= <span class="dv">10</span><span class="fu">)</span><span class="op">,</span></span>
<span id="cb3-887"><a href="#cb3-887" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">upper </span>= c<span class="fu">(</span><span class="dv">VO2 </span>= <span class="dv">7.0</span><span class="op">,</span> <span class="dv">tau_fast </span>= <span class="dv">120</span><span class="fu">)</span><span class="op">,</span></span>
<span id="cb3-888"><a href="#cb3-888" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">control </span>= <span class="dv">nls</span>.control<span class="fu">(</span><span class="dv">maxiter </span>= <span class="dv">1024</span><span class="fu">))</span><span class="op">,</span> <span class="dv">silent </span>= <span class="dv">TRUE</span><span class="fu">)</span></span>
<span id="cb3-889"><a href="#cb3-889" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-890"><a href="#cb3-890" aria-hidden="true" tabindex="-1"></a>        <span class="dv">if </span><span class="fu">(</span><span class="at">!</span>inherits<span class="fu">(</span><span class="dv">fit</span><span class="op">,</span> <span class="st">"try-error"</span><span class="fu">))</span> {</span>
<span id="cb3-891"><a href="#cb3-891" aria-hidden="true" tabindex="-1"></a>          <span class="dv">rss </span>&lt;<span class="dv">- </span>sum<span class="fu">(</span>residuals<span class="fu">(</span><span class="dv">fit</span><span class="fu">)</span>^<span class="dv">2</span><span class="fu">)</span></span>
<span id="cb3-892"><a href="#cb3-892" aria-hidden="true" tabindex="-1"></a>          <span class="dv">if </span><span class="fu">(</span><span class="dv">rss </span>&lt; <span class="dv">best_rss</span><span class="fu">)</span> {</span>
<span id="cb3-893"><a href="#cb3-893" aria-hidden="true" tabindex="-1"></a>            <span class="dv">best_rss </span>&lt;<span class="dv">- rss</span></span>
<span id="cb3-894"><a href="#cb3-894" aria-hidden="true" tabindex="-1"></a>            <span class="dv">best_fit </span>&lt;<span class="dv">- fit</span></span>
<span id="cb3-895"><a href="#cb3-895" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-896"><a href="#cb3-896" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-897"><a href="#cb3-897" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-898"><a href="#cb3-898" aria-hidden="true" tabindex="-1"></a>        incProgress(1/100<span class="op">,</span> detail = paste<span class="in">(</span>"Iteration"<span class="op">,</span> i<span class="in">)</span>)</span>
<span id="cb3-899"><a href="#cb3-899" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-900"><a href="#cb3-900" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb3-901"><a href="#cb3-901" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-902"><a href="#cb3-902" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>!is<span class="fu">.null</span><span class="in">(</span>best_fit<span class="in">))</span> {</span>
<span id="cb3-903"><a href="#cb3-903" aria-hidden="true" tabindex="-1"></a>      params &lt;- as<span class="fu">.list</span><span class="in">(</span>coef<span class="in">(</span>best_fit<span class="in">))</span></span>
<span id="cb3-904"><a href="#cb3-904" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2"<span class="op">,</span> value = params$VO2<span class="in">)</span></span>
<span id="cb3-905"><a href="#cb3-905" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "tau_fast"<span class="op">,</span> value = params$tau_fast<span class="in">)</span></span>
<span id="cb3-906"><a href="#cb3-906" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2_slow"<span class="op">,</span> value = 0<span class="in">)</span></span>
<span id="cb3-907"><a href="#cb3-907" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "tau_slow"<span class="op">,</span> value = 0<span class="in">)</span></span>
<span id="cb3-908"><a href="#cb3-908" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-909"><a href="#cb3-909" aria-hidden="true" tabindex="-1"></a>      predicted &lt;- VO2_Start <span class="op">+</span> params$VO2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>data_subset$t_s - t_delay<span class="in">)</span> / params$tau_fast<span class="in">))</span></span>
<span id="cb3-910"><a href="#cb3-910" aria-hidden="true" tabindex="-1"></a>      r_squared &lt;- calculate_r_squared<span class="in">(</span>data_subset$VO2_t<span class="op">,</span> predicted<span class="in">)</span></span>
<span id="cb3-911"><a href="#cb3-911" aria-hidden="true" tabindex="-1"></a>      current_r_squared<span class="in">(</span>r_squared<span class="in">)</span></span>
<span id="cb3-912"><a href="#cb3-912" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-913"><a href="#cb3-913" aria-hidden="true" tabindex="-1"></a>      showNotification<span class="in">(</span>sprintf<span class="in">(</span>"Schritt 1 erfolgreich. R²<span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> r_squared<span class="in">)</span><span class="op">,</span> type = "message"<span class="in">)</span></span>
<span id="cb3-914"><a href="#cb3-914" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-915"><a href="#cb3-915" aria-hidden="true" tabindex="-1"></a>      showModal(modalDialog(</span>
<span id="cb3-916"><a href="#cb3-916" aria-hidden="true" tabindex="-1"></a>        title = "nlsLM fehlgeschlagen"<span class="op">,</span></span>
<span id="cb3-917"><a href="#cb3-917" aria-hidden="true" tabindex="-1"></a>        "Die nicht-lineare Regression mittels Levenberg-Marquardt-Algorithmus konnte nicht erfolgreich durchgeführt werden."<span class="op">,</span></span>
<span id="cb3-918"><a href="#cb3-918" aria-hidden="true" tabindex="-1"></a>        easyClose = TRUE<span class="op">,</span></span>
<span id="cb3-919"><a href="#cb3-919" aria-hidden="true" tabindex="-1"></a>        footer = NULL</span>
<span id="cb3-920"><a href="#cb3-920" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb3-921"><a href="#cb3-921" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-922"><a href="#cb3-922" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-923"><a href="#cb3-923" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-924"><a href="#cb3-924" aria-hidden="true" tabindex="-1"></a>  observeEvent<span class="in">(</span>input$fit_slow<span class="op">,</span> <span class="er">{</span></span>
<span id="cb3-925"><a href="#cb3-925" aria-hidden="true" tabindex="-1"></a>    req(current_data())</span>
<span id="cb3-926"><a href="#cb3-926" aria-hidden="true" tabindex="-1"></a>    Beispieldaten &lt;- current_data()</span>
<span id="cb3-927"><a href="#cb3-927" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-928"><a href="#cb3-928" aria-hidden="true" tabindex="-1"></a>    req(input$time_delay<span class="op">,</span> input$VO2_Start<span class="op">,</span> input$VO2<span class="op">,</span> input$tau_fast)</span>
<span id="cb3-929"><a href="#cb3-929" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-930"><a href="#cb3-930" aria-hidden="true" tabindex="-1"></a>    t_delay &lt;- input$time_delay</span>
<span id="cb3-931"><a href="#cb3-931" aria-hidden="true" tabindex="-1"></a>    VO2_Start &lt;- input$VO2_Start</span>
<span id="cb3-932"><a href="#cb3-932" aria-hidden="true" tabindex="-1"></a>    VO2 &lt;- input$VO2</span>
<span id="cb3-933"><a href="#cb3-933" aria-hidden="true" tabindex="-1"></a>    tau_fast &lt;- input$tau_fast</span>
<span id="cb3-934"><a href="#cb3-934" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-935"><a href="#cb3-935" aria-hidden="true" tabindex="-1"></a>    # Setze VO2_slow und tau_slow auf die initialen Werte</span>
<span id="cb3-936"><a href="#cb3-936" aria-hidden="true" tabindex="-1"></a>    VO2_slow &lt;- 0<span class="fu">.4</span></span>
<span id="cb3-937"><a href="#cb3-937" aria-hidden="true" tabindex="-1"></a>    tau_slow &lt;- 160</span>
<span id="cb3-938"><a href="#cb3-938" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-939"><a href="#cb3-939" aria-hidden="true" tabindex="-1"></a>    data_subset &lt;- Beispieldaten<span class="ex">[</span><span class="ss">Beispieldaten</span><span class="op">$</span><span class="ss">t_s </span><span class="op">&gt;</span>= t_delay<span class="op">,</span> ]</span>
<span id="cb3-940"><a href="#cb3-940" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-941"><a href="#cb3-941" aria-hidden="true" tabindex="-1"></a>    # Berechne die obere Grenze für t_delay_slow</span>
<span id="cb3-942"><a href="#cb3-942" aria-hidden="true" tabindex="-1"></a>    t_delay_slow_upper &lt;- max<span class="in">(</span>Beispieldaten$t_s<span class="in">)</span></span>
<span id="cb3-943"><a href="#cb3-943" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-944"><a href="#cb3-944" aria-hidden="true" tabindex="-1"></a>    best_fit &lt;- NULL</span>
<span id="cb3-945"><a href="#cb3-945" aria-hidden="true" tabindex="-1"></a>    best_rss &lt;- Inf</span>
<span id="cb3-946"><a href="#cb3-946" aria-hidden="true" tabindex="-1"></a>    best_t_delay_slow &lt;- NULL</span>
<span id="cb3-947"><a href="#cb3-947" aria-hidden="true" tabindex="-1"></a>    best_VO2_fast &lt;- VO2</span>
<span id="cb3-948"><a href="#cb3-948" aria-hidden="true" tabindex="-1"></a>    best_tau_fast &lt;- tau_fast</span>
<span id="cb3-949"><a href="#cb3-949" aria-hidden="true" tabindex="-1"></a>    best_VO2_slow &lt;- VO2_slow</span>
<span id="cb3-950"><a href="#cb3-950" aria-hidden="true" tabindex="-1"></a>    best_tau_slow &lt;- tau_slow</span>
<span id="cb3-951"><a href="#cb3-951" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-952"><a href="#cb3-952" aria-hidden="true" tabindex="-1"></a>    # Berechne die Anzahl der Iterationen für t_delay_slow</span>
<span id="cb3-953"><a href="#cb3-953" aria-hidden="true" tabindex="-1"></a>    num_iterations &lt;- floor<span class="in">(</span>t_delay_slow_upper - <span class="in">(</span>tau_fast <span class="op">+</span> t_delay<span class="in">))</span> <span class="op">+</span> 1</span>
<span id="cb3-954"><a href="#cb3-954" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-955"><a href="#cb3-955" aria-hidden="true" tabindex="-1"></a>    withProgress<span class="in">(</span>message = 'Fitting in progress'<span class="op">,</span> value = 0<span class="op">,</span> <span class="er">{</span></span>
<span id="cb3-956"><a href="#cb3-956" aria-hidden="true" tabindex="-1"></a>      for (i in 1<span class="ch">:</span><span class="dv">num_iterations</span>) {</span>
<span id="cb3-957"><a href="#cb3-957" aria-hidden="true" tabindex="-1"></a>        <span class="dv">t_delay_slow </span>&lt;<span class="dv">- tau_fast </span>+ <span class="dv">t_delay </span>+ <span class="dv">i - 1</span></span>
<span id="cb3-958"><a href="#cb3-958" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-959"><a href="#cb3-959" aria-hidden="true" tabindex="-1"></a>        # <span class="dv">Fit VO2_fast und tau_fast nach unten</span></span>
<span id="cb3-960"><a href="#cb3-960" aria-hidden="true" tabindex="-1"></a>        <span class="dv">current_VO2_fast </span>&lt;<span class="dv">- best_VO2_fast</span></span>
<span id="cb3-961"><a href="#cb3-961" aria-hidden="true" tabindex="-1"></a>        <span class="dv">current_tau_fast </span>&lt;<span class="dv">- best_tau_fast</span></span>
<span id="cb3-962"><a href="#cb3-962" aria-hidden="true" tabindex="-1"></a>        <span class="dv">current_VO2_slow </span>&lt;<span class="dv">- best_VO2_slow</span></span>
<span id="cb3-963"><a href="#cb3-963" aria-hidden="true" tabindex="-1"></a>        <span class="dv">current_tau_slow </span>&lt;<span class="dv">- best_tau_slow</span></span>
<span id="cb3-964"><a href="#cb3-964" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-965"><a href="#cb3-965" aria-hidden="true" tabindex="-1"></a>        <span class="dv">model </span>&lt;<span class="dv">- </span>function<span class="fu">(</span><span class="dv">VO2_fast</span><span class="op">,</span> <span class="dv">tau_fast</span><span class="op">,</span> <span class="dv">VO2_slow</span><span class="op">,</span> <span class="dv">tau_slow</span><span class="op">,</span> <span class="dv">t_delay_slow</span><span class="fu">)</span> {</span>
<span id="cb3-966"><a href="#cb3-966" aria-hidden="true" tabindex="-1"></a>          <span class="dv">VO2_fast </span>* <span class="fu">(</span><span class="dv">1</span> <span class="dv">- </span><span class="fu">exp(</span><span class="dv">-</span><span class="fu">(</span><span class="dv">data_subset</span>$<span class="dv">t_s - t_delay</span><span class="fu">)</span> / <span class="dv">tau_fast</span><span class="fu">))</span> + </span>
<span id="cb3-967"><a href="#cb3-967" aria-hidden="true" tabindex="-1"></a>            <span class="dv">VO2_slow </span>* <span class="fu">(</span><span class="dv">1</span> <span class="dv">- </span><span class="fu">exp(</span><span class="dv">-</span><span class="fu">(</span>pmax<span class="fu">(</span><span class="dv">data_subset</span>$<span class="dv">t_s - t_delay_slow</span><span class="op">,</span> <span class="dv">0</span><span class="fu">))</span> / <span class="dv">tau_slow</span><span class="fu">))</span> + </span>
<span id="cb3-968"><a href="#cb3-968" aria-hidden="true" tabindex="-1"></a>            <span class="dv">VO2_Start</span></span>
<span id="cb3-969"><a href="#cb3-969" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-970"><a href="#cb3-970" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-971"><a href="#cb3-971" aria-hidden="true" tabindex="-1"></a>        current_rss &lt;- sum<span class="in">((</span>data_subset$VO2_t - model<span class="in">(</span>current_VO2_fast<span class="op">,</span> current_tau_fast<span class="op">,</span> current_VO2_slow<span class="op">,</span> current_tau_slow<span class="op">,</span> t_delay_slow<span class="in">))</span>^2<span class="in">)</span></span>
<span id="cb3-972"><a href="#cb3-972" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-973"><a href="#cb3-973" aria-hidden="true" tabindex="-1"></a>        # Optimiere VO2_fast und tau_fast</span>
<span id="cb3-974"><a href="#cb3-974" aria-hidden="true" tabindex="-1"></a>        while <span class="in">(</span>TRUE<span class="in">)</span> {</span>
<span id="cb3-975"><a href="#cb3-975" aria-hidden="true" tabindex="-1"></a>          improved &lt;- FALSE</span>
<span id="cb3-976"><a href="#cb3-976" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-977"><a href="#cb3-977" aria-hidden="true" tabindex="-1"></a>          # Versuche VO2_fast zu reduzieren</span>
<span id="cb3-978"><a href="#cb3-978" aria-hidden="true" tabindex="-1"></a>          if <span class="in">(</span>current_VO2_fast <span class="op">&gt;</span> 0<span class="fu">.1</span><span class="in">)</span> {</span>
<span id="cb3-979"><a href="#cb3-979" aria-hidden="true" tabindex="-1"></a>            new_VO2_fast &lt;- max(0<span class="fu">.1</span><span class="op">,</span> current_VO2_fast - 0<span class="fu">.01</span>)</span>
<span id="cb3-980"><a href="#cb3-980" aria-hidden="true" tabindex="-1"></a>            new_rss &lt;- sum<span class="in">((</span>data_subset$VO2_t - model<span class="in">(</span>new_VO2_fast<span class="op">,</span> current_tau_fast<span class="op">,</span> current_VO2_slow<span class="op">,</span> current_tau_slow<span class="op">,</span> t_delay_slow<span class="in">))</span>^2<span class="in">)</span></span>
<span id="cb3-981"><a href="#cb3-981" aria-hidden="true" tabindex="-1"></a>            if <span class="in">(</span>new_rss &lt; current_rss<span class="in">)</span> {</span>
<span id="cb3-982"><a href="#cb3-982" aria-hidden="true" tabindex="-1"></a>              current_VO2_fast &lt;- new_VO2_fast</span>
<span id="cb3-983"><a href="#cb3-983" aria-hidden="true" tabindex="-1"></a>              current_rss &lt;- new_rss</span>
<span id="cb3-984"><a href="#cb3-984" aria-hidden="true" tabindex="-1"></a>              improved &lt;- TRUE</span>
<span id="cb3-985"><a href="#cb3-985" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-986"><a href="#cb3-986" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-987"><a href="#cb3-987" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-988"><a href="#cb3-988" aria-hidden="true" tabindex="-1"></a>          # Versuche tau_fast zu reduzieren</span>
<span id="cb3-989"><a href="#cb3-989" aria-hidden="true" tabindex="-1"></a>          if <span class="in">(</span>current_tau_fast <span class="op">&gt;</span> 10<span class="in">)</span> {</span>
<span id="cb3-990"><a href="#cb3-990" aria-hidden="true" tabindex="-1"></a>            new_tau_fast &lt;- max(10<span class="op">,</span> current_tau_fast - 0<span class="fu">.1</span>)</span>
<span id="cb3-991"><a href="#cb3-991" aria-hidden="true" tabindex="-1"></a>            new_rss &lt;- sum<span class="in">((</span>data_subset$VO2_t - model<span class="in">(</span>current_VO2_fast<span class="op">,</span> new_tau_fast<span class="op">,</span> current_VO2_slow<span class="op">,</span> current_tau_slow<span class="op">,</span> t_delay_slow<span class="in">))</span>^2<span class="in">)</span></span>
<span id="cb3-992"><a href="#cb3-992" aria-hidden="true" tabindex="-1"></a>            if <span class="in">(</span>new_rss &lt; current_rss<span class="in">)</span> {</span>
<span id="cb3-993"><a href="#cb3-993" aria-hidden="true" tabindex="-1"></a>              current_tau_fast &lt;- new_tau_fast</span>
<span id="cb3-994"><a href="#cb3-994" aria-hidden="true" tabindex="-1"></a>              current_rss &lt;- new_rss</span>
<span id="cb3-995"><a href="#cb3-995" aria-hidden="true" tabindex="-1"></a>              improved &lt;- TRUE</span>
<span id="cb3-996"><a href="#cb3-996" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-997"><a href="#cb3-997" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-998"><a href="#cb3-998" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-999"><a href="#cb3-999" aria-hidden="true" tabindex="-1"></a>          if (!improved) break</span>
<span id="cb3-1000"><a href="#cb3-1000" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-1001"><a href="#cb3-1001" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1002"><a href="#cb3-1002" aria-hidden="true" tabindex="-1"></a>        # Optimiere VO2_slow und tau_slow</span>
<span id="cb3-1003"><a href="#cb3-1003" aria-hidden="true" tabindex="-1"></a>        # Zuerst nach unten</span>
<span id="cb3-1004"><a href="#cb3-1004" aria-hidden="true" tabindex="-1"></a>        while <span class="in">(</span>TRUE<span class="in">)</span> {</span>
<span id="cb3-1005"><a href="#cb3-1005" aria-hidden="true" tabindex="-1"></a>          improved &lt;- FALSE</span>
<span id="cb3-1006"><a href="#cb3-1006" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-1007"><a href="#cb3-1007" aria-hidden="true" tabindex="-1"></a>          # Versuche VO2_slow zu reduzieren</span>
<span id="cb3-1008"><a href="#cb3-1008" aria-hidden="true" tabindex="-1"></a>          if <span class="in">(</span>current_VO2_slow <span class="op">&gt;</span> 0<span class="fu">.05</span><span class="in">)</span> {</span>
<span id="cb3-1009"><a href="#cb3-1009" aria-hidden="true" tabindex="-1"></a>            new_VO2_slow &lt;- max(0<span class="fu">.05</span><span class="op">,</span> current_VO2_slow - 0<span class="fu">.01</span>)</span>
<span id="cb3-1010"><a href="#cb3-1010" aria-hidden="true" tabindex="-1"></a>            new_rss &lt;- sum<span class="in">((</span>data_subset$VO2_t - model<span class="in">(</span>current_VO2_fast<span class="op">,</span> current_tau_fast<span class="op">,</span> new_VO2_slow<span class="op">,</span> current_tau_slow<span class="op">,</span> t_delay_slow<span class="in">))</span>^2<span class="in">)</span></span>
<span id="cb3-1011"><a href="#cb3-1011" aria-hidden="true" tabindex="-1"></a>            if <span class="in">(</span>new_rss &lt; current_rss<span class="in">)</span> {</span>
<span id="cb3-1012"><a href="#cb3-1012" aria-hidden="true" tabindex="-1"></a>              current_VO2_slow &lt;- new_VO2_slow</span>
<span id="cb3-1013"><a href="#cb3-1013" aria-hidden="true" tabindex="-1"></a>              current_rss &lt;- new_rss</span>
<span id="cb3-1014"><a href="#cb3-1014" aria-hidden="true" tabindex="-1"></a>              improved &lt;- TRUE</span>
<span id="cb3-1015"><a href="#cb3-1015" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-1016"><a href="#cb3-1016" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-1017"><a href="#cb3-1017" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-1018"><a href="#cb3-1018" aria-hidden="true" tabindex="-1"></a>          # Versuche tau_slow zu reduzieren</span>
<span id="cb3-1019"><a href="#cb3-1019" aria-hidden="true" tabindex="-1"></a>          if <span class="in">(</span>current_tau_slow <span class="op">&gt;</span> 90<span class="in">)</span> {</span>
<span id="cb3-1020"><a href="#cb3-1020" aria-hidden="true" tabindex="-1"></a>            new_tau_slow &lt;- max(90<span class="op">,</span> current_tau_slow - 0<span class="fu">.1</span>)</span>
<span id="cb3-1021"><a href="#cb3-1021" aria-hidden="true" tabindex="-1"></a>            new_rss &lt;- sum<span class="in">((</span>data_subset$VO2_t - model<span class="in">(</span>current_VO2_fast<span class="op">,</span> current_tau_fast<span class="op">,</span> current_VO2_slow<span class="op">,</span> new_tau_slow<span class="op">,</span> t_delay_slow<span class="in">))</span>^2<span class="in">)</span></span>
<span id="cb3-1022"><a href="#cb3-1022" aria-hidden="true" tabindex="-1"></a>            if <span class="in">(</span>new_rss &lt; current_rss<span class="in">)</span> {</span>
<span id="cb3-1023"><a href="#cb3-1023" aria-hidden="true" tabindex="-1"></a>              current_tau_slow &lt;- new_tau_slow</span>
<span id="cb3-1024"><a href="#cb3-1024" aria-hidden="true" tabindex="-1"></a>              current_rss &lt;- new_rss</span>
<span id="cb3-1025"><a href="#cb3-1025" aria-hidden="true" tabindex="-1"></a>              improved &lt;- TRUE</span>
<span id="cb3-1026"><a href="#cb3-1026" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-1027"><a href="#cb3-1027" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-1028"><a href="#cb3-1028" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-1029"><a href="#cb3-1029" aria-hidden="true" tabindex="-1"></a>          if (!improved) break</span>
<span id="cb3-1030"><a href="#cb3-1030" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-1031"><a href="#cb3-1031" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1032"><a href="#cb3-1032" aria-hidden="true" tabindex="-1"></a>        # Dann nach oben</span>
<span id="cb3-1033"><a href="#cb3-1033" aria-hidden="true" tabindex="-1"></a>        while <span class="in">(</span>TRUE<span class="in">)</span> {</span>
<span id="cb3-1034"><a href="#cb3-1034" aria-hidden="true" tabindex="-1"></a>          improved &lt;- FALSE</span>
<span id="cb3-1035"><a href="#cb3-1035" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-1036"><a href="#cb3-1036" aria-hidden="true" tabindex="-1"></a>          # Versuche VO2_slow zu erhöhen</span>
<span id="cb3-1037"><a href="#cb3-1037" aria-hidden="true" tabindex="-1"></a>          if <span class="in">(</span>current_VO2_slow &lt; 1<span class="fu">.0</span><span class="in">)</span> {  # Angenommen<span class="op">,</span> 1<span class="fu">.0</span> ist die obere Grenze für VO2_slow</span>
<span id="cb3-1038"><a href="#cb3-1038" aria-hidden="true" tabindex="-1"></a>            new_VO2_slow &lt;- min<span class="in">(</span>1<span class="fu">.0</span><span class="op">,</span> current_VO2_slow <span class="op">+</span> 0<span class="fu">.01</span><span class="in">)</span></span>
<span id="cb3-1039"><a href="#cb3-1039" aria-hidden="true" tabindex="-1"></a>            new_rss &lt;- sum<span class="in">((</span>data_subset$VO2_t - model<span class="in">(</span>current_VO2_fast<span class="op">,</span> current_tau_fast<span class="op">,</span> new_VO2_slow<span class="op">,</span> current_tau_slow<span class="op">,</span> t_delay_slow<span class="in">))</span>^2<span class="in">)</span></span>
<span id="cb3-1040"><a href="#cb3-1040" aria-hidden="true" tabindex="-1"></a>            if <span class="in">(</span>new_rss &lt; current_rss<span class="in">)</span> {</span>
<span id="cb3-1041"><a href="#cb3-1041" aria-hidden="true" tabindex="-1"></a>              current_VO2_slow &lt;- new_VO2_slow</span>
<span id="cb3-1042"><a href="#cb3-1042" aria-hidden="true" tabindex="-1"></a>              current_rss &lt;- new_rss</span>
<span id="cb3-1043"><a href="#cb3-1043" aria-hidden="true" tabindex="-1"></a>              improved &lt;- TRUE</span>
<span id="cb3-1044"><a href="#cb3-1044" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-1045"><a href="#cb3-1045" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-1046"><a href="#cb3-1046" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-1047"><a href="#cb3-1047" aria-hidden="true" tabindex="-1"></a>          # Versuche tau_slow zu erhöhen</span>
<span id="cb3-1048"><a href="#cb3-1048" aria-hidden="true" tabindex="-1"></a>          new_tau_slow &lt;- current_tau_slow <span class="op">+</span> 0<span class="fu">.1</span></span>
<span id="cb3-1049"><a href="#cb3-1049" aria-hidden="true" tabindex="-1"></a>          new_rss &lt;- sum<span class="in">((</span>data_subset$VO2_t - model<span class="in">(</span>current_VO2_fast<span class="op">,</span> current_tau_fast<span class="op">,</span> current_VO2_slow<span class="op">,</span> new_tau_slow<span class="op">,</span> t_delay_slow<span class="in">))</span>^2<span class="in">)</span></span>
<span id="cb3-1050"><a href="#cb3-1050" aria-hidden="true" tabindex="-1"></a>          if <span class="in">(</span>new_rss &lt; current_rss<span class="in">)</span> {</span>
<span id="cb3-1051"><a href="#cb3-1051" aria-hidden="true" tabindex="-1"></a>            current_tau_slow &lt;- new_tau_slow</span>
<span id="cb3-1052"><a href="#cb3-1052" aria-hidden="true" tabindex="-1"></a>            current_rss &lt;- new_rss</span>
<span id="cb3-1053"><a href="#cb3-1053" aria-hidden="true" tabindex="-1"></a>            improved &lt;- TRUE</span>
<span id="cb3-1054"><a href="#cb3-1054" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-1055"><a href="#cb3-1055" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-1056"><a href="#cb3-1056" aria-hidden="true" tabindex="-1"></a>          if (!improved) break</span>
<span id="cb3-1057"><a href="#cb3-1057" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-1058"><a href="#cb3-1058" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1059"><a href="#cb3-1059" aria-hidden="true" tabindex="-1"></a>        if (current_rss &lt; best_rss) {</span>
<span id="cb3-1060"><a href="#cb3-1060" aria-hidden="true" tabindex="-1"></a>          best_rss &lt;- current_rss</span>
<span id="cb3-1061"><a href="#cb3-1061" aria-hidden="true" tabindex="-1"></a>          best_t_delay_slow &lt;- t_delay_slow</span>
<span id="cb3-1062"><a href="#cb3-1062" aria-hidden="true" tabindex="-1"></a>          best_VO2_fast &lt;- current_VO2_fast</span>
<span id="cb3-1063"><a href="#cb3-1063" aria-hidden="true" tabindex="-1"></a>          best_tau_fast &lt;- current_tau_fast</span>
<span id="cb3-1064"><a href="#cb3-1064" aria-hidden="true" tabindex="-1"></a>          best_VO2_slow &lt;- current_VO2_slow</span>
<span id="cb3-1065"><a href="#cb3-1065" aria-hidden="true" tabindex="-1"></a>          best_tau_slow &lt;- current_tau_slow</span>
<span id="cb3-1066"><a href="#cb3-1066" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-1067"><a href="#cb3-1067" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1068"><a href="#cb3-1068" aria-hidden="true" tabindex="-1"></a>        incProgress(1 / num_iterations<span class="op">,</span> detail = paste<span class="in">(</span>"Iteration"<span class="op">,</span> i<span class="op">,</span> "von"<span class="op">,</span> num_iterations<span class="in">)</span>)</span>
<span id="cb3-1069"><a href="#cb3-1069" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-1070"><a href="#cb3-1070" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb3-1071"><a href="#cb3-1071" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1072"><a href="#cb3-1072" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>!is<span class="fu">.null</span><span class="in">(</span>best_t_delay_slow<span class="in">))</span> {</span>
<span id="cb3-1073"><a href="#cb3-1073" aria-hidden="true" tabindex="-1"></a>      updateSliderInput(session<span class="op">,</span> "time_delay_slow"<span class="op">,</span> value = best_t_delay_slow)</span>
<span id="cb3-1074"><a href="#cb3-1074" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2"<span class="op">,</span> value = best_VO2_fast<span class="in">)</span></span>
<span id="cb3-1075"><a href="#cb3-1075" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "tau_fast"<span class="op">,</span> value = best_tau_fast<span class="in">)</span></span>
<span id="cb3-1076"><a href="#cb3-1076" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2_slow"<span class="op">,</span> value = best_VO2_slow<span class="in">)</span></span>
<span id="cb3-1077"><a href="#cb3-1077" aria-hidden="true" tabindex="-1"></a>      updateSliderInput<span class="in">(</span>session<span class="op">,</span> "tau_slow"<span class="op">,</span> value = best_tau_slow<span class="in">)</span></span>
<span id="cb3-1078"><a href="#cb3-1078" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1079"><a href="#cb3-1079" aria-hidden="true" tabindex="-1"></a>      predicted &lt;- VO2_Start <span class="op">+</span> best_VO2_fast <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>data_subset$t_s - t_delay<span class="in">)</span> / best_tau_fast<span class="in">))</span> <span class="op">+</span></span>
<span id="cb3-1080"><a href="#cb3-1080" aria-hidden="true" tabindex="-1"></a>        best_VO2_slow <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>pmax<span class="in">(</span>data_subset$t_s - best_t_delay_slow<span class="op">,</span> 0<span class="in">))</span> / best_tau_slow<span class="in">))</span></span>
<span id="cb3-1081"><a href="#cb3-1081" aria-hidden="true" tabindex="-1"></a>      r_squared &lt;- calculate_r_squared<span class="in">(</span>data_subset$VO2_t<span class="op">,</span> predicted<span class="in">)</span></span>
<span id="cb3-1082"><a href="#cb3-1082" aria-hidden="true" tabindex="-1"></a>      current_r_squared<span class="in">(</span>r_squared<span class="in">)</span></span>
<span id="cb3-1083"><a href="#cb3-1083" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1084"><a href="#cb3-1084" aria-hidden="true" tabindex="-1"></a>      showNotification<span class="in">(</span>sprintf<span class="in">(</span>"Schritt 2 erfolgreich. R²<span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> r_squared<span class="in">)</span><span class="op">,</span> type = "message"<span class="in">)</span></span>
<span id="cb3-1085"><a href="#cb3-1085" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-1086"><a href="#cb3-1086" aria-hidden="true" tabindex="-1"></a>      showModal(modalDialog(</span>
<span id="cb3-1087"><a href="#cb3-1087" aria-hidden="true" tabindex="-1"></a>        title = "Fit fehlgeschlagen"<span class="op">,</span></span>
<span id="cb3-1088"><a href="#cb3-1088" aria-hidden="true" tabindex="-1"></a>        "Die Anpassung für die langsame Komponente konnte nicht erfolgreich durchgeführt werden."<span class="op">,</span></span>
<span id="cb3-1089"><a href="#cb3-1089" aria-hidden="true" tabindex="-1"></a>        easyClose = TRUE<span class="op">,</span></span>
<span id="cb3-1090"><a href="#cb3-1090" aria-hidden="true" tabindex="-1"></a>        footer = NULL</span>
<span id="cb3-1091"><a href="#cb3-1091" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb3-1092"><a href="#cb3-1092" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1093"><a href="#cb3-1093" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-1094"><a href="#cb3-1094" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-1095"><a href="#cb3-1095" aria-hidden="true" tabindex="-1"></a>  observeEvent<span class="in">(</span>input$fit_optimize<span class="op">,</span> <span class="er">{</span></span>
<span id="cb3-1096"><a href="#cb3-1096" aria-hidden="true" tabindex="-1"></a>    req(current_data())</span>
<span id="cb3-1097"><a href="#cb3-1097" aria-hidden="true" tabindex="-1"></a>    Beispieldaten &lt;- current_data()</span>
<span id="cb3-1098"><a href="#cb3-1098" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1099"><a href="#cb3-1099" aria-hidden="true" tabindex="-1"></a>    req(input$time_delay<span class="op">,</span> input$VO2_Start<span class="op">,</span> input$VO2<span class="op">,</span> input$tau_fast<span class="op">,</span> input$VO2_slow<span class="op">,</span> input$tau_slow<span class="op">,</span> input$time_delay_slow)</span>
<span id="cb3-1100"><a href="#cb3-1100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1101"><a href="#cb3-1101" aria-hidden="true" tabindex="-1"></a>    t_delay &lt;- input$time_delay</span>
<span id="cb3-1102"><a href="#cb3-1102" aria-hidden="true" tabindex="-1"></a>    VO2_Start &lt;- input$VO2_Start</span>
<span id="cb3-1103"><a href="#cb3-1103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1104"><a href="#cb3-1104" aria-hidden="true" tabindex="-1"></a>    data_subset &lt;- Beispieldaten<span class="ex">[</span><span class="ss">Beispieldaten</span><span class="op">$</span><span class="ss">t_s </span><span class="op">&gt;</span>= t_delay<span class="op">,</span> ]</span>
<span id="cb3-1105"><a href="#cb3-1105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1106"><a href="#cb3-1106" aria-hidden="true" tabindex="-1"></a>    # Werte aus Schritt 2</span>
<span id="cb3-1107"><a href="#cb3-1107" aria-hidden="true" tabindex="-1"></a>    VO2_step2 &lt;- input$VO2</span>
<span id="cb3-1108"><a href="#cb3-1108" aria-hidden="true" tabindex="-1"></a>    tau_fast_step2 &lt;- input$tau_fast</span>
<span id="cb3-1109"><a href="#cb3-1109" aria-hidden="true" tabindex="-1"></a>    VO2_slow_step2 &lt;- input$VO2_slow</span>
<span id="cb3-1110"><a href="#cb3-1110" aria-hidden="true" tabindex="-1"></a>    tau_slow_step2 &lt;- input$tau_slow</span>
<span id="cb3-1111"><a href="#cb3-1111" aria-hidden="true" tabindex="-1"></a>    t_delay_slow_step2 &lt;- input$time_delay_slow</span>
<span id="cb3-1112"><a href="#cb3-1112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1113"><a href="#cb3-1113" aria-hidden="true" tabindex="-1"></a>    # Berechne R² für Schritt 2</span>
<span id="cb3-1114"><a href="#cb3-1114" aria-hidden="true" tabindex="-1"></a>    step2_predicted &lt;- VO2_Start <span class="op">+</span> VO2_step2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>data_subset$t_s - t_delay<span class="in">)</span> / tau_fast_step2<span class="in">))</span> <span class="op">+</span></span>
<span id="cb3-1115"><a href="#cb3-1115" aria-hidden="true" tabindex="-1"></a>      VO2_slow_step2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>pmax<span class="in">(</span>data_subset$t_s - t_delay_slow_step2<span class="op">,</span> 0<span class="in">))</span> / tau_slow_step2<span class="in">))</span></span>
<span id="cb3-1116"><a href="#cb3-1116" aria-hidden="true" tabindex="-1"></a>    step2_r_squared &lt;- calculate_r_squared<span class="in">(</span>data_subset$VO2_t<span class="op">,</span> step2_predicted<span class="in">)</span></span>
<span id="cb3-1117"><a href="#cb3-1117" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1118"><a href="#cb3-1118" aria-hidden="true" tabindex="-1"></a>    best_fit &lt;- NULL</span>
<span id="cb3-1119"><a href="#cb3-1119" aria-hidden="true" tabindex="-1"></a>    best_rss &lt;- Inf</span>
<span id="cb3-1120"><a href="#cb3-1120" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1121"><a href="#cb3-1121" aria-hidden="true" tabindex="-1"></a>    withProgress<span class="in">(</span>message = 'Optimierung läuft'<span class="op">,</span> value = 0<span class="op">,</span> <span class="er">{</span></span>
<span id="cb3-1122"><a href="#cb3-1122" aria-hidden="true" tabindex="-1"></a>      for (i in 1<span class="ch">:</span><span class="dv">1000</span>) {</span>
<span id="cb3-1123"><a href="#cb3-1123" aria-hidden="true" tabindex="-1"></a>        # <span class="dv">Randomisierte Startwerte innerhalb der festgelegten Grenzen</span></span>
<span id="cb3-1124"><a href="#cb3-1124" aria-hidden="true" tabindex="-1"></a>        <span class="dv">VO2_start </span>&lt;<span class="dv">- </span>runif<span class="fu">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">VO2_step2 </span>* <span class="dv">0.98</span><span class="op">,</span> <span class="dv">VO2_step2 </span>* <span class="dv">1.02</span><span class="fu">)</span></span>
<span id="cb3-1125"><a href="#cb3-1125" aria-hidden="true" tabindex="-1"></a>        <span class="dv">tau_fast_start </span>&lt;<span class="dv">- </span>runif<span class="fu">(</span><span class="dv">1</span><span class="op">,</span> <span class="fu">max(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">tau_fast_step2 - 3</span><span class="fu">)</span><span class="op">,</span> <span class="dv">tau_fast_step2 </span>+ <span class="dv">3</span><span class="fu">)</span></span>
<span id="cb3-1126"><a href="#cb3-1126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">VO2_slow_start </span>&lt;<span class="dv">- </span>runif<span class="fu">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">VO2_slow_step2 </span>* <span class="dv">0.98</span><span class="op">,</span> <span class="dv">VO2_slow_step2 </span>* <span class="dv">1.02</span><span class="fu">)</span></span>
<span id="cb3-1127"><a href="#cb3-1127" aria-hidden="true" tabindex="-1"></a>        <span class="dv">tau_slow_start </span>&lt;<span class="dv">- </span>runif<span class="fu">(</span><span class="dv">1</span><span class="op">,</span> <span class="fu">max(</span><span class="dv">90</span><span class="op">,</span> <span class="dv">tau_slow_step2 - 3</span><span class="fu">)</span><span class="op">,</span> <span class="dv">tau_slow_step2 </span>+ <span class="dv">3</span><span class="fu">)</span></span>
<span id="cb3-1128"><a href="#cb3-1128" aria-hidden="true" tabindex="-1"></a>        <span class="dv">t_delay_slow_start </span>&lt;<span class="dv">- </span>runif<span class="fu">(</span><span class="dv">1</span><span class="op">,</span> <span class="fu">max(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">t_delay_slow_step2 - 5</span><span class="fu">)</span><span class="op">,</span> <span class="dv">t_delay_slow_step2 </span>+ <span class="dv">5</span><span class="fu">)</span></span>
<span id="cb3-1129"><a href="#cb3-1129" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1130"><a href="#cb3-1130" aria-hidden="true" tabindex="-1"></a>        <span class="dv">start_values </span>&lt;<span class="dv">- </span>list<span class="fu">(</span></span>
<span id="cb3-1131"><a href="#cb3-1131" aria-hidden="true" tabindex="-1"></a>          <span class="dv">VO2 </span>= <span class="dv">VO2_start</span><span class="op">,</span></span>
<span id="cb3-1132"><a href="#cb3-1132" aria-hidden="true" tabindex="-1"></a>          <span class="dv">tau_fast </span>= <span class="dv">tau_fast_start</span><span class="op">,</span></span>
<span id="cb3-1133"><a href="#cb3-1133" aria-hidden="true" tabindex="-1"></a>          <span class="dv">VO2_slow </span>= <span class="dv">VO2_slow_start</span><span class="op">,</span></span>
<span id="cb3-1134"><a href="#cb3-1134" aria-hidden="true" tabindex="-1"></a>          <span class="dv">tau_slow </span>= <span class="dv">tau_slow_start</span><span class="op">,</span></span>
<span id="cb3-1135"><a href="#cb3-1135" aria-hidden="true" tabindex="-1"></a>          <span class="dv">t_delay_slow </span>= <span class="dv">t_delay_slow_start</span></span>
<span id="cb3-1136"><a href="#cb3-1136" aria-hidden="true" tabindex="-1"></a>        <span class="fu">)</span></span>
<span id="cb3-1137"><a href="#cb3-1137" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1138"><a href="#cb3-1138" aria-hidden="true" tabindex="-1"></a>        <span class="dv">fit </span>&lt;<span class="dv">- </span>try<span class="fu">(</span>nlsLM<span class="fu">(</span><span class="dv">VO2_t </span>~ <span class="dv">VO2 </span>* <span class="fu">(</span><span class="dv">1</span> <span class="dv">- </span><span class="fu">exp(</span><span class="dv">-</span><span class="fu">(</span><span class="dv">t_s - t_delay</span><span class="fu">)</span> / <span class="dv">tau_fast</span><span class="fu">))</span> + </span>
<span id="cb3-1139"><a href="#cb3-1139" aria-hidden="true" tabindex="-1"></a>                           <span class="dv">VO2_slow </span>* <span class="fu">(</span><span class="dv">1</span> <span class="dv">- </span><span class="fu">exp(</span><span class="dv">-</span><span class="fu">(</span><span class="dv">t_s - t_delay_slow</span><span class="fu">)</span> / <span class="dv">tau_slow</span><span class="fu">))</span> + <span class="dv">VO2_Start</span><span class="op">,</span></span>
<span id="cb3-1140"><a href="#cb3-1140" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">data </span>= <span class="dv">data_subset</span><span class="op">,</span></span>
<span id="cb3-1141"><a href="#cb3-1141" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">start</span> = <span class="dv">start_values</span><span class="op">,</span></span>
<span id="cb3-1142"><a href="#cb3-1142" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">lower </span>= c<span class="fu">(</span><span class="dv">VO2 </span>= <span class="dv">VO2_step2 </span>* <span class="dv">0.98</span><span class="op">,</span> </span>
<span id="cb3-1143"><a href="#cb3-1143" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">tau_fast </span>= <span class="fu">max(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">tau_fast_step2 - 3</span><span class="fu">)</span><span class="op">,</span> </span>
<span id="cb3-1144"><a href="#cb3-1144" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">VO2_slow </span>= <span class="dv">VO2_slow_step2 </span>* <span class="dv">0.98</span><span class="op">,</span> </span>
<span id="cb3-1145"><a href="#cb3-1145" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">tau_slow </span>= <span class="fu">max(</span><span class="dv">90</span><span class="op">,</span> <span class="dv">tau_slow_step2 - 3</span><span class="fu">)</span><span class="op">,</span> </span>
<span id="cb3-1146"><a href="#cb3-1146" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">t_delay_slow </span>= <span class="fu">max(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">t_delay_slow_step2 - 5</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb3-1147"><a href="#cb3-1147" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">upper </span>= c<span class="fu">(</span><span class="dv">VO2 </span>= <span class="dv">VO2_step2 </span>* <span class="dv">1.02</span><span class="op">,</span> </span>
<span id="cb3-1148"><a href="#cb3-1148" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">tau_fast </span>= <span class="dv">tau_fast_step2 </span>+ <span class="dv">3</span><span class="op">,</span> </span>
<span id="cb3-1149"><a href="#cb3-1149" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">VO2_slow </span>= <span class="dv">VO2_slow_step2 </span>* <span class="dv">1.02</span><span class="op">,</span> </span>
<span id="cb3-1150"><a href="#cb3-1150" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">tau_slow </span>= <span class="dv">tau_slow_step2 </span>+ <span class="dv">3</span><span class="op">,</span> </span>
<span id="cb3-1151"><a href="#cb3-1151" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">t_delay_slow </span>= <span class="dv">t_delay_slow_step2 </span>+ <span class="dv">5</span><span class="fu">)</span><span class="op">,</span></span>
<span id="cb3-1152"><a href="#cb3-1152" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">control </span>= <span class="dv">nls</span>.control<span class="fu">(</span><span class="dv">maxiter </span>= <span class="dv">1024</span><span class="fu">))</span><span class="op">,</span> <span class="dv">silent </span>= <span class="dv">TRUE</span><span class="fu">)</span></span>
<span id="cb3-1153"><a href="#cb3-1153" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1154"><a href="#cb3-1154" aria-hidden="true" tabindex="-1"></a>        <span class="dv">if </span><span class="fu">(</span><span class="at">!</span>inherits<span class="fu">(</span><span class="dv">fit</span><span class="op">,</span> <span class="st">"try-error"</span><span class="fu">))</span> {</span>
<span id="cb3-1155"><a href="#cb3-1155" aria-hidden="true" tabindex="-1"></a>          <span class="dv">rss </span>&lt;<span class="dv">- </span>sum<span class="fu">(</span>residuals<span class="fu">(</span><span class="dv">fit</span><span class="fu">)</span>^<span class="dv">2</span><span class="fu">)</span></span>
<span id="cb3-1156"><a href="#cb3-1156" aria-hidden="true" tabindex="-1"></a>          <span class="dv">if </span><span class="fu">(</span><span class="dv">rss </span>&lt; <span class="dv">best_rss</span><span class="fu">)</span> {</span>
<span id="cb3-1157"><a href="#cb3-1157" aria-hidden="true" tabindex="-1"></a>            <span class="dv">best_rss </span>&lt;<span class="dv">- rss</span></span>
<span id="cb3-1158"><a href="#cb3-1158" aria-hidden="true" tabindex="-1"></a>            <span class="dv">best_fit </span>&lt;<span class="dv">- fit</span></span>
<span id="cb3-1159"><a href="#cb3-1159" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-1160"><a href="#cb3-1160" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-1161"><a href="#cb3-1161" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1162"><a href="#cb3-1162" aria-hidden="true" tabindex="-1"></a>        incProgress<span class="in">(</span>1/1000<span class="op">,</span> detail = paste<span class="in">(</span>"Iteration"<span class="op">,</span> i<span class="in">))</span></span>
<span id="cb3-1163"><a href="#cb3-1163" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-1164"><a href="#cb3-1164" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb3-1165"><a href="#cb3-1165" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1166"><a href="#cb3-1166" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>!is<span class="fu">.null</span><span class="in">(</span>best_fit<span class="in">))</span> {</span>
<span id="cb3-1167"><a href="#cb3-1167" aria-hidden="true" tabindex="-1"></a>      params &lt;- as<span class="fu">.list</span><span class="in">(</span>coef<span class="in">(</span>best_fit<span class="in">))</span></span>
<span id="cb3-1168"><a href="#cb3-1168" aria-hidden="true" tabindex="-1"></a>      step3_predicted &lt;- VO2_Start <span class="op">+</span> params$VO2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>data_subset$t_s - t_delay<span class="in">)</span> / params$tau_fast<span class="in">))</span> <span class="op">+</span></span>
<span id="cb3-1169"><a href="#cb3-1169" aria-hidden="true" tabindex="-1"></a>        params$VO2_slow <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>pmax<span class="in">(</span>data_subset$t_s - params$t_delay_slow<span class="op">,</span> 0<span class="in">))</span> / params$tau_slow<span class="in">))</span></span>
<span id="cb3-1170"><a href="#cb3-1170" aria-hidden="true" tabindex="-1"></a>      step3_r_squared &lt;- calculate_r_squared<span class="in">(</span>data_subset$VO2_t<span class="op">,</span> step3_predicted<span class="in">)</span></span>
<span id="cb3-1171"><a href="#cb3-1171" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1172"><a href="#cb3-1172" aria-hidden="true" tabindex="-1"></a>      if <span class="in">(</span>step3_r_squared <span class="op">&gt;</span> step2_r_squared<span class="in">)</span> {</span>
<span id="cb3-1173"><a href="#cb3-1173" aria-hidden="true" tabindex="-1"></a>        updateSliderInput(session<span class="op">,</span> "VO2"<span class="op">,</span> value = params$VO2)</span>
<span id="cb3-1174"><a href="#cb3-1174" aria-hidden="true" tabindex="-1"></a>        updateSliderInput<span class="in">(</span>session<span class="op">,</span> "tau_fast"<span class="op">,</span> value = params$tau_fast<span class="in">)</span></span>
<span id="cb3-1175"><a href="#cb3-1175" aria-hidden="true" tabindex="-1"></a>        updateSliderInput<span class="in">(</span>session<span class="op">,</span> "VO2_slow"<span class="op">,</span> value = params$VO2_slow<span class="in">)</span></span>
<span id="cb3-1176"><a href="#cb3-1176" aria-hidden="true" tabindex="-1"></a>        updateSliderInput<span class="in">(</span>session<span class="op">,</span> "tau_slow"<span class="op">,</span> value = params$tau_slow<span class="in">)</span></span>
<span id="cb3-1177"><a href="#cb3-1177" aria-hidden="true" tabindex="-1"></a>        updateSliderInput<span class="in">(</span>session<span class="op">,</span> "time_delay_slow"<span class="op">,</span> value = params$t_delay_slow<span class="in">)</span></span>
<span id="cb3-1178"><a href="#cb3-1178" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-1179"><a href="#cb3-1179" aria-hidden="true" tabindex="-1"></a>        current_r_squared<span class="in">(</span>step3_r_squared<span class="in">)</span></span>
<span id="cb3-1180"><a href="#cb3-1180" aria-hidden="true" tabindex="-1"></a>        showNotification<span class="in">(</span>sprintf<span class="in">(</span>"Optimierung erfolgreich. Neues R²<span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> step3_r_squared<span class="in">)</span><span class="op">,</span> type = "message"<span class="in">)</span></span>
<span id="cb3-1181"><a href="#cb3-1181" aria-hidden="true" tabindex="-1"></a>      } else {</span>
<span id="cb3-1182"><a href="#cb3-1182" aria-hidden="true" tabindex="-1"></a>        current_r_squared(step2_r_squared)</span>
<span id="cb3-1183"><a href="#cb3-1183" aria-hidden="true" tabindex="-1"></a>        showNotification(sprintf("Kein besserer Fit gefunden. Ergebnisse von Schritt 2 beibehalten. R²<span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> step2_r_squared)<span class="op">,</span> type = "warning")</span>
<span id="cb3-1184"><a href="#cb3-1184" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-1185"><a href="#cb3-1185" aria-hidden="true" tabindex="-1"></a>    } else {</span>
<span id="cb3-1186"><a href="#cb3-1186" aria-hidden="true" tabindex="-1"></a>      current_r_squared(step2_r_squared)</span>
<span id="cb3-1187"><a href="#cb3-1187" aria-hidden="true" tabindex="-1"></a>      showNotification(sprintf("Optimierung fehlgeschlagen. Ergebnisse von Schritt 2 beibehalten. R²<span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> step2_r_squared)<span class="op">,</span> type = "warning")</span>
<span id="cb3-1188"><a href="#cb3-1188" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1189"><a href="#cb3-1189" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-1190"><a href="#cb3-1190" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-1191"><a href="#cb3-1191" aria-hidden="true" tabindex="-1"></a>  output$plot &lt;- renderPlotly<span class="in">(</span><span class="er">{</span></span>
<span id="cb3-1192"><a href="#cb3-1192" aria-hidden="true" tabindex="-1"></a>    req(input$VO2<span class="op">,</span> input$tau_fast<span class="op">,</span> input$VO2_slow<span class="op">,</span> input$tau_slow<span class="op">,</span> input$VO2_Start<span class="op">,</span> input$time_delay<span class="op">,</span> input$time_delay_slow<span class="op">,</span> input$VO2_Ruhe)</span>
<span id="cb3-1193"><a href="#cb3-1193" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1194"><a href="#cb3-1194" aria-hidden="true" tabindex="-1"></a>    VO2 &lt;- input$VO2</span>
<span id="cb3-1195"><a href="#cb3-1195" aria-hidden="true" tabindex="-1"></a>    tau_fast &lt;- input$tau_fast</span>
<span id="cb3-1196"><a href="#cb3-1196" aria-hidden="true" tabindex="-1"></a>    VO2_slow &lt;- input$VO2_slow</span>
<span id="cb3-1197"><a href="#cb3-1197" aria-hidden="true" tabindex="-1"></a>    tau_slow &lt;- input$tau_slow</span>
<span id="cb3-1198"><a href="#cb3-1198" aria-hidden="true" tabindex="-1"></a>    VO2_Start &lt;- input$VO2_Start</span>
<span id="cb3-1199"><a href="#cb3-1199" aria-hidden="true" tabindex="-1"></a>    t_delay &lt;- input$time_delay</span>
<span id="cb3-1200"><a href="#cb3-1200" aria-hidden="true" tabindex="-1"></a>    t_delay_slow &lt;- input$time_delay_slow</span>
<span id="cb3-1201"><a href="#cb3-1201" aria-hidden="true" tabindex="-1"></a>    VO2_Ruhe &lt;- input$VO2_Ruhe</span>
<span id="cb3-1202"><a href="#cb3-1202" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1203"><a href="#cb3-1203" aria-hidden="true" tabindex="-1"></a>    model_function &lt;- function<span class="in">(</span>t_s<span class="op">,</span> VO2<span class="op">,</span> tau_fast<span class="op">,</span> VO2_slow<span class="op">,</span> tau_slow<span class="op">,</span> VO2_Start<span class="op">,</span> t_delay<span class="op">,</span> t_delay_slow<span class="in">)</span> {</span>
<span id="cb3-1204"><a href="#cb3-1204" aria-hidden="true" tabindex="-1"></a>      VO2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>pmax<span class="in">(</span>t_s - t_delay<span class="op">,</span> 0<span class="in">))</span> / tau_fast<span class="in">))</span> <span class="op">+</span> </span>
<span id="cb3-1205"><a href="#cb3-1205" aria-hidden="true" tabindex="-1"></a>        pmax<span class="in">(</span>VO2_slow <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>pmax<span class="in">(</span>t_s - t_delay_slow<span class="op">,</span> 0<span class="in">))</span> / tau_slow<span class="in">))</span><span class="op">,</span> 0<span class="in">)</span> <span class="op">+</span> </span>
<span id="cb3-1206"><a href="#cb3-1206" aria-hidden="true" tabindex="-1"></a>        VO2_Start</span>
<span id="cb3-1207"><a href="#cb3-1207" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1208"><a href="#cb3-1208" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1209"><a href="#cb3-1209" aria-hidden="true" tabindex="-1"></a>    model_fast &lt;- function(t_s<span class="op">,</span> VO2<span class="op">,</span> tau_fast<span class="op">,</span> t_delay) {</span>
<span id="cb3-1210"><a href="#cb3-1210" aria-hidden="true" tabindex="-1"></a>      VO2 <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>pmax<span class="in">(</span>t_s - t_delay<span class="op">,</span> 0<span class="in">))</span> / tau_fast<span class="in">))</span></span>
<span id="cb3-1211"><a href="#cb3-1211" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1212"><a href="#cb3-1212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1213"><a href="#cb3-1213" aria-hidden="true" tabindex="-1"></a>    model_slow &lt;- function(t_s<span class="op">,</span> VO2_slow<span class="op">,</span> tau_slow<span class="op">,</span> t_delay_slow) {</span>
<span id="cb3-1214"><a href="#cb3-1214" aria-hidden="true" tabindex="-1"></a>      pmax(VO2_slow <span class="op">*</span> <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>pmax<span class="in">(</span>t_s - t_delay_slow<span class="op">,</span> 0<span class="in">))</span> / tau_slow<span class="in">))</span><span class="op">,</span> 0)</span>
<span id="cb3-1215"><a href="#cb3-1215" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1216"><a href="#cb3-1216" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1217"><a href="#cb3-1217" aria-hidden="true" tabindex="-1"></a>    Beispieldaten &lt;- current_data()</span>
<span id="cb3-1218"><a href="#cb3-1218" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1219"><a href="#cb3-1219" aria-hidden="true" tabindex="-1"></a>    max_t &lt;- if (!is<span class="fu">.null</span><span class="in">(</span>Beispieldaten<span class="in">)</span> <span class="op">&amp;&amp;</span> nrow<span class="in">(</span>Beispieldaten<span class="in">)</span> <span class="op">&gt;</span> 0) max<span class="in">(</span>Beispieldaten$t_s<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span> else 300</span>
<span id="cb3-1220"><a href="#cb3-1220" aria-hidden="true" tabindex="-1"></a>    max_x &lt;- max_t <span class="op">*</span> 1<span class="fu">.20</span></span>
<span id="cb3-1221"><a href="#cb3-1221" aria-hidden="true" tabindex="-1"></a>    t_s &lt;- seq<span class="in">(</span>0<span class="op">,</span> max_x <span class="op">*</span> 1<span class="fu">.20</span><span class="op">,</span> by = 1<span class="in">)</span></span>
<span id="cb3-1222"><a href="#cb3-1222" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1223"><a href="#cb3-1223" aria-hidden="true" tabindex="-1"></a>    model_values &lt;- ifelse<span class="in">(</span>t_s <span class="op">&gt;</span>= t_delay<span class="op">,</span> model_function<span class="in">(</span>t_s<span class="op">,</span> VO2<span class="op">,</span> tau_fast<span class="op">,</span> VO2_slow<span class="op">,</span> tau_slow<span class="op">,</span> VO2_Start<span class="op">,</span> t_delay<span class="op">,</span> t_delay_slow<span class="in">)</span><span class="op">,</span> NA<span class="in">)</span></span>
<span id="cb3-1224"><a href="#cb3-1224" aria-hidden="true" tabindex="-1"></a>    fast_values &lt;- ifelse<span class="in">(</span>t_s <span class="op">&gt;</span>= t_delay<span class="op">,</span> model_fast<span class="in">(</span>t_s<span class="op">,</span> VO2<span class="op">,</span> tau_fast<span class="op">,</span> t_delay<span class="in">)</span><span class="op">,</span> NA<span class="in">)</span></span>
<span id="cb3-1225"><a href="#cb3-1225" aria-hidden="true" tabindex="-1"></a>    slow_values &lt;- ifelse<span class="in">(</span>t_s <span class="op">&gt;</span>= t_delay_slow<span class="op">,</span> model_slow<span class="in">(</span>t_s<span class="op">,</span> VO2_slow<span class="op">,</span> tau_slow<span class="op">,</span> t_delay_slow<span class="in">)</span><span class="op">,</span> NA<span class="in">)</span></span>
<span id="cb3-1226"><a href="#cb3-1226" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1227"><a href="#cb3-1227" aria-hidden="true" tabindex="-1"></a>    max_y &lt;- if <span class="in">(</span>!is<span class="fu">.null</span><span class="in">(</span>Beispieldaten<span class="in">)</span> <span class="op">&amp;&amp;</span> nrow<span class="in">(</span>Beispieldaten<span class="in">)</span> <span class="op">&gt;</span> 0<span class="in">)</span> max<span class="in">(</span>Beispieldaten$VO2_t<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span> <span class="op">*</span> 1<span class="fu">.05</span> else max<span class="in">(</span>model_values<span class="op">,</span> na<span class="fu">.rm</span> = TRUE<span class="in">)</span> <span class="op">*</span> 1<span class="fu">.05</span></span>
<span id="cb3-1228"><a href="#cb3-1228" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1229"><a href="#cb3-1229" aria-hidden="true" tabindex="-1"></a>    eq_text &lt;- sprintf<span class="in">(</span>"V̇O₂ <span class="in">(</span>t<span class="in">)</span> = %<span class="fu">.2f</span> <span class="op">*</span> <span class="in">(</span>1 - e&lt;sup<span class="op">&gt;</span>-<span class="in">(</span>t - %<span class="fu">.0f</span><span class="in">)</span> / %<span class="fu">.1f</span>&lt;/sup<span class="op">&gt;</span><span class="in">)</span> <span class="op">+</span> %<span class="fu">.2f</span> <span class="op">*</span> <span class="in">(</span>1 - e&lt;sup<span class="op">&gt;</span>-<span class="in">(</span>t - %<span class="fu">.1f</span><span class="in">)</span> / %<span class="fu">.0f</span>&lt;/sup<span class="op">&gt;</span><span class="in">)</span> <span class="op">+</span> %<span class="fu">.2f</span>"<span class="op">,</span></span>
<span id="cb3-1230"><a href="#cb3-1230" aria-hidden="true" tabindex="-1"></a>                       VO2<span class="op">,</span> t_delay<span class="op">,</span> tau_fast<span class="op">,</span> VO2_slow<span class="op">,</span> t_delay_slow<span class="op">,</span> tau_slow<span class="op">,</span> VO2_Start<span class="in">)</span></span>
<span id="cb3-1231"><a href="#cb3-1231" aria-hidden="true" tabindex="-1"></a>    t_halb &lt;- tau_fast <span class="op">*</span> log<span class="in">(</span>2<span class="in">)</span></span>
<span id="cb3-1232"><a href="#cb3-1232" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1233"><a href="#cb3-1233" aria-hidden="true" tabindex="-1"></a>    shapes &lt;- list<span class="in">(</span></span>
<span id="cb3-1234"><a href="#cb3-1234" aria-hidden="true" tabindex="-1"></a>      list<span class="in">(</span></span>
<span id="cb3-1235"><a href="#cb3-1235" aria-hidden="true" tabindex="-1"></a>        type = "line"<span class="op">,</span> x0 = t_delay<span class="op">,</span> x1 = t_delay<span class="op">,</span> y0 = 0<span class="op">,</span> y1 = max_y <span class="op">*</span> 1<span class="fu">.5</span><span class="op">,</span></span>
<span id="cb3-1236"><a href="#cb3-1236" aria-hidden="true" tabindex="-1"></a>        line = list<span class="in">(</span>color = "gray"<span class="op">,</span> width = 1<span class="op">,</span> dash = "dash"<span class="in">)</span></span>
<span id="cb3-1237"><a href="#cb3-1237" aria-hidden="true" tabindex="-1"></a>      <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1238"><a href="#cb3-1238" aria-hidden="true" tabindex="-1"></a>      list<span class="in">(</span></span>
<span id="cb3-1239"><a href="#cb3-1239" aria-hidden="true" tabindex="-1"></a>        type = "line"<span class="op">,</span> x0 = t_delay_slow<span class="op">,</span> x1 = t_delay_slow<span class="op">,</span> y0 = 0<span class="op">,</span> y1 = max_y <span class="op">*</span> 1<span class="fu">.5</span><span class="op">,</span></span>
<span id="cb3-1240"><a href="#cb3-1240" aria-hidden="true" tabindex="-1"></a>        line = list<span class="in">(</span>color = "gray"<span class="op">,</span> width = 1<span class="op">,</span> dash = "dash"<span class="in">)</span></span>
<span id="cb3-1241"><a href="#cb3-1241" aria-hidden="true" tabindex="-1"></a>      <span class="in">)</span></span>
<span id="cb3-1242"><a href="#cb3-1242" aria-hidden="true" tabindex="-1"></a>    <span class="in">)</span></span>
<span id="cb3-1243"><a href="#cb3-1243" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1244"><a href="#cb3-1244" aria-hidden="true" tabindex="-1"></a>    p &lt;- plot_ly<span class="in">()</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-1245"><a href="#cb3-1245" aria-hidden="true" tabindex="-1"></a>      add_trace<span class="in">(</span>x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>model_values<span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'lines'<span class="op">,</span></span>
<span id="cb3-1246"><a href="#cb3-1246" aria-hidden="true" tabindex="-1"></a>                name = 'V̇O2-Modellfunktion'<span class="op">,</span> line = list<span class="in">(</span>color = '<span class="pp">#EF6F6A</span>'<span class="in">))</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-1247"><a href="#cb3-1247" aria-hidden="true" tabindex="-1"></a>      add_trace<span class="in">(</span>x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>fast_values<span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'lines'<span class="op">,</span> </span>
<span id="cb3-1248"><a href="#cb3-1248" aria-hidden="true" tabindex="-1"></a>                name = 'V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>&lt;sub<span class="op">&gt;,</span>fast&lt;/sub<span class="op">&gt;</span>'<span class="op">,</span> line = list<span class="in">(</span>color = '<span class="pp">#42BA97</span>'<span class="in">))</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-1249"><a href="#cb3-1249" aria-hidden="true" tabindex="-1"></a>      add_trace<span class="in">(</span>x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>slow_values<span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'lines'<span class="op">,</span> </span>
<span id="cb3-1250"><a href="#cb3-1250" aria-hidden="true" tabindex="-1"></a>                name = 'V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>&lt;sub<span class="op">&gt;,</span>slow&lt;/sub<span class="op">&gt;</span>'<span class="op">,</span> line = list<span class="in">(</span>color = '<span class="pp">#BB7693</span>'<span class="in">))</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-1251"><a href="#cb3-1251" aria-hidden="true" tabindex="-1"></a>      layout<span class="in">(</span>title = "Biexponentielle V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>-Modellfunktion"<span class="op">,</span></span>
<span id="cb3-1252"><a href="#cb3-1252" aria-hidden="true" tabindex="-1"></a>             margin = list<span class="in">(</span>t = 40<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1253"><a href="#cb3-1253" aria-hidden="true" tabindex="-1"></a>             xaxis = list<span class="in">(</span>title = "t <span class="ex">[</span><span class="ss">s</span><span class="ex">]</span>"<span class="op">,</span> range = c<span class="in">(</span>0<span class="op">,</span> max_x<span class="in">))</span><span class="op">,</span></span>
<span id="cb3-1254"><a href="#cb3-1254" aria-hidden="true" tabindex="-1"></a>             yaxis = list<span class="in">(</span>title = "V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span> <span class="in">(</span>t<span class="in">)</span> <span class="ex">[</span><span class="ss">l·min&lt;sup</span><span class="op">&gt;</span>-1&lt;/sup<span class="op">&gt;</span>]"<span class="op">,</span> tickformat = "<span class="fu">.1f</span>"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1255"><a href="#cb3-1255" aria-hidden="true" tabindex="-1"></a>             legend = list<span class="in">(</span></span>
<span id="cb3-1256"><a href="#cb3-1256" aria-hidden="true" tabindex="-1"></a>               x = 0<span class="fu">.05</span><span class="op">,</span></span>
<span id="cb3-1257"><a href="#cb3-1257" aria-hidden="true" tabindex="-1"></a>               y = 0<span class="fu">.99</span><span class="op">,</span></span>
<span id="cb3-1258"><a href="#cb3-1258" aria-hidden="true" tabindex="-1"></a>               xanchor = "left"<span class="op">,</span></span>
<span id="cb3-1259"><a href="#cb3-1259" aria-hidden="true" tabindex="-1"></a>               yanchor = "top"<span class="op">,</span></span>
<span id="cb3-1260"><a href="#cb3-1260" aria-hidden="true" tabindex="-1"></a>               bgcolor = "rgba<span class="in">(</span>255<span class="op">,</span> 255<span class="op">,</span> 255<span class="op">,</span> 0<span class="fu">.3</span><span class="in">)</span>"<span class="op">,</span></span>
<span id="cb3-1261"><a href="#cb3-1261" aria-hidden="true" tabindex="-1"></a>               bordercolor = "rgba<span class="in">(</span>0<span class="op">,</span>0<span class="op">,</span>0<span class="op">,</span>0<span class="in">)</span>"<span class="op">,</span></span>
<span id="cb3-1262"><a href="#cb3-1262" aria-hidden="true" tabindex="-1"></a>               borderwidth = 0</span>
<span id="cb3-1263"><a href="#cb3-1263" aria-hidden="true" tabindex="-1"></a>             <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1264"><a href="#cb3-1264" aria-hidden="true" tabindex="-1"></a>             shapes = shapes<span class="op">,</span></span>
<span id="cb3-1265"><a href="#cb3-1265" aria-hidden="true" tabindex="-1"></a>             annotations = list<span class="in">(</span></span>
<span id="cb3-1266"><a href="#cb3-1266" aria-hidden="true" tabindex="-1"></a>               list<span class="in">(</span></span>
<span id="cb3-1267"><a href="#cb3-1267" aria-hidden="true" tabindex="-1"></a>                 x = max_x <span class="op">*</span> 0<span class="fu">.35</span><span class="op">,</span></span>
<span id="cb3-1268"><a href="#cb3-1268" aria-hidden="true" tabindex="-1"></a>                 y = max_y <span class="op">*</span> 0<span class="fu">.3</span><span class="op">,</span></span>
<span id="cb3-1269"><a href="#cb3-1269" aria-hidden="true" tabindex="-1"></a>                 text = eq_text<span class="op">,</span></span>
<span id="cb3-1270"><a href="#cb3-1270" aria-hidden="true" tabindex="-1"></a>                 showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-1271"><a href="#cb3-1271" aria-hidden="true" tabindex="-1"></a>                 xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-1272"><a href="#cb3-1272" aria-hidden="true" tabindex="-1"></a>                 yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-1273"><a href="#cb3-1273" aria-hidden="true" tabindex="-1"></a>                 font = list<span class="in">(</span></span>
<span id="cb3-1274"><a href="#cb3-1274" aria-hidden="true" tabindex="-1"></a>                   family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-1275"><a href="#cb3-1275" aria-hidden="true" tabindex="-1"></a>                   size = 10<span class="op">,</span></span>
<span id="cb3-1276"><a href="#cb3-1276" aria-hidden="true" tabindex="-1"></a>                   color = "black"</span>
<span id="cb3-1277"><a href="#cb3-1277" aria-hidden="true" tabindex="-1"></a>                 <span class="in">)</span></span>
<span id="cb3-1278"><a href="#cb3-1278" aria-hidden="true" tabindex="-1"></a>               <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1279"><a href="#cb3-1279" aria-hidden="true" tabindex="-1"></a>               list<span class="in">(</span></span>
<span id="cb3-1280"><a href="#cb3-1280" aria-hidden="true" tabindex="-1"></a>                 x = max_x <span class="op">*</span> 0<span class="fu">.35</span><span class="op">,</span></span>
<span id="cb3-1281"><a href="#cb3-1281" aria-hidden="true" tabindex="-1"></a>                 y = max_y <span class="op">*</span> 0<span class="fu">.2</span><span class="op">,</span></span>
<span id="cb3-1282"><a href="#cb3-1282" aria-hidden="true" tabindex="-1"></a>                 text = paste<span class="in">(</span>"T&lt;sub<span class="op">&gt;</span>1/2&lt;/sub<span class="op">&gt;</span><span class="in">:</span>"<span class="op">,</span> round<span class="in">(</span>t_halb<span class="op">,</span> 1<span class="in">)</span><span class="op">,</span>" s"<span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1283"><a href="#cb3-1283" aria-hidden="true" tabindex="-1"></a>                 showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-1284"><a href="#cb3-1284" aria-hidden="true" tabindex="-1"></a>                 xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-1285"><a href="#cb3-1285" aria-hidden="true" tabindex="-1"></a>                 yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-1286"><a href="#cb3-1286" aria-hidden="true" tabindex="-1"></a>                 font = list<span class="in">(</span></span>
<span id="cb3-1287"><a href="#cb3-1287" aria-hidden="true" tabindex="-1"></a>                   family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-1288"><a href="#cb3-1288" aria-hidden="true" tabindex="-1"></a>                   size = 10<span class="op">,</span></span>
<span id="cb3-1289"><a href="#cb3-1289" aria-hidden="true" tabindex="-1"></a>                   color = "black"</span>
<span id="cb3-1290"><a href="#cb3-1290" aria-hidden="true" tabindex="-1"></a>                 <span class="in">)</span></span>
<span id="cb3-1291"><a href="#cb3-1291" aria-hidden="true" tabindex="-1"></a>               <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1292"><a href="#cb3-1292" aria-hidden="true" tabindex="-1"></a>               list<span class="in">(</span></span>
<span id="cb3-1293"><a href="#cb3-1293" aria-hidden="true" tabindex="-1"></a>                 x = t_delay<span class="op">,</span> y = max_y <span class="op">*</span> 0<span class="fu">.85</span><span class="op">,</span> text = sprintf<span class="in">(</span>"t&lt;sub<span class="op">&gt;</span>delay&lt;/sub<span class="op">&gt;</span><span class="in">:</span> %<span class="fu">.1f</span> s"<span class="op">,</span> t_delay<span class="in">)</span><span class="op">,</span> showarrow = FALSE<span class="op">,</span> xanchor = "left"<span class="op">,</span> yanchor = "bottom"<span class="op">,</span></span>
<span id="cb3-1294"><a href="#cb3-1294" aria-hidden="true" tabindex="-1"></a>                 textangle = -90<span class="op">,</span> font = list<span class="in">(</span>size = 11<span class="in">)</span></span>
<span id="cb3-1295"><a href="#cb3-1295" aria-hidden="true" tabindex="-1"></a>               <span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1296"><a href="#cb3-1296" aria-hidden="true" tabindex="-1"></a>               list<span class="in">(</span></span>
<span id="cb3-1297"><a href="#cb3-1297" aria-hidden="true" tabindex="-1"></a>                 x = t_delay_slow<span class="op">,</span> y = max_y <span class="op">*</span> 0<span class="fu">.85</span><span class="op">,</span> text = sprintf<span class="in">(</span>"t&lt;sub<span class="op">&gt;</span>delay_slow&lt;/sub<span class="op">&gt;</span><span class="in">:</span> %<span class="fu">.1f</span> s"<span class="op">,</span> t_delay_slow<span class="in">)</span><span class="op">,</span> showarrow = FALSE<span class="op">,</span> xanchor = "left"<span class="op">,</span> yanchor = "bottom"<span class="op">,</span></span>
<span id="cb3-1298"><a href="#cb3-1298" aria-hidden="true" tabindex="-1"></a>                 textangle = -90<span class="op">,</span> font = list<span class="in">(</span>size = 11<span class="in">)</span></span>
<span id="cb3-1299"><a href="#cb3-1299" aria-hidden="true" tabindex="-1"></a>               <span class="in">)</span></span>
<span id="cb3-1300"><a href="#cb3-1300" aria-hidden="true" tabindex="-1"></a>             <span class="in">))</span> %<span class="op">&gt;</span>%</span>
<span id="cb3-1301"><a href="#cb3-1301" aria-hidden="true" tabindex="-1"></a>      add_trace<span class="in">(</span>x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>rep<span class="in">(</span>VO2_Ruhe<span class="op">,</span> length<span class="in">(</span>t_s<span class="in">))</span><span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'lines'<span class="op">,</span></span>
<span id="cb3-1302"><a href="#cb3-1302" aria-hidden="true" tabindex="-1"></a>                name = 'V̇O&lt;sub<span class="op">&gt;</span>2<span class="op">,</span>Ruhe&lt;/sub<span class="op">&gt;</span>'<span class="op">,</span> line = list<span class="in">(</span>color = '<span class="pp">#1CADE4</span>'<span class="in">))</span></span>
<span id="cb3-1303"><a href="#cb3-1303" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1304"><a href="#cb3-1304" aria-hidden="true" tabindex="-1"></a>    if <span class="in">(</span>show_data<span class="in">()</span> <span class="op">&amp;&amp;</span> !is<span class="fu">.null</span><span class="in">(</span>Beispieldaten<span class="in">)</span> <span class="op">&amp;&amp;</span> nrow<span class="in">(</span>Beispieldaten<span class="in">)</span> <span class="op">&gt;</span> 0<span class="in">)</span> {</span>
<span id="cb3-1305"><a href="#cb3-1305" aria-hidden="true" tabindex="-1"></a>      data_subset &lt;- Beispieldaten<span class="ex">[</span><span class="ss">Beispieldaten</span><span class="op">$</span><span class="ss">t_s </span><span class="op">&gt;</span>= t_delay<span class="op">,</span> ]</span>
<span id="cb3-1306"><a href="#cb3-1306" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1307"><a href="#cb3-1307" aria-hidden="true" tabindex="-1"></a>      model_values_at_data &lt;- model_function<span class="in">(</span>data_subset$t_s<span class="op">,</span> VO2<span class="op">,</span> tau_fast<span class="op">,</span> VO2_slow<span class="op">,</span> tau_slow<span class="op">,</span> VO2_Start<span class="op">,</span> t_delay<span class="op">,</span> t_delay_slow<span class="in">)</span></span>
<span id="cb3-1308"><a href="#cb3-1308" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1309"><a href="#cb3-1309" aria-hidden="true" tabindex="-1"></a>      r_squared &lt;- calculate_r_squared<span class="in">(</span>data_subset$VO2_t<span class="op">,</span> model_values_at_data<span class="in">)</span></span>
<span id="cb3-1310"><a href="#cb3-1310" aria-hidden="true" tabindex="-1"></a>      current_r_squared<span class="in">(</span>r_squared<span class="in">)</span></span>
<span id="cb3-1311"><a href="#cb3-1311" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1312"><a href="#cb3-1312" aria-hidden="true" tabindex="-1"></a>      current_r_squared<span class="in">(</span>r_squared<span class="in">)</span>  # Aktualisieren Sie die reaktive Variable</span>
<span id="cb3-1313"><a href="#cb3-1313" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1314"><a href="#cb3-1314" aria-hidden="true" tabindex="-1"></a>      p &lt;- p %<span class="op">&gt;</span>%</span>
<span id="cb3-1315"><a href="#cb3-1315" aria-hidden="true" tabindex="-1"></a>        add_trace<span class="in">(</span>data = Beispieldaten<span class="op">,</span> x = <span class="op">~</span>t_s<span class="op">,</span> y = <span class="op">~</span>VO2_t<span class="op">,</span> type = 'scatter'<span class="op">,</span> mode = 'markers<span class="op">+</span>lines'<span class="op">,</span></span>
<span id="cb3-1316"><a href="#cb3-1316" aria-hidden="true" tabindex="-1"></a>                  name = 'V̇O&lt;sub<span class="op">&gt;</span>2&lt;/sub<span class="op">&gt;</span>'<span class="op">,</span> </span>
<span id="cb3-1317"><a href="#cb3-1317" aria-hidden="true" tabindex="-1"></a>                  marker = list<span class="in">(</span>color = 'rgba<span class="in">(</span>38<span class="op">,</span> 131<span class="op">,</span> 198<span class="op">,</span> 0<span class="fu">.9</span><span class="in">)</span>'<span class="op">,</span> size = 5<span class="fu">.0</span><span class="in">)</span><span class="op">,</span></span>
<span id="cb3-1318"><a href="#cb3-1318" aria-hidden="true" tabindex="-1"></a>                  line = list<span class="in">(</span>color = 'rgba<span class="in">(</span>38<span class="op">,</span> 131<span class="op">,</span> 198<span class="op">,</span> 1<span class="fu">.0</span><span class="in">)</span>'<span class="op">,</span> width = 0<span class="fu">.65</span><span class="op">,</span> dash = '4 4'<span class="in">))</span></span>
<span id="cb3-1319"><a href="#cb3-1319" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-1320"><a href="#cb3-1320" aria-hidden="true" tabindex="-1"></a>      p$x$layout$annotations &lt;- c<span class="in">(</span>p$x$layout$annotations<span class="op">,</span></span>
<span id="cb3-1321"><a href="#cb3-1321" aria-hidden="true" tabindex="-1"></a>                                  list<span class="in">(</span></span>
<span id="cb3-1322"><a href="#cb3-1322" aria-hidden="true" tabindex="-1"></a>                                    list<span class="in">(</span></span>
<span id="cb3-1323"><a href="#cb3-1323" aria-hidden="true" tabindex="-1"></a>                                      x = max_x <span class="op">*</span> 0<span class="fu">.35</span><span class="op">,</span></span>
<span id="cb3-1324"><a href="#cb3-1324" aria-hidden="true" tabindex="-1"></a>                                      y = max_y <span class="op">*</span> 0<span class="fu">.10</span><span class="op">,</span></span>
<span id="cb3-1325"><a href="#cb3-1325" aria-hidden="true" tabindex="-1"></a>                                      text = sprintf<span class="in">(</span>"R²<span class="in">:</span> %<span class="fu">.3f</span>"<span class="op">,</span> current_r_squared<span class="in">())</span><span class="op">,</span></span>
<span id="cb3-1326"><a href="#cb3-1326" aria-hidden="true" tabindex="-1"></a>                                      showarrow = FALSE<span class="op">,</span></span>
<span id="cb3-1327"><a href="#cb3-1327" aria-hidden="true" tabindex="-1"></a>                                      xanchor = 'left'<span class="op">,</span></span>
<span id="cb3-1328"><a href="#cb3-1328" aria-hidden="true" tabindex="-1"></a>                                      yanchor = 'bottom'<span class="op">,</span></span>
<span id="cb3-1329"><a href="#cb3-1329" aria-hidden="true" tabindex="-1"></a>                                      font = list<span class="in">(</span></span>
<span id="cb3-1330"><a href="#cb3-1330" aria-hidden="true" tabindex="-1"></a>                                        family = "Arial<span class="op">,</span> sans-serif"<span class="op">,</span></span>
<span id="cb3-1331"><a href="#cb3-1331" aria-hidden="true" tabindex="-1"></a>                                        size = 10<span class="op">,</span></span>
<span id="cb3-1332"><a href="#cb3-1332" aria-hidden="true" tabindex="-1"></a>                                        color = "black"</span>
<span id="cb3-1333"><a href="#cb3-1333" aria-hidden="true" tabindex="-1"></a>                                      <span class="in">)</span></span>
<span id="cb3-1334"><a href="#cb3-1334" aria-hidden="true" tabindex="-1"></a>                                    <span class="in">)</span></span>
<span id="cb3-1335"><a href="#cb3-1335" aria-hidden="true" tabindex="-1"></a>                                  <span class="in">))</span></span>
<span id="cb3-1336"><a href="#cb3-1336" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-1337"><a href="#cb3-1337" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-1338"><a href="#cb3-1338" aria-hidden="true" tabindex="-1"></a>    p</span>
<span id="cb3-1339"><a href="#cb3-1339" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-1340"><a href="#cb3-1340" aria-hidden="true" tabindex="-1"></a>  output$instructions &lt;- renderUI<span class="in">(</span><span class="er">{</span></span>
<span id="cb3-1341"><a href="#cb3-1341" aria-hidden="true" tabindex="-1"></a>    HTML(</span>
<span id="cb3-1342"><a href="#cb3-1342" aria-hidden="true" tabindex="-1"></a>      "&lt;div style='margin-top<span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#f0f0f0</span><span class="op">;</span> <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#ddd</span><span class="op">;</span> <span class="kw">border-radius</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span> <span class="kw">width</span><span class="ch">:</span> <span class="dv">fit-content</span><span class="op">;</span>'<span class="op">&gt;</span></span>
<span id="cb3-1343"><a href="#cb3-1343" aria-hidden="true" tabindex="-1"></a>      &lt;h4 style='color<span class="in">:</span> <span class="pp">#333</span>;'<span class="op">&gt;</span>&lt;strong<span class="op">&gt;</span>Anleitung - Modellanpassung<span class="in">:</span>&lt;/strong<span class="op">&gt;</span>&lt;/h4<span class="op">&gt;</span></span>
<span id="cb3-1344"><a href="#cb3-1344" aria-hidden="true" tabindex="-1"></a>      &lt;ol style='color<span class="in">:</span> <span class="pp">#555</span>; list-style-position<span class="in">:</span> outside; padding-left<span class="in">:</span> 20px;'<span class="op">&gt;</span></span>
<span id="cb3-1345"><a href="#cb3-1345" aria-hidden="true" tabindex="-1"></a>        &lt;li<span class="op">&gt;</span>Beispiel-VO2-Daten einfügen oder eigene VO2-Daten als CSV-Datei hochladen.&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-1346"><a href="#cb3-1346" aria-hidden="true" tabindex="-1"></a>        &lt;li<span class="op">&gt;</span>Zeitverzögerung_fast festlegen<span class="op">,</span> um den Startpunkt der Modellanpassung zu bestimmen.&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-1347"><a href="#cb3-1347" aria-hidden="true" tabindex="-1"></a>        &lt;li<span class="op">&gt;</span>Schrittweise die Modellanpassung durchführen<span class="in">:</span></span>
<span id="cb3-1348"><a href="#cb3-1348" aria-hidden="true" tabindex="-1"></a>          &lt;ol<span class="op">&gt;</span></span>
<span id="cb3-1349"><a href="#cb3-1349" aria-hidden="true" tabindex="-1"></a>            &lt;li<span class="op">&gt;</span>Fit<span class="in">:</span> Schnelle Komponente&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-1350"><a href="#cb3-1350" aria-hidden="true" tabindex="-1"></a>            &lt;li<span class="op">&gt;</span>Fit<span class="in">:</span> Langsame Komponente Verfeinerung&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-1351"><a href="#cb3-1351" aria-hidden="true" tabindex="-1"></a>            &lt;li<span class="op">&gt;</span>Fit<span class="in">:</span> Optimierung&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-1352"><a href="#cb3-1352" aria-hidden="true" tabindex="-1"></a>          &lt;/ol<span class="op">&gt;</span></span>
<span id="cb3-1353"><a href="#cb3-1353" aria-hidden="true" tabindex="-1"></a>        &lt;/li<span class="op">&gt;</span></span>
<span id="cb3-1354"><a href="#cb3-1354" aria-hidden="true" tabindex="-1"></a>        &lt;li<span class="op">&gt;</span>Alternative<span class="in">:</span> Manuelle Anpassung der Modellparameter über die Schieberegler.&lt;/li<span class="op">&gt;</span></span>
<span id="cb3-1355"><a href="#cb3-1355" aria-hidden="true" tabindex="-1"></a>      &lt;/ol<span class="op">&gt;</span></span>
<span id="cb3-1356"><a href="#cb3-1356" aria-hidden="true" tabindex="-1"></a>      &lt;div style='margin-top<span class="in">:</span> 20px;'<span class="op">&gt;</span>&lt;/div<span class="op">&gt;</span></span>
<span id="cb3-1357"><a href="#cb3-1357" aria-hidden="true" tabindex="-1"></a>      &lt;pre style='background-color<span class="in">:</span> <span class="pp">#f8f8f8</span>; padding<span class="in">:</span> 10px; border<span class="in">:</span> 1px solid <span class="pp">#ddd</span>; border-radius<span class="in">:</span> 5px; width<span class="in">:</span> fit-content;'<span class="op">&gt;</span></span>
<span id="cb3-1358"><a href="#cb3-1358" aria-hidden="true" tabindex="-1"></a>VO2-Daten können als CSV-Datei im folgenden Format hochgeladen werden<span class="in">:</span></span>
<span id="cb3-1359"><a href="#cb3-1359" aria-hidden="true" tabindex="-1"></a>t_s<span class="op">,</span>VO2_t</span>
<span id="cb3-1360"><a href="#cb3-1360" aria-hidden="true" tabindex="-1"></a>0<span class="fu">.0</span><span class="op">,</span>0<span class="fu">.479</span></span>
<span id="cb3-1361"><a href="#cb3-1361" aria-hidden="true" tabindex="-1"></a>1<span class="fu">.0</span><span class="op">,</span>0<span class="fu">.459</span></span>
<span id="cb3-1362"><a href="#cb3-1362" aria-hidden="true" tabindex="-1"></a>2<span class="fu">.3</span><span class="op">,</span>0<span class="fu">.488</span></span>
<span id="cb3-1363"><a href="#cb3-1363" aria-hidden="true" tabindex="-1"></a>…</span>
<span id="cb3-1364"><a href="#cb3-1364" aria-hidden="true" tabindex="-1"></a>      &lt;/pre<span class="op">&gt;</span></span>
<span id="cb3-1365"><a href="#cb3-1365" aria-hidden="true" tabindex="-1"></a>    &lt;/div<span class="op">&gt;</span>"</span>
<span id="cb3-1366"><a href="#cb3-1366" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-1367"><a href="#cb3-1367" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-1368"><a href="#cb3-1368" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-1369"><a href="#cb3-1369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1370"><a href="#cb3-1370" aria-hidden="true" tabindex="-1"></a># App ausführen</span>
<span id="cb3-1371"><a href="#cb3-1371" aria-hidden="true" tabindex="-1"></a>shinyApp<span class="in">(</span>ui = ui<span class="op">,</span> server = server<span class="in">)</span></span>
<span id="cb3-1372"><a href="#cb3-1372" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb3-1373"><a href="#cb3-1373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1374"><a href="#cb3-1374" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span> {<span class="fu">.callout-note</span> icon="false" collapse="true" appearance="simple"}</span>
<span id="cb3-1375"><a href="#cb3-1375" aria-hidden="true" tabindex="-1"></a>#### Modellanpassung - Details<span class="in">:</span> {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-1376"><a href="#cb3-1376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1377"><a href="#cb3-1377" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>1. Schnelle Komponente <span class="in">(</span>1. Fit<span class="in">):</span><span class="op">**</span></span>
<span id="cb3-1378"><a href="#cb3-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1379"><a href="#cb3-1379" aria-hidden="true" tabindex="-1"></a>-   Verwendete Funktion<span class="in">:</span> nlsLM</span>
<span id="cb3-1380"><a href="#cb3-1380" aria-hidden="true" tabindex="-1"></a>-   Parameter<span class="in">:</span> V̇O2_fast<span class="op">,</span> tau_fast</span>
<span id="cb3-1381"><a href="#cb3-1381" aria-hidden="true" tabindex="-1"></a>-   Grenzen<span class="in">:</span></span>
<span id="cb3-1382"><a href="#cb3-1382" aria-hidden="true" tabindex="-1"></a>    -   V̇O2_fast<span class="in">:</span> <span class="op">*</span>0<span class="fu">.5</span> bis 7<span class="fu">.0</span> l/min<span class="op">*</span></span>
<span id="cb3-1383"><a href="#cb3-1383" aria-hidden="true" tabindex="-1"></a>    -   tau_fast<span class="in">:</span> <span class="op">*</span>10 bis 120 s<span class="op">*</span></span>
<span id="cb3-1384"><a href="#cb3-1384" aria-hidden="true" tabindex="-1"></a>-   Prozess<span class="in">:</span> <span class="op">*</span>100 Iterationen<span class="op">*</span> mit zufälligen Startwerten</span>
<span id="cb3-1385"><a href="#cb3-1385" aria-hidden="true" tabindex="-1"></a>-   Optimierung<span class="in">:</span> Minimierung der Residuenquadratsumme <span class="in">(</span>RSS<span class="in">)</span></span>
<span id="cb3-1386"><a href="#cb3-1386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1387"><a href="#cb3-1387" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>2. Langsame Komponente <span class="op">&amp;</span> Verfeinerung <span class="in">(</span>2. Fit<span class="in">):</span><span class="op">**</span></span>
<span id="cb3-1388"><a href="#cb3-1388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1389"><a href="#cb3-1389" aria-hidden="true" tabindex="-1"></a>-   Parameter<span class="in">:</span> V̇O2_fast<span class="op">,</span> tau_fast<span class="op">,</span> V̇O2_slow<span class="op">,</span> tau_slow<span class="op">,</span> t_delay_slow</span>
<span id="cb3-1390"><a href="#cb3-1390" aria-hidden="true" tabindex="-1"></a>-   Initiale Werte <span class="in">(</span>basierend auf Ozyener et al.<span class="op">,</span> 2001<span class="in">):</span></span>
<span id="cb3-1391"><a href="#cb3-1391" aria-hidden="true" tabindex="-1"></a>    -   V̇O2_slow<span class="in">:</span> <span class="op">*</span>0<span class="fu">.4</span> l/min<span class="op">*</span></span>
<span id="cb3-1392"><a href="#cb3-1392" aria-hidden="true" tabindex="-1"></a>    -   tau_slow<span class="in">:</span> <span class="op">*</span>160 s<span class="op">*</span></span>
<span id="cb3-1393"><a href="#cb3-1393" aria-hidden="true" tabindex="-1"></a>-   Grenzen<span class="in">:</span></span>
<span id="cb3-1394"><a href="#cb3-1394" aria-hidden="true" tabindex="-1"></a>    -   V̇O2_slow<span class="in">:</span> <span class="op">*</span>0<span class="fu">.05</span> bis 1<span class="fu">.0</span> l/min<span class="op">*</span></span>
<span id="cb3-1395"><a href="#cb3-1395" aria-hidden="true" tabindex="-1"></a>    -   tau_slow<span class="in">:</span> <span class="op">*</span>90 bis Unendlich s<span class="op">*</span></span>
<span id="cb3-1396"><a href="#cb3-1396" aria-hidden="true" tabindex="-1"></a>    -   t_delay_slow<span class="in">:</span> <span class="op">*</span>tau_fast <span class="op">+</span> t_delay bis max<span class="in">(</span>t_s<span class="in">)</span><span class="op">*</span></span>
<span id="cb3-1397"><a href="#cb3-1397" aria-hidden="true" tabindex="-1"></a>-   Prozess für t_delay_slow<span class="in">:</span></span>
<span id="cb3-1398"><a href="#cb3-1398" aria-hidden="true" tabindex="-1"></a>    a)  Berechnung des Suchbereichs<span class="in">:</span> von <span class="op">*</span><span class="in">(</span>tau_fast <span class="op">+</span> t_delay<span class="in">)</span><span class="op">*</span> bis zum</span>
<span id="cb3-1399"><a href="#cb3-1399" aria-hidden="true" tabindex="-1"></a>        maximalen Zeitpunkt der Daten</span>
<span id="cb3-1400"><a href="#cb3-1400" aria-hidden="true" tabindex="-1"></a>    b)  Iteration durch jeden möglichen Wert in diesem Bereich</span>
<span id="cb3-1401"><a href="#cb3-1401" aria-hidden="true" tabindex="-1"></a>        <span class="in">(</span><span class="op">*</span>1-Sekunden-Schritte<span class="op">*</span><span class="in">)</span></span>
<span id="cb3-1402"><a href="#cb3-1402" aria-hidden="true" tabindex="-1"></a>    c)  Für jeden t_delay_slow-Wert<span class="in">:</span></span>
<span id="cb3-1403"><a href="#cb3-1403" aria-hidden="true" tabindex="-1"></a>        -   Berechnung der RSS mit festen Werten für V̇O2_slow <span class="in">(</span><span class="op">*</span>0<span class="fu">.4</span></span>
<span id="cb3-1404"><a href="#cb3-1404" aria-hidden="true" tabindex="-1"></a>            l/min<span class="op">*</span><span class="in">)</span> und tau_slow <span class="in">(</span><span class="op">*</span>160 s<span class="op">*</span><span class="in">)</span></span>
<span id="cb3-1405"><a href="#cb3-1405" aria-hidden="true" tabindex="-1"></a>    d)  Auswahl des t_delay_slow-Wertes mit der niedrigsten RSS</span>
<span id="cb3-1406"><a href="#cb3-1406" aria-hidden="true" tabindex="-1"></a>-   Optimierung von V̇O2_fast und tau_fast<span class="in">:</span></span>
<span id="cb3-1407"><a href="#cb3-1407" aria-hidden="true" tabindex="-1"></a>    a)  Schrittweise Reduzierung von V̇O2_fast <span class="in">(</span><span class="op">*</span>0<span class="fu">.01</span> l/min<span class="op">*</span><span class="in">)</span> und</span>
<span id="cb3-1408"><a href="#cb3-1408" aria-hidden="true" tabindex="-1"></a>        tau_fast <span class="in">(</span><span class="op">*</span>0<span class="fu">.1</span> s<span class="op">*</span><span class="in">)</span></span>
<span id="cb3-1409"><a href="#cb3-1409" aria-hidden="true" tabindex="-1"></a>    b)  Bei jeder Änderung<span class="in">:</span> Berechnung der neuen RSS</span>
<span id="cb3-1410"><a href="#cb3-1410" aria-hidden="true" tabindex="-1"></a>    c)  Akzeptanz der Änderung nur bei Verbesserung der RSS</span>
<span id="cb3-1411"><a href="#cb3-1411" aria-hidden="true" tabindex="-1"></a>    d)  Wiederholung bis keine Verbesserung mehr möglich</span>
<span id="cb3-1412"><a href="#cb3-1412" aria-hidden="true" tabindex="-1"></a>-   Optimierung von V̇O2_slow und tau_slow<span class="in">:</span></span>
<span id="cb3-1413"><a href="#cb3-1413" aria-hidden="true" tabindex="-1"></a>    a)  Zunächst Reduzierung<span class="in">:</span> V̇O2_slow <span class="in">(</span><span class="op">*</span>0<span class="fu">.01</span> l/min<span class="op">*</span><span class="in">)</span> und tau_slow <span class="in">(</span><span class="op">*</span>0<span class="fu">.1</span></span>
<span id="cb3-1414"><a href="#cb3-1414" aria-hidden="true" tabindex="-1"></a>        s<span class="op">*</span><span class="in">)</span></span>
<span id="cb3-1415"><a href="#cb3-1415" aria-hidden="true" tabindex="-1"></a>    b)  Dann Erhöhung<span class="in">:</span> V̇O2_slow <span class="in">(</span><span class="op">*</span>0<span class="fu">.01</span> l/min<span class="op">*</span><span class="in">)</span> und tau_slow <span class="in">(</span><span class="op">*</span>0<span class="fu">.1</span> s<span class="op">*</span><span class="in">)</span></span>
<span id="cb3-1416"><a href="#cb3-1416" aria-hidden="true" tabindex="-1"></a>    c)  Bei jeder Änderung<span class="in">:</span> Berechnung der neuen RSS</span>
<span id="cb3-1417"><a href="#cb3-1417" aria-hidden="true" tabindex="-1"></a>    d)  Akzeptanz der Änderung nur bei Verbesserung der RSS</span>
<span id="cb3-1418"><a href="#cb3-1418" aria-hidden="true" tabindex="-1"></a>    e)  Wiederholung jeder Richtung bis keine Verbesserung mehr möglich</span>
<span id="cb3-1419"><a href="#cb3-1419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1420"><a href="#cb3-1420" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>3. Optimierung <span class="in">(</span>3. Fit<span class="in">):</span><span class="op">**</span></span>
<span id="cb3-1421"><a href="#cb3-1421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1422"><a href="#cb3-1422" aria-hidden="true" tabindex="-1"></a>-   Verwendete Funktion<span class="in">:</span> nlsLM</span>
<span id="cb3-1423"><a href="#cb3-1423" aria-hidden="true" tabindex="-1"></a>-   Parameter<span class="in">:</span> V̇O2_fast<span class="op">,</span> tau_fast<span class="op">,</span> V̇O2_slow<span class="op">,</span> tau_slow<span class="op">,</span> t_delay_slow</span>
<span id="cb3-1424"><a href="#cb3-1424" aria-hidden="true" tabindex="-1"></a>-   Grenzen<span class="in">:</span> Basierend auf den Ergebnissen von Schritt 2</span>
<span id="cb3-1425"><a href="#cb3-1425" aria-hidden="true" tabindex="-1"></a>    -   V̇O2_fast<span class="in">:</span> <span class="op">*</span>±2% des Wertes aus Schritt 2<span class="op">*</span></span>
<span id="cb3-1426"><a href="#cb3-1426" aria-hidden="true" tabindex="-1"></a>    -   tau_fast<span class="in">:</span> <span class="op">*</span>±3 s des Wertes aus Schritt 2 <span class="in">(</span>Minimum 10 s<span class="in">)</span><span class="op">*</span></span>
<span id="cb3-1427"><a href="#cb3-1427" aria-hidden="true" tabindex="-1"></a>    -   V̇O2_slow<span class="in">:</span> <span class="op">*</span>±2% des Wertes aus Schritt 2<span class="op">*</span></span>
<span id="cb3-1428"><a href="#cb3-1428" aria-hidden="true" tabindex="-1"></a>    -   tau_slow<span class="in">:</span> <span class="op">*</span>±3 s des Wertes aus Schritt 2 <span class="in">(</span>Minimum 90 s<span class="in">)</span><span class="op">*</span></span>
<span id="cb3-1429"><a href="#cb3-1429" aria-hidden="true" tabindex="-1"></a>    -   t_delay_slow<span class="in">:</span> <span class="op">*</span>±5 s des Wertes aus Schritt 2 <span class="in">(</span>Minimum 0 s<span class="in">)</span><span class="op">*</span></span>
<span id="cb3-1430"><a href="#cb3-1430" aria-hidden="true" tabindex="-1"></a>-   Prozess<span class="in">:</span> <span class="op">*</span>1000 Iterationen<span class="op">*</span> mit zufälligen Startwerten innerhalb der</span>
<span id="cb3-1431"><a href="#cb3-1431" aria-hidden="true" tabindex="-1"></a>    Grenzen</span>
<span id="cb3-1432"><a href="#cb3-1432" aria-hidden="true" tabindex="-1"></a>-   Optimierung<span class="in">:</span> Minimierung der RSS</span>
<span id="cb3-1433"><a href="#cb3-1433" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-1434"><a href="#cb3-1434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1435"><a href="#cb3-1435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1436"><a href="#cb3-1436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1437"><a href="#cb3-1437" aria-hidden="true" tabindex="-1"></a>## Methodik<span class="in">:</span> Umgang mit $\dot{V}O_{2}$-Daten in dieser Arbeit {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-1438"><a href="#cb3-1438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1439"><a href="#cb3-1439" aria-hidden="true" tabindex="-1"></a>In dieser Arbeit wurde der Anstieg des $\dot{V}O_{2}\,<span class="in">(</span>t<span class="in">)</span>$ nach</span>
<span id="cb3-1440"><a href="#cb3-1440" aria-hidden="true" tabindex="-1"></a>Belastungsbeginn für jede Belastungsstufe wie folgt analysiert<span class="in">:</span> Zunächst</span>
<span id="cb3-1441"><a href="#cb3-1441" aria-hidden="true" tabindex="-1"></a>wurden aus den Atemzug-für-Atemzug $\dot{V}O_{2}$-Daten die Ausreißer</span>
<span id="cb3-1442"><a href="#cb3-1442" aria-hidden="true" tabindex="-1"></a>entfernt. Danach erfolgte eine Glättung der Daten mittels eines</span>
<span id="cb3-1443"><a href="#cb3-1443" aria-hidden="true" tabindex="-1"></a>gleitenden 3-Atemzug-Durchschnitts<span class="op">,</span> gefolgt von der Kurvenanpassung.&lt;br<span class="op">&gt;</span></span>
<span id="cb3-1444"><a href="#cb3-1444" aria-hidden="true" tabindex="-1"></a>Vor der Kurvenanpassung wurde die Zeitverzögerung der Hauptkomponente</span>
<span id="cb3-1445"><a href="#cb3-1445" aria-hidden="true" tabindex="-1"></a>des $\dot{V}O_{2}\,<span class="in">(</span>t<span class="in">)</span>$ grafisch so bestimmt<span class="op">,</span> dass die</span>
<span id="cb3-1446"><a href="#cb3-1446" aria-hidden="true" tabindex="-1"></a>Phase-I-Daten der kardiorespiratorischen Antwort nicht einbezogen</span>
<span id="cb3-1447"><a href="#cb3-1447" aria-hidden="true" tabindex="-1"></a>wurden. Dies entsprach in der Regel dem von <span class="ex">[</span><span class="ss">@Bearden2000</span>;</span>
<span id="cb3-1448"><a href="#cb3-1448" aria-hidden="true" tabindex="-1"></a><span class="im">@Stirling2005</span>] beschriebenen Zeitraum von 10-25 Sekunden für Phase 1.</span>
<span id="cb3-1449"><a href="#cb3-1449" aria-hidden="true" tabindex="-1"></a>Die Kurvenanpassung wurde anschließend mit @eq-VO2_Start an die</span>
<span id="cb3-1450"><a href="#cb3-1450" aria-hidden="true" tabindex="-1"></a>jeweiligen Daten durchgeführt. Die Modellparameter der Kurvenanpassung</span>
<span id="cb3-1451"><a href="#cb3-1451" aria-hidden="true" tabindex="-1"></a>wurden wie folgt gewählt:</span>
<span id="cb3-1452"><a href="#cb3-1452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1453"><a href="#cb3-1453" aria-hidden="true" tabindex="-1"></a>::: {<span class="fu">.callout-note</span> icon="false" collapse="true" appearance="simple"}</span>
<span id="cb3-1454"><a href="#cb3-1454" aria-hidden="true" tabindex="-1"></a>### Parameter - Kurvenanpassung<span class="in">:</span> {<span class="fu">.unnumbered</span> <span class="fu">.unlisted</span>}</span>
<span id="cb3-1455"><a href="#cb3-1455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1456"><a href="#cb3-1456" aria-hidden="true" tabindex="-1"></a>-   Verwendete Funktion<span class="in">:</span> nlsLM</span>
<span id="cb3-1457"><a href="#cb3-1457" aria-hidden="true" tabindex="-1"></a>    -   Maximale Iterationen<span class="in">:</span> <span class="op">*</span>1024<span class="op">*</span></span>
<span id="cb3-1458"><a href="#cb3-1458" aria-hidden="true" tabindex="-1"></a>    -   Verwendung des Levenberg-Marquardt-Algorithmus</span>
<span id="cb3-1459"><a href="#cb3-1459" aria-hidden="true" tabindex="-1"></a>-   Parameter<span class="in">:</span> V̇O2 <span class="in">(</span>Amplitude<span class="in">)</span><span class="op">,</span> Tau</span>
<span id="cb3-1460"><a href="#cb3-1460" aria-hidden="true" tabindex="-1"></a>-   Modell<span class="in">:</span> V̇O2_t \~ V̇O2 · <span class="in">(</span>1 - exp<span class="in">(</span>-<span class="in">(</span>t_s - t_delay<span class="in">)</span> / Tau<span class="in">))</span> <span class="op">+</span> V̇O2_Start</span>
<span id="cb3-1461"><a href="#cb3-1461" aria-hidden="true" tabindex="-1"></a>-   Grenzen<span class="in">:</span></span>
<span id="cb3-1462"><a href="#cb3-1462" aria-hidden="true" tabindex="-1"></a>    -   V̇O2<span class="in">:</span> <span class="op">*</span>0<span class="fu">.5</span> bis 7<span class="fu">.0</span> l/min<span class="op">*</span></span>
<span id="cb3-1463"><a href="#cb3-1463" aria-hidden="true" tabindex="-1"></a>    -   Tau<span class="in">:</span> <span class="op">*</span>5 bis 360 s<span class="op">*</span></span>
<span id="cb3-1464"><a href="#cb3-1464" aria-hidden="true" tabindex="-1"></a>-   Optimierung<span class="in">:</span> Minimierung der Residuenquadratsumme <span class="in">(</span>RSS<span class="in">)</span></span>
<span id="cb3-1465"><a href="#cb3-1465" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
<span id="cb3-1466"><a href="#cb3-1466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1467"><a href="#cb3-1467" aria-hidden="true" tabindex="-1"></a>Dies erfolgte für jedes Belastungsintervall</span>
<span id="cb3-1468"><a href="#cb3-1468" aria-hidden="true" tabindex="-1"></a>mittels nichtlinearer Regression unter Verwendung des in <span class="im">@eq-VO2_Start</span></span>
<span id="cb3-1469"><a href="#cb3-1469" aria-hidden="true" tabindex="-1"></a>beschriebenen mono-exponentiellen 3-Parameter-Modells</span>
<span id="cb3-1470"><a href="#cb3-1470" aria-hidden="true" tabindex="-1"></a>[@Francescato2003]. Da die Probanden in den Erholungsphasen nicht</span>
<span id="cb3-1471"><a href="#cb3-1471" aria-hidden="true" tabindex="-1"></a>vollständig ruhten, war der Sauerstoffvolumenstrom zu Beginn der</span>
<span id="cb3-1472"><a href="#cb3-1472" aria-hidden="true" tabindex="-1"></a>Belastung <span class="fu">(</span>$<span class="dv">\dot</span><span class="er">{</span>V}O_{2<span class="op">,</span> Start}$) signifikant höher als</span>
<span id="cb3-1473"><a href="#cb3-1473" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_{2<span class="op">,</span>Ruhe}$. $\dot{V}O_{2net<span class="op">,</span> SS}$ wurde als der</span>
<span id="cb3-1474"><a href="#cb3-1474" aria-hidden="true" tabindex="-1"></a>Wert der Modellfunktion von $\dot{V}O_{2gross<span class="op">,</span> SS}$ zum Zeitpunkt</span>
<span id="cb3-1475"><a href="#cb3-1475" aria-hidden="true" tabindex="-1"></a>$4 \cdot τ_{Start}$ abzüglich $\dot{V}O_{2<span class="op">,</span>Ruhe}$ bestimmt. Bis zum</span>
<span id="cb3-1476"><a href="#cb3-1476" aria-hidden="true" tabindex="-1"></a>Zeitpunkt $4 \cdot τ_{Start}$ hat ungefähr 98<span class="op">,</span>2 % des Anstiegs von</span>
<span id="cb3-1477"><a href="#cb3-1477" aria-hidden="true" tabindex="-1"></a>$\dot{V}O_{2<span class="op">,</span> Belastung}<span class="in">(</span>t<span class="in">)</span>$ stattgefunden. Daher wurde dieser Zeitpunkt</span>
<span id="cb3-1478"><a href="#cb3-1478" aria-hidden="true" tabindex="-1"></a>näherungsweise als Steady-State <span class="in">(</span>SS<span class="in">)</span> Wert des Sauerstoffvolumenstroms</span>
<span id="cb3-1479"><a href="#cb3-1479" aria-hidden="true" tabindex="-1"></a>während der Belastung festgelegt. Ein Modellierungsbeispiel ist in</span>
<span id="cb3-1480"><a href="#cb3-1480" aria-hidden="true" tabindex="-1"></a><span class="im">@fig-VO2_Start</span> zu sehen:</span>
<span id="cb3-1481"><a href="#cb3-1481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1482"><a href="#cb3-1482" aria-hidden="true" tabindex="-1"></a>![Modellierung der Sauerstoffkinetik während des Belastungstests 01_2 mit exponentieller Anpassungskurve]<span class="fu">(</span><span class="dv">images</span>/<span class="dv">p_VO2_01_2</span>.<span class="dv">svg</span><span class="fu">)</span>{<span class="pp">#fig-VO2_Start</span> width="1100" height="450"}</span>
<span id="cb3-1483"><a href="#cb3-1483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1484"><a href="#cb3-1484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1485"><a href="#cb3-1485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1488"><a href="#cb3-1488" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb3-1489"><a href="#cb3-1489" aria-hidden="true" tabindex="-1"></a>### Dauer der Zeitkonstante bei verschiedenen Intensitäten unterschiedlich</span>
<span id="cb3-1490"><a href="#cb3-1490" aria-hidden="true" tabindex="-1"></a># <span class="im">@Oezyener2001</span> fanden, dass der Wert von τ~Start~ für die Sauerstoffaufnahme im Durchschnitt bei 33 ± 16 s liegt, unabhängig von der Belastungshöhe. </span>
<span id="cb3-1491"><a href="#cb3-1491" aria-hidden="true" tabindex="-1"></a># -Im Gegensatz dazu berichten andere Studien von einem Anstieg von τ~Start~ mit zunehmender Belastung <span class="fu">(</span><span class="dv">Linnarsson 1974</span><span class="fu">)</span>.</span>
<span id="cb3-1492"><a href="#cb3-1492" aria-hidden="true" tabindex="-1"></a># Wasserman et al. [@Wasserman1967] prognostizierten und fanden experimentell heraus, dass der Sauerstoffverbrauch bei schweren Arbeitsbelastungen länger ansteigt als bei moderaten Intensitäten. Henry und DeMoor [@Henry1956] stellten ebenfalls fest, dass die Zeit bis zum Erreichen eines stabilen Zustands der Sauerstoffaufnahme <span class="fu">(</span><span class="dv">VO2</span><span class="fu">)</span> mit steigender Arbeitslast zunimmt. Im Gegensatz dazu berichten Di Prampero et al. [@DiPrampero1970] und Margaria et al. [@Margaria1965], dass das Muster des VO2-Anstiegs zum stabilen Zustand unabhängig von der Arbeitsintensität gleich ist und dieser Anstieg durch einen einzigen exponentiellen Prozess beschrieben wird, wobei die Reaktionskonstante für alle Arbeitslasten gleich ist.</span>
<span id="cb3-1493"><a href="#cb3-1493" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb3-1494"><a href="#cb3-1494" aria-hidden="true" tabindex="-1"></a># **Moderate Intensität:**</span>
<span id="cb3-1495"><a href="#cb3-1495" aria-hidden="true" tabindex="-1"></a># Die pulmonale V̇O~2~steigt monoexponentiell und erreicht innerhalb von etwa 3 Minuten einen Steady State [@Whipp1982<span class="op">;</span> <span class="im">@Hughson1988</span><span class="op">;</span> <span class="im">@Whipp1994</span>]. Die V̇O~2~ erhöht sich linear zur Arbeitsrate um etwa 10 ml·min^-1·W^-1. Sobald der Steady State erreicht ist, sind ATP-Resynthese und oxidative Phosphorylierung im Gleichgewicht [@Kindermann1979<span class="op">;</span> <span class="im">@Faude2009</span>].</span>
<span id="cb3-1496"><a href="#cb3-1496" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb3-1497"><a href="#cb3-1497" aria-hidden="true" tabindex="-1"></a># **Schwere Intensität:**</span>
<span id="cb3-1498"><a href="#cb3-1498" aria-hidden="true" tabindex="-1"></a># Die schwere Intensität liegt zwischen der maximalen Leistungsfähigkeit <span class="fu">(</span><span class="dv">GXT</span><span class="fu">)</span> und der kritischen Leistung <span class="fu">(</span><span class="dv">CP</span><span class="fu">)</span> [@Hill1993]. Bei schwerer Belastung ist der oxidative Bedarf höher, und der Steady State verzögert sich durch die V̇O~2~ Slow Component. Die O~2~-Kosten steigen auf etwa 13 ml·min^-1·W^-1 [@WhippWasserman1972<span class="op">;</span> <span class="im">@PearceMilhorn1977</span><span class="op">;</span> <span class="im">@WhippMahler1980</span><span class="op">;</span> <span class="im">@BarstowMole1991</span>]. Die arterielle Laktatkonzentration steigt über die Ausgangswerte, erreicht aber ein erhöhtes Gleichgewicht [@Billat2003].</span>
<span id="cb3-1499"><a href="#cb3-1499" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb3-1500"><a href="#cb3-1500" aria-hidden="true" tabindex="-1"></a># **Schwere Intensität:**</span>
<span id="cb3-1501"><a href="#cb3-1501" aria-hidden="true" tabindex="-1"></a># In der Forschung ist umstritten, ob die primäre V̇O~2~-Kinetik bei schwerer Belastung langsamer ist als bei moderater. Dies könnte auf eine größere Zeitkonstante oder eine zusätzliche Slow Component in V̇O~2~ hindeuten, die einen verzögerten Steady State über dem vorhergesagten Niveau erreicht [@PatersonWhipp1991<span class="op">;</span> <span class="im">@BarstowMole1991</span>].</span>
<span id="cb3-1502"><a href="#cb3-1502" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb3-1503"><a href="#cb3-1503" aria-hidden="true" tabindex="-1"></a># **Sehr schwere Intensität:**</span>
<span id="cb3-1504"><a href="#cb3-1504" aria-hidden="true" tabindex="-1"></a># Bei sehr schwerer Intensität, oberhalb des maximalen Laktat-Steady-State oder der kritischen Leistung, erreichen weder V̇O~2~ noch arterielle Laktatkonzentration einen Steady State [@GaesserPoole1996]. Beide steigen unaufhaltsam, bis Ermüdung eintritt und maximale V̇O~2~-Werte erreicht werden [@WassermanWhipp1975<span class="op">;</span> <span class="im">@GaesserPoole1996</span>].</span>
<span id="cb3-1505"><a href="#cb3-1505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1506"><a href="#cb3-1506" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb3-1507"><a href="#cb3-1507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1508"><a href="#cb3-1508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1509"><a href="#cb3-1509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1510"><a href="#cb3-1510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1511"><a href="#cb3-1511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1512"><a href="#cb3-1512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1513"><a href="#cb3-1513" aria-hidden="true" tabindex="-1"></a>## Quellenverzeichnis</span>
<span id="cb3-1514"><a href="#cb3-1514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-1515"><a href="#cb3-1515" aria-hidden="true" tabindex="-1"></a>::: {<span class="pp">#refs</span>}</span>
<span id="cb3-1516"><a href="#cb3-1516" aria-hidden="true" tabindex="-1"></a><span class="in">:::</span></span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Johannes Will, 2024</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>